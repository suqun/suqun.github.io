
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>å…¥è€³ç®¸å¿ƒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="çŸ¥ä¹‹è€…ä¸å¦‚å¥½ä¹‹è€…ï¼Œå¥½ä¹‹è€…ä¸å¦‚ä¹ä¹‹è€…ã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="å…¥è€³ç®¸å¿ƒ">
<meta property="og:url" content="http://suqun.github.io/index.html">
<meta property="og:site_name" content="å…¥è€³ç®¸å¿ƒ">
<meta property="og:description" content="çŸ¥ä¹‹è€…ä¸å¦‚å¥½ä¹‹è€…ï¼Œå¥½ä¹‹è€…ä¸å¦‚ä¹ä¹‹è€…ã€‚">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å…¥è€³ç®¸å¿ƒ">
<meta name="twitter:description" content="çŸ¥ä¹‹è€…ä¸å¦‚å¥½ä¹‹è€…ï¼Œå¥½ä¹‹è€…ä¸å¦‚ä¹ä¹‹è€…ã€‚">
  
    <link rel="alternative" href="/atom.xml" title="å…¥è€³ç®¸å¿ƒ" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">å…¥è€³ç®¸å¿ƒ</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">æˆé•¿è·¯ä¸Šçš„ç‚¹æ»´è®°å½•</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">æ‰€æœ‰æ–‡ç« </a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="suqun.github.io">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-JVM-note-8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/08/JVM-note-8/" class="article-date">
  <time datetime="2017-03-08T14:14:36.000Z" itemprop="datePublished">2017-03-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/JVM-note-8/">è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h2 id="Sun_JDK_u76D1_u63A7_u548C_u6545_u969C_u5904_u7406_u5DE5_u5177"><a href="#Sun_JDK_u76D1_u63A7_u548C_u6545_u969C_u5904_u7406_u5DE5_u5177" class="headerlink" title="Sun JDKç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·"></a>Sun JDKç›‘æ§å’Œæ•…éšœå¤„ç†å·¥å…·</h2><table>
<thead>
<tr>
<th>åç§°</th>
<th style="text-align:center">ä¸»è¦ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>jps</td>
<td style="text-align:center">JVM Process Status Toolï¼Œæ˜¾ç¤ºæŒ‡å®šç³»ç»Ÿå†…æ‰€æœ‰HotSpotè™šæ‹Ÿæœºè¿›ç¨‹</td>
</tr>
<tr>
<td>jstat</td>
<td style="text-align:center">JVM Statistics Monitoring Toolï¼Œç”¨äºæ”¶é›†HotSpotè™šæ‹Ÿæœºå„æ–¹é¢çš„è¿è¡Œæ•°æ®</td>
</tr>
<tr>
<td>jinfo</td>
<td style="text-align:center">Configuration Info for Javaï¼Œæ˜¾ç¤ºè™šæ‹Ÿæœºé…ç½®ä¿¡æ¯</td>
</tr>
<tr>
<td>jmap</td>
<td style="text-align:center">Memory Map for Java,ç”Ÿæˆè™šæ‹Ÿæœºçš„å†…å­˜è½¬å‡ºå¿«ç…§(heapdump)æ–‡ä»¶</td>
</tr>
<tr>
<td>jhat</td>
<td style="text-align:center">JVM Heap Dump Browser,ç”¨äºåˆ†æheapdumpæ–‡ä»¶ï¼Œå®ƒä¼šå»ºç«‹ä¸€ä¸ªHTTP/HTMLæœåŠ¡å™¨ï¼Œè®©ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸ŠæŸ¥çœ‹åˆ†æç»“æœ</td>
</tr>
<tr>
<td>jstack</td>
<td style="text-align:center">Stack Trace for Java,æ˜¾ç¤ºè™šæ‹Ÿæœºçš„çº¿ç¨‹å¿«ç…§</td>
</tr>
</tbody>
</table>
<h3 id="jps_3A_u865A_u62DF_u673A_u7EBF_u7A0B_u72B6_u51B5_u5DE5_u5177"><a href="#jps_3A_u865A_u62DF_u673A_u7EBF_u7A0B_u72B6_u51B5_u5DE5_u5177" class="headerlink" title="jps:è™šæ‹Ÿæœºçº¿ç¨‹çŠ¶å†µå·¥å…·"></a>jps:è™šæ‹Ÿæœºçº¿ç¨‹çŠ¶å†µå·¥å…·</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-jps.png" alt=""></p>
<h3 id="jstat_3A_u865A_u62DF_u673A_u7EDF_u8BA1_u4FE1_u606F_u76D1_u89C6_u5DE5_u5177"><a href="#jstat_3A_u865A_u62DF_u673A_u7EDF_u8BA1_u4FE1_u606F_u76D1_u89C6_u5DE5_u5177" class="headerlink" title="jstat:è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·"></a>jstat:è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-jstat.png" alt=""></p>
<p>ğŸŒ° æŸ¥çœ‹çº¿ç¨‹51710çº¿ç¨‹åƒåœ¾æ”¶é›†æƒ…å†µï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ jstat -gc <span class="number">51710</span> <span class="number">250</span> <span class="number">5</span></span><br><span class="line"> S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line"><span class="number">24576.0</span> <span class="number">46592.0</span> <span class="number">24077.9</span>  <span class="number">0.0</span>   <span class="number">773632.0</span> <span class="number">109440.9</span>  <span class="number">139776.0</span>   <span class="number">50009.5</span>   <span class="number">34560.0</span> <span class="number">33710.1</span> <span class="number">4096.0</span> <span class="number">3911.8</span>     <span class="number">10</span>    <span class="number">0.191</span>   <span class="number">1</span>      <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"><span class="number">24576.0</span> <span class="number">46592.0</span> <span class="number">24077.9</span>  <span class="number">0.0</span>   <span class="number">773632.0</span> <span class="number">109440.9</span>  <span class="number">139776.0</span>   <span class="number">50009.5</span>   <span class="number">34560.0</span> <span class="number">33710.1</span> <span class="number">4096.0</span> <span class="number">3911.8</span>     <span class="number">10</span>    <span class="number">0.191</span>   <span class="number">1</span>      <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"><span class="number">24576.0</span> <span class="number">46592.0</span> <span class="number">24077.9</span>  <span class="number">0.0</span>   <span class="number">773632.0</span> <span class="number">109440.9</span>  <span class="number">139776.0</span>   <span class="number">50009.5</span>   <span class="number">34560.0</span> <span class="number">33710.1</span> <span class="number">4096.0</span> <span class="number">3911.8</span>     <span class="number">10</span>    <span class="number">0.191</span>   <span class="number">1</span>      <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"><span class="number">24576.0</span> <span class="number">46592.0</span> <span class="number">24077.9</span>  <span class="number">0.0</span>   <span class="number">773632.0</span> <span class="number">109440.9</span>  <span class="number">139776.0</span>   <span class="number">50009.5</span>   <span class="number">34560.0</span> <span class="number">33710.1</span> <span class="number">4096.0</span> <span class="number">3911.8</span>     <span class="number">10</span>    <span class="number">0.191</span>   <span class="number">1</span>      <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"><span class="number">24576.0</span> <span class="number">46592.0</span> <span class="number">24077.9</span>  <span class="number">0.0</span>   <span class="number">773632.0</span> <span class="number">109440.9</span>  <span class="number">139776.0</span>   <span class="number">50009.5</span>   <span class="number">34560.0</span> <span class="number">33710.1</span> <span class="number">4096.0</span> <span class="number">3911.8</span>     <span class="number">10</span>    <span class="number">0.191</span>   <span class="number">1</span>      <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line">âœ  ~ jstat -gcutil <span class="number">51710</span> <span class="number">250</span> <span class="number">5</span></span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">14.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">14.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">14.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">14.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">14.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span></span><br><span class="line">âœ  ~ jstat -gccause <span class="number">51710</span> <span class="number">250</span> <span class="number">5</span></span><br><span class="line">  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC</span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">15.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span> Allocation Failure   No GC</span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">15.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span> Allocation Failure   No GC</span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">15.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span> Allocation Failure   No GC</span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">15.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span> Allocation Failure   No GC</span><br><span class="line"> <span class="number">97.97</span>   <span class="number">0.00</span>  <span class="number">15.15</span>  <span class="number">35.78</span>  <span class="number">97.54</span>  <span class="number">95.50</span>     <span class="number">10</span>    <span class="number">0.191</span>     <span class="number">1</span>    <span class="number">0.052</span>    <span class="number">0.243</span> Allocation Failure   No GC</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>åˆ—</th>
<th>è¯´æ˜</th>
<th>jstatå‚æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>S0C</td>
<td>è¾“å‡ºSurvivor0ç©ºé—´çš„å¤§å°,å•ä½KB</td>
<td>-gc<br>-gccapacity<br>-gcnew<br>-gcnewcapacity</td>
</tr>
<tr>
<td>S1C</td>
<td>è¾“å‡ºSurvivor1ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc<br> -gccapacity <br>-gcnew <br>-gcnewcapacity</td>
</tr>
<tr>
<td>S0U</td>
<td>è¾“å‡ºSurvivor0å·²ç”¨ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc<br> -gcnew</td>
</tr>
<tr>
<td>S1U</td>
<td>è¾“å‡ºSurvivor1å·²ç”¨ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc<br>-gcnew</td>
</tr>
<tr>
<td>EC</td>
<td>è¾“å‡ºEdenç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc<br> -gccapacity <br>-gcnew <br>-gcnewcapacity</td>
</tr>
<tr>
<td>EU</td>
<td>è¾“å‡ºEdenå·²ç”¨ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc<br> -gcnew</td>
</tr>
<tr>
<td>OC</td>
<td>è¾“å‡ºè€å¹´ä»£ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc <br>-gccapacity <br>-gcold <br>-gcoldcapacity</td>
</tr>
<tr>
<td>OU</td>
<td>è¾“å‡ºè€å¹´ä»£å·²ç”¨ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc <br>-gcold</td>
</tr>
<tr>
<td>PC</td>
<td>è¾“å‡ºæŒä¹…ä»£ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc <br>-gccapacity <br>-gcold <br>-gcoldcapacity <br>-gcpermcapacity</td>
</tr>
<tr>
<td>PU</td>
<td>è¾“å‡ºæŒä¹…ä»£å·²ç”¨ç©ºé—´çš„å¤§å°ã€‚å•ä½KBã€‚</td>
<td>-gc <br>-gcold</td>
</tr>
<tr>
<td>YGC</td>
<td>æ–°ç”Ÿä»£ç©ºé—´GCæ—¶é—´å‘ç”Ÿçš„æ¬¡æ•°</td>
<td>-gc <br>-gccapacity <br>-gcnew <br>-gcnewcapacity <br>-gcold <br>-gcoldcapacity <br>-gcpermcapacity <br>-gcutil <br>-gccause</td>
</tr>
<tr>
<td>YGCT</td>
<td>æ–°ç”Ÿä»£GCå¤„ç†èŠ±è´¹çš„æ—¶é—´ã€‚</td>
<td><br>-gc <br>-gcnew <br>-gcutil <br>-gccause</td>
</tr>
<tr>
<td>FGC</td>
<td>full GCå‘ç”Ÿçš„æ¬¡æ•°ã€‚</td>
<td>-gc <br>-gccapacity <br>-gcnew <br>-gcnewcapacity <br>-gcold <br>-gcoldcapacity <br>-gcpermcapacity <br>-gcutil <br>-gccause</td>
</tr>
<tr>
<td>FGCT</td>
<td>full GCæ“ä½œèŠ±è´¹çš„æ—¶é—´</td>
<td>-gc <br>-gcold <br>-gcoldcapacity <br>-gcpermcapacity <br>-gcutil <br>-gccause</td>
</tr>
<tr>
<td>GCT</td>
<td>GCæ“ä½œèŠ±è´¹çš„æ€»æ—¶é—´ã€‚</td>
<td>-gc <br>-gcold <br>-gcoldcapacity <br>-gcpermcapacity <br>-gcutil <br>-gccause</td>
</tr>
<tr>
<td>NGCMN</td>
<td>æ–°ç”Ÿä»£æœ€å°ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcnewcapacity</td>
</tr>
<tr>
<td>NGCMX</td>
<td>æ–°ç”Ÿä»£æœ€å¤§ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcnewcapacity</td>
</tr>
<tr>
<td>NGC</td>
<td>æ–°ç”Ÿä»£å½“å‰ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcnewcapacity</td>
</tr>
<tr>
<td>OGCMN</td>
<td>è€å¹´ä»£æœ€å°ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcoldcapacity</td>
</tr>
<tr>
<td>OGCMX</td>
<td>è€å¹´ä»£æœ€å¤§ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcoldcapacity</td>
</tr>
<tr>
<td>OGC</td>
<td>è€å¹´ä»£å½“å‰ç©ºé—´å®¹é‡åˆ¶ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcoldcapacity</td>
</tr>
<tr>
<td>PGCMN</td>
<td>æŒä¹…ä»£æœ€å°ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcpermcapacity</td>
</tr>
<tr>
<td>PGCMX</td>
<td>æŒä¹…ä»£æœ€å¤§ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcpermcapacity</td>
</tr>
<tr>
<td>PGC</td>
<td>æŒä¹…ä»£å½“å‰ç©ºé—´å®¹é‡ï¼Œå•ä½KB</td>
<td>-gccapacity <br>-gcpermcapacity</td>
</tr>
<tr>
<td>PC</td>
<td>æŒä¹…ä»£å½“å‰ç©ºé—´å¤§å°ï¼Œå•ä½KB</td>
<td>-gccapacity<br>-gcpermcapacity</td>
</tr>
</tbody>
</table>
<p>PU  æŒä¹…ä»£å½“å‰å·²ç”¨ç©ºé—´å¤§å°ï¼Œå•ä½KB|    -gc<br>-gcold|<br>|LGCC    |æœ€åä¸€æ¬¡GCå‘ç”Ÿçš„åŸå›  |-gccause|<br>|GCC |å½“å‰GCå‘ç”Ÿçš„åŸå› |   -gccause|<br>|TT  |è€å¹´åŒ–é˜ˆå€¼ã€‚è¢«ç§»åŠ¨åˆ°è€å¹´ä»£ä¹‹å‰ï¼Œåœ¨æ–°ç”Ÿä»£ç©ºå­˜æ´»çš„æ¬¡æ•°ã€‚ |-gcnew|<br>|MTT |æœ€å¤§è€å¹´åŒ–é˜ˆå€¼ã€‚è¢«ç§»åŠ¨åˆ°è€å¹´ä»£ä¹‹å‰ï¼Œåœ¨æ–°ç”Ÿä»£ç©ºå­˜æ´»çš„æ¬¡æ•°ã€‚|   -gcnew|<br>|DSS |å¹¸å­˜è€…åŒºæ‰€éœ€ç©ºé—´å¤§å°ï¼Œå•ä½KB|    -gcnew|</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/03/08/JVM-note-8/" data-id="cj03kfo3b003suruqk67z4f2n" class="article-share-link" data-share="baidu" data-title="è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/03/08/JVM-note-8/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/">JVM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-thinking-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/25/thinking-1/" class="article-date">
  <time datetime="2017-02-25T14:32:05.000Z" itemprop="datePublished">2017-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/25/thinking-1/">ä¸€äº›æƒ³æ³•</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h2 id="u9700_u6C42"><a href="#u9700_u6C42" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>é€šè¿‡è¯æ ¹è¯ç¼€è®°å•è¯ï¼Œå’Œæ‰‡è´å•è¯ä¸€æ ·çš„ä¸œè¥¿ã€‚<br>æ‰‡è´é‡Œé¢çš„è¯æ ¹éœ€è¦èŠ±é’±ä¹°ï¼Œæ‰‡è´çš„åšæ³•ï¼šåœ¨è®°å•è¯çš„æ—¶å€™ï¼Œæ˜¾ç¤ºè¯¥å•è¯çš„è¯æ ¹è¯ç¼€è¿›è¡Œè®°å¿†å•è¯ã€‚è¿™é‡Œä¹Ÿä¿ç•™è¿™ç§æ–¹å¼ï¼Œå¹¶èƒ½å¤Ÿæä¾›é€šè¿‡åˆ†æè®°å¿†è¯æ ¹æ¥è®°å¿†å¤šä¸ªå•è¯çš„è¿™ç§æ–¹å¼ï¼ˆä¸»è¦åŠŸèƒ½ï¼Œä¼˜å…ˆæä¾›ï¼Œå‚è€ƒã€Šè‹±è¯­è¯æ±‡çš„å¥¥ç§˜ã€‹ã€‚</p>
<h2 id="u5927_u6982_u60F3_u8981_u7684_u4E1C_u897F_u63CF_u8FF0"><a href="#u5927_u6982_u60F3_u8981_u7684_u4E1C_u897F_u63CF_u8FF0" class="headerlink" title="å¤§æ¦‚æƒ³è¦çš„ä¸œè¥¿æè¿°"></a>å¤§æ¦‚æƒ³è¦çš„ä¸œè¥¿æè¿°</h2><h3 id="u540E_u7AEF"><a href="#u540E_u7AEF" class="headerlink" title="åç«¯"></a>åç«¯</h3><ol>
<li>ç”¨æˆ·ç®¡ç†ï¼šç™»å½•</li>
<li>å•è¯ç®¡ç†<br> ç”¨æˆ·åˆ›å»ºå•è¯ä¹¦ï¼Œåˆ›å»ºç« èŠ‚ï¼Œåœ¨ç« èŠ‚ä¸­è¾“å…¥è¯æ ¹å†…å®¹</li>
<li>ç³»ç»Ÿè®¾ç½®ï¼šè®¾ç½®æ¯å¤©è®°å¿†çš„å•è¯é‡ï¼Œæ¯ä¸ªå•è¯æ¯å¤©è®°å¿†è¿‡ç¨‹æ˜¾ç¤ºæ¬¡æ•°ï¼ˆé»˜è®¤5æ¬¡ï¼‰</li>
</ol>
<h3 id="u524D_u7AEF"><a href="#u524D_u7AEF" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ol>
<li>å‰ç«¯æä¾›ç½‘é¡µï¼ˆå¼€å§‹æµè§ˆå™¨ï¼Œæœ€å¥½APPï¼‰è®°è¯æ ¹åŠå•è¯<ul>
<li>æ ¹æ®è®¾ç½®çš„ä»»åŠ¡é‡ï¼Œéšæœºé€‰å‡ºæ–°çš„å•è¯ä¾›è®°å¿†</li>
<li>å•è¯å¯å‘éŸ³ï¼ˆè‹±è¯­ï¼Œç¾è¯­ï¼‰</li>
<li>æ˜¾ç¤ºå•è¯æ³¨é‡Š </li>
<li>è®¤è¯†/ä¸è®¤è¯† é€‰æ‹©</li>
<li>è®°å½•å•è¯ç†Ÿæ‚‰ç¨‹åº¦ï¼Œ5ä¸ªç­‰çº§ï¼Œ5çº§ä»¥åå°±ä¸åœ¨æ˜¾ç¤ºåœ¨å½“å¤©çš„ä»»åŠ¡é‡Œ</li>
</ul>
</li>
</ol>
<h2 id="u6280_u672F_u6846_u67B6"><a href="#u6280_u672F_u6846_u67B6" class="headerlink" title="æŠ€æœ¯æ¡†æ¶"></a>æŠ€æœ¯æ¡†æ¶</h2><p>å‰ç«¯ï¼šnodejs + react + webpack<br>åç«¯ï¼šspringboot + mysql + Elasticsearch</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/02/25/thinking-1/" data-id="cj03kfo10000furuqy6du21pm" class="article-share-link" data-share="baidu" data-title="ä¸€äº›æƒ³æ³•">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/02/25/thinking-1/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-JVM-note-7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/21/JVM-note-7/" class="article-date">
  <time datetime="2017-02-21T02:31:45.000Z" itemprop="datePublished">2017-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/21/JVM-note-7/">åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>å¯¹è±¡çš„å†…å­˜åˆ†é…ï¼Œå¾€å¤§æ–¹å‘è®²ï¼Œå°±æ˜¯åœ¨å †ä¸Šåˆ†é…ï¼ˆä¹Ÿå¯èƒ½ç»è¿‡JITç¼–è¯‘åè¢«æ‹†æ•£ä¸ºæ ‡é‡ç±»å‹å¹¶é—´æ¥çš„åœ¨æ ˆä¸Šåˆ†é…ï¼‰ï¼Œå¯¹è±¡ä¸»è¦åˆ†é…åœ¨æ–°ç”Ÿä»£çš„EdenåŒºä¸Šï¼Œå¦‚æœå¯åŠ¨äº†æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼Œå°†æŒ‰çº¿ç¨‹ä¼˜å…ˆåœ¨TLABä¸Šåˆ†é…ã€‚å°‘æ•°æƒ…å†µä¸‹åˆ†é…åœ¨è€ç”Ÿä»£ä¸Šï¼Œåˆ†é…çš„è§„åˆ™å¹¶ä¸æ˜¯ç™¾åˆ†ç™¾å›ºå®šçš„ï¼Œå…¶ç»†èŠ‚å–å†³äºå½“å‰ä½¿ç”¨çš„å“ªç§åƒåœ¾æ”¶é›†å™¨ç»„åˆï¼Œè¿˜æœ‰è™šæ‹Ÿæœºå†…å­˜ç›¸å…³å‚æ•°çš„è®¾ç½®ã€‚</p>
<h2 id="u5BF9_u8C61_u4F18_u5148_u5728Eden_u533A_u5206_u914D"><a href="#u5BF9_u8C61_u4F18_u5148_u5728Eden_u533A_u5206_u914D" class="headerlink" title="å¯¹è±¡ä¼˜å…ˆåœ¨EdenåŒºåˆ†é…"></a>å¯¹è±¡ä¼˜å…ˆåœ¨EdenåŒºåˆ†é…</h2><p>ä¸Šä¸€ç¯‡åƒåœ¾æ”¶é›†å™¨çš„GCç¤ºä¾‹å·²ç»æŠŠå„ä¸ªæ”¶é›†å™¨çš„å†…å­˜åˆ†é…æµ‹è¯•åšäº†ä¸€éï¼Œå¯ä»¥å›é¡¾ä¸Šç¯‡å†…å®¹ã€‚</p>
<h2 id="u5927_u5BF9_u8C61_u76F4_u63A5_u8FDB_u5165_u8001_u5E74_u4EE3"><a href="#u5927_u5BF9_u8C61_u76F4_u63A5_u8FDB_u5165_u8001_u5E74_u4EE3" class="headerlink" title="å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£"></a>å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£</h2><h2 id="u957F_u671F_u5B58_u6D3B_u7684_u5BF9_u8C61_u5C06_u8FDB_u5165_u8001_u5E74_u4EE3"><a href="#u957F_u671F_u5B58_u6D3B_u7684_u5BF9_u8C61_u5C06_u8FDB_u5165_u8001_u5E74_u4EE3" class="headerlink" title="é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£"></a>é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£</h2><h2 id="u52A8_u6001_u5BF9_u8C61_u5E74_u9F84_u5224_u5B9A"><a href="#u52A8_u6001_u5BF9_u8C61_u5E74_u9F84_u5224_u5B9A" class="headerlink" title="åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š"></a>åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š</h2><h2 id="u7A7A_u95F4_u5206_u914D_u62C5_u4FDD"><a href="#u7A7A_u95F4_u5206_u914D_u62C5_u4FDD" class="headerlink" title="ç©ºé—´åˆ†é…æ‹…ä¿"></a>ç©ºé—´åˆ†é…æ‹…ä¿</h2>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/02/21/JVM-note-7/" data-id="cj03kfo3d003vuruqzwi9fg25" class="article-share-link" data-share="baidu" data-title="åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/02/21/JVM-note-7/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/">JVM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JVM-note-6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/19/JVM-note-6/" class="article-date">
  <time datetime="2017-02-19T01:37:38.000Z" itemprop="datePublished">2017-02-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/19/JVM-note-6/">åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”åƒåœ¾æ”¶é›†å™¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸºäºJDK1.7 Update 14ä¹‹åçš„HotSpotè™šæ‹Ÿæœºçš„åƒåœ¾æ”¶é›†å™¨ã€‚</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-gc.png" alt=""></p>
<p>ä¸¤ä¸ªæ”¶é›†å™¨ä¹‹é—´æœ‰è¿çº¿ï¼Œè¯´æ˜ä»–ä»¬å¯ä»¥æ­é…ä½¿ç”¨ã€‚æ”¶é›†å™¨æ‰€å¤„çš„åŒºåŸŸï¼Œåˆ™è¡¨ç¤ºä»–æ˜¯å±äºæ–°ç”Ÿä»£æ”¶é›†å™¨è¿˜æ˜¯è€ç”Ÿä»£æ”¶é›†å™¨ã€‚</p>
<h2 id="Serial_u6536_u96C6_u5668"><a href="#Serial_u6536_u96C6_u5668" class="headerlink" title="Serialæ”¶é›†å™¨"></a>Serialæ”¶é›†å™¨</h2><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-serial.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-serial-1.png" alt="Serial / Serial Oldæ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾"></p>
<p><strong>æ–°ç”Ÿä»£æ”¶é›†ï¼ˆMinor GCï¼‰</strong></p>
<p>ä¸‹é¢ä»£ç å°è¯•åˆ†é…3ä¸ª2MBå¤§å°å’Œ1ä¸ª4MBå¤§å°çš„å¯¹è±¡</p>
<ul>
<li>è¿è¡Œé€šè¿‡<strong>-Xms20M</strong>ï¼ˆå †åˆå§‹å¤§å°ï¼‰ã€<strong>-Xmx20M</strong>ï¼ˆå †æœ€å¤§å€¼ï¼‰ã€<strong>-Xmn10M</strong>ï¼ˆæ–°ç”Ÿä»£å€¼ï¼‰è¿™3ä¸ªå‚æ•°é™åˆ¶äº†Javaå †å¤§å°ä¸º20MBï¼Œä¸å¯æ‰©å±•ï¼Œå…¶ä¸­10MBåˆ†é…ç»™æ–°ç”Ÿä»£ï¼Œå‰©ä¸‹çš„10MBåˆ†é…ç»™è€å¹´ä»£</li>
<li><strong>-XX:SurvivorRatio=8</strong> å†³å®šäº†æ–°ç”Ÿä»£ä¸­EdenåŒºä¸ä¸€ä¸ªSurvivoråŒºçš„ç©ºé—´æ¯”ä¾‹ä¸º 8:1</li>
<li><strong>æ–°ç”Ÿä»£æ€»å¯ç”¨ç©ºé—´ï¼š9216KBï¼ˆEdenåŒº+1ä¸ªSurvivoråŒºçš„æ€»å®¹é‡ï¼‰</strong></li>
<li><strong>-XX:+PrintGCDetail</strong>ï¼Œåœ¨å‘ç”Ÿåƒåœ¾æ”¶é›†æ—¶æ‰“å°å†…å­˜å›æ”¶æ—¥å¿—</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * MinorGC</span><br><span class="line"> * VM Args: -XX:+UseSerialGC -Xms20M -Xmx20M -Xmn10M -XX:+PrintGCDetails -XX:SurvivorRatio=8</span><br><span class="line"> * Created by larry.su on 2017/2/21.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MinorGC</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> _1M = <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] allocation1,allocation2,allocation3,allocation4;</span><br><span class="line">        allocation1 = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span> * _1M];</span><br><span class="line">        allocation2 = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span> * _1M];</span><br><span class="line">        allocation3 = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span> * _1M];</span><br><span class="line">        allocation4 = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4</span> * _1M]; <span class="comment">//å‡ºç°ä¸€æ¬¡MinorGC</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>mainæ–¹æ³•æ‰§è¡Œåï¼Œåœ¨åˆ†é…allocation4å¯¹è±¡æ—¶ï¼Œå‘ç”Ÿä¸€æ¬¡Minor GCï¼Œè¿™æ¬¡GCçš„ç»“æœæ˜¯æ–°ç”Ÿä»£7814Kå˜ä¸º423Kï¼Œè€Œæ€»å†…å­˜å ç”¨é‡ï¼ˆ7814K-&gt;6567K(19456K)ï¼‰å‡ ä¹æ²¡æœ‰å‡å°‘ï¼ˆå› ä¸ºallocation1ã€allocation2ã€allocation3ä¸‰ä¸ªå¯¹è±¡éƒ½æ˜¯å­˜æ´»çš„ï¼Œè™šæ‹Ÿæœºå‡ ä¹æ²¡æœ‰æ‰¾åˆ°å¯å›æ”¶çš„å¯¹è±¡ï¼‰ã€‚</p>
</li>
<li><p>è¿™æ¬¡GCçš„åŸå› æ˜¯ç»™allocation4åˆ†é…æ‰€éœ€çš„4MBå†…å­˜çš„æ—¶å€™ï¼Œå‘ç°Edenå·²ç»è¢«å ç”¨äº†6MBï¼Œå‰©ä½™ç©ºé—´å·²ä¸è¶³åˆ†é…allocation4å¯¹è±¡æ‰€éœ€çš„4MBï¼Œå› æ­¤å‘ç”ŸMinor GCã€‚</p>
</li>
<li><p>GCæœŸé—´è™šæ‹Ÿæœºåˆå‘ç°å·²æœ‰çš„3ä¸ª2MBçš„å¯¹è±¡æ— æ³•å…¨éƒ¨æ”¾å…¥Survivorç©ºé—´ï¼ˆSurvivorç©ºé—´åªæœ‰1MBå¤§å°ï¼‰ï¼Œæ‰€ä»¥åªå¥½é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶æå‰è½¬ç§»åˆ°è€å¹´ä»£å»ã€‚</p>
</li>
<li><p>è¿™æ¬¡GCç»“æŸåï¼Œ4MBçš„allocation4å¯¹è±¡é¡ºåˆ©åˆ†é…åœ¨Edenä¸­ï¼Œå› æ­¤ç¨‹åºæ‰§è¡Œå®Œæˆçš„ç»“æœæ˜¯Edenå ç”¨4MBï¼ŒServivorç©ºé—²ï¼Œè€å¹´ä»£è¢«å ç”¨6MBã€‚</p>
</li>
</ol>
<p>JDK1.6ä½¿ç”¨Serialæ”¶é›†å™¨çš„GCæ—¥å¿—ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="constant">GC</span> (<span class="constant">Allocation</span> <span class="constant">Failure</span>) [<span class="constant">DefNew</span><span class="symbol">:</span> <span class="number">7814</span>K-&gt;<span class="number">423</span>K(<span class="number">9216</span>K), <span class="number">0</span>.<span class="number">0051201</span> secs] <span class="number">7814</span>K-&gt;<span class="number">6567</span>K(<span class="number">19456</span>K), <span class="number">0</span>.<span class="number">00513</span>87 secs] [<span class="constant">Times</span><span class="symbol">:</span> user=<span class="number">0</span>.<span class="number">00</span> sys=<span class="number">0</span>.<span class="number">00</span>, real=<span class="number">0</span>.<span class="number">00</span> secs]</span><br><span class="line">        <span class="constant">Heap</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">new</span> <span class="title">generation</span>   <span class="title">total</span> 9216<span class="title">K</span>, <span class="title">used</span> 4656<span class="title">K</span> [0<span class="title">x00000007bec00000</span>, 0<span class="title">x00000007bf600000</span>, 0<span class="title">x00000007bf600000</span>)</span></span><br><span class="line">        eden space <span class="number">8192</span>K,  <span class="number">51</span>% used [<span class="number">0x00000007bec00000</span>, <span class="number">0x00000007bf022408</span>, <span class="number">0x00000007bf400000</span>)</span><br><span class="line">        from space <span class="number">1024</span>K,  <span class="number">41</span>% used [<span class="number">0x00000007bf500000</span>, <span class="number">0x00000007bf569ca8</span>, <span class="number">0x00000007bf600000</span>)</span><br><span class="line">        to   space <span class="number">1024</span>K,   <span class="number">0</span>% used [<span class="number">0x00000007bf400000</span>, <span class="number">0x00000007bf400000</span>, <span class="number">0x00000007bf500000</span>)</span><br><span class="line">        tenured generation   total <span class="number">10240</span>K, used <span class="number">6144</span>K [<span class="number">0x00000007bf600000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">        the space <span class="number">10240</span>K,  <span class="number">60</span>% used [<span class="number">0x00000007bf600000</span>, <span class="number">0x00000007bfc00030</span>, <span class="number">0x00000007bfc00200</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">        <span class="constant">Metaspace</span>       used <span class="number">2917</span>K, capacity <span class="number">4494</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 318<span class="title">K</span>, <span class="title">capacity</span> 386<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure>
<h2 id="ParNew_u6536_u96C6_u5668"><a href="#ParNew_u6536_u96C6_u5668" class="headerlink" title="ParNewæ”¶é›†å™¨"></a>ParNewæ”¶é›†å™¨</h2><p>ParNewæ”¶é›†å™¨å…¶å®å°±æ˜¯Serialæ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šæ¡çº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-parnew.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-parnew-1.png" alt="ParNew / Serial Oldæ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾"></p>
<p>MinorGCç¤ºä¾‹ä½¿ç”¨ParNewæ”¶é›†å™¨çš„GCæ—¥å¿—ï¼š</p>
<p>JDK8è™šæ‹Ÿæœºå‚æ•°ï¼š</p>
<ul>
<li>-Xms20M</li>
<li>-Xmx20M</li>
<li>-Xmn10M</li>
<li>-XX:+PrintGCDetails</li>
<li><strong>-XX:+UseParNewGC</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="constant">GC</span> (<span class="constant">Allocation</span> <span class="constant">Failure</span>) [<span class="constant">ParNew</span><span class="symbol">:</span> <span class="number">7814</span>K-&gt;<span class="number">467</span>K(<span class="number">9216</span>K), <span class="number">0</span>.<span class="number">0056367</span> secs] <span class="number">7814</span>K-&gt;<span class="number">6611</span>K(<span class="number">19456</span>K), <span class="number">0</span>.<span class="number">00565</span>88 secs] [<span class="constant">Times</span><span class="symbol">:</span> user=<span class="number">0</span>.<span class="number">01</span> sys=<span class="number">0</span>.<span class="number">00</span>, real=<span class="number">0</span>.<span class="number">00</span> secs]</span><br><span class="line">        <span class="constant">Heap</span></span><br><span class="line">        par new generation   total <span class="number">9216</span>K, used <span class="number">4700</span>K [<span class="number">0x00000007bec00000</span>, <span class="number">0x00000007bf600000</span>, <span class="number">0x00000007bf600000</span>)</span><br><span class="line">        eden space <span class="number">8192</span>K,  <span class="number">51</span>% used [<span class="number">0x00000007bec00000</span>, <span class="number">0x00000007bf022408</span>, <span class="number">0x00000007bf400000</span>)</span><br><span class="line">        from space <span class="number">1024</span>K,  <span class="number">45</span>% used [<span class="number">0x00000007bf500000</span>, <span class="number">0x00000007bf574ed8</span>, <span class="number">0x00000007bf600000</span>)</span><br><span class="line">        to   space <span class="number">1024</span>K,   <span class="number">0</span>% used [<span class="number">0x00000007bf400000</span>, <span class="number">0x00000007bf400000</span>, <span class="number">0x00000007bf500000</span>)</span><br><span class="line">        tenured generation   total <span class="number">10240</span>K, used <span class="number">6144</span>K [<span class="number">0x00000007bf600000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">        the space <span class="number">10240</span>K,  <span class="number">60</span>% used [<span class="number">0x00000007bf600000</span>, <span class="number">0x00000007bfc00030</span>, <span class="number">0x00000007bfc00200</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">        <span class="constant">Metaspace</span>       used <span class="number">2946</span>K, capacity <span class="number">4494</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 319<span class="title">K</span>, <span class="title">capacity</span> 386<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure>
<p>åé¢è¿˜ä¼šæ¥è§¦å‡ æ¬¾å¹¶è¡Œå’Œå¹¶å‘çš„æ”¶é›†å™¨ã€‚åœ¨è°ˆåƒåœ¾æ”¶é›†çš„ä¸Šä¸‹æ–‡è¯­å¢ƒä¸‹ï¼Œå¯ä»¥è§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å¹¶è¡Œï¼ˆParallelï¼‰</strong>ï¼šæŒ‡å¤šæ¡åƒåœ¾æ”¶é›†çº¿ç¨‹å¹¶è¡Œå·¥ä½œï¼Œä½†æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹ä»ç„¶å¤„äºç­‰å¾…çŠ¶æ€</li>
<li><strong>å¹¶å‘ï¼ˆConcurrentï¼‰</strong>ï¼šæŒ‡ç”¨æˆ·çº¿ç¨‹ä¸åƒåœ¾æ”¶é›†çº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼ˆä½†ä¸ä¸€å®šæ˜¯å¹¶è¡Œçš„ï¼Œå¯èƒ½ä¼šäº¤æ›¿æ‰§è¡Œï¼‰ï¼Œç”¨æˆ·ç¨‹åºåœ¨ç»§ç»­è¿è¡Œï¼Œè€Œåƒåœ¾æ”¶é›†ç¨‹åºè¿è¡Œåœ¨å¦ä¸€ä¸ªcpuä¸Š</li>
</ul>
<h2 id="Parallel_Scavenge_u6536_u96C6_u5668"><a href="#Parallel_Scavenge_u6536_u96C6_u5668" class="headerlink" title="Parallel Scavengeæ”¶é›†å™¨"></a>Parallel Scavengeæ”¶é›†å™¨</h2><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-parallel-scavenge.png" alt=""></p>
<h2 id="Serial_Old_u6536_u96C6_u5668"><a href="#Serial_Old_u6536_u96C6_u5668" class="headerlink" title="Serial Oldæ”¶é›†å™¨"></a>Serial Oldæ”¶é›†å™¨</h2><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-serial-old.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-serial-1.png" alt="Serial / Serial Oldæ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾"></p>
<h2 id="Parallel_Old_u6536_u96C6_u5668"><a href="#Parallel_Old_u6536_u96C6_u5668" class="headerlink" title="Parallel Oldæ”¶é›†å™¨"></a>Parallel Oldæ”¶é›†å™¨</h2><p>Parallel Oldæ”¶é›†å™¨æ˜¯Parallel Scavengeæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å’Œæ ‡è®°-æ•´ç†ç®—æ³•ã€‚</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-parallel-old.png" alt=""></p>
<p>MinorGCç¤ºä¾‹ä½¿ç”¨Parallel Scavenge + Parallel Oldæ”¶é›†å™¨çš„GCæ—¥å¿—ï¼š</p>
<p>JDK8è™šæ‹Ÿæœºå‚æ•°ï¼š</p>
<ul>
<li>-Xms20M</li>
<li>-Xmx20M</li>
<li>-Xmn10M</li>
<li>-XX:+PrintGCDetails</li>
<li><strong>-XX:+UseParallelOldGC</strong></li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="constant">Heap</span></span><br><span class="line">        <span class="constant">PSYoungGen</span>      total <span class="number">9216</span>K, used <span class="number">7979</span>K [<span class="number">0x00000007bf600000</span>, <span class="number">0x00000007c0000000</span>, <span class="number">0x00000007c0000000</span>)</span><br><span class="line">        eden space <span class="number">8192</span>K, <span class="number">97</span>% used [<span class="number">0x00000007bf600000</span>,<span class="number">0x00000007bfdcac90</span>,<span class="number">0x00000007bfe00000</span>)</span><br><span class="line">        from space <span class="number">1024</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007bff00000</span>,<span class="number">0x00000007c0000000</span>)</span><br><span class="line">        to   space <span class="number">1024</span>K, <span class="number">0</span>% used [<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007bfe00000</span>,<span class="number">0x00000007bff00000</span>)</span><br><span class="line">        <span class="constant">ParOldGen</span>       total <span class="number">10240</span>K, used <span class="number">4096</span>K [<span class="number">0x00000007bec00000</span>, <span class="number">0x00000007bf600000</span>, <span class="number">0x00000007bf600000</span>)</span><br><span class="line">        object space <span class="number">10240</span>K, <span class="number">40</span>% used [<span class="number">0x00000007bec00000</span>,<span class="number">0x00000007bf000010</span>,<span class="number">0x00000007bf600000</span>)</span><br><span class="line">        <span class="constant">Metaspace</span>       used <span class="number">2967</span>K, capacity <span class="number">4494</span>K, committed <span class="number">4864</span>K, reserved <span class="number">1056768</span>K</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">space</span>    <span class="title">used</span> 322<span class="title">K</span>, <span class="title">capacity</span> 386<span class="title">K</span>, <span class="title">committed</span> 512<span class="title">K</span>, <span class="title">reserved</span> 1048576<span class="title">K</span></span></span><br></pre></td></tr></table></figure>
<p>ã€ParOldGen       total 10240K, used 4096Kã€çœ‹å‡ºallocation4ç›´æ¥è¢«åˆ†é…åˆ°è€å¹´ä»£ä¸­ã€‚</p>
<h2 id="CMS_u6536_u96C6_u5668"><a href="#CMS_u6536_u96C6_u5668" class="headerlink" title="CMSæ”¶é›†å™¨"></a>CMSæ”¶é›†å™¨</h2><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-cms-2.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-cms-1.png" alt="Concurrent Mark Sweep æ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾"></p>
<p>MinorGCç¤ºä¾‹ä½¿ç”¨ParNew + CMS + Serial Old(åå¤‡)æ”¶é›†å™¨çš„GCæ—¥å¿—ï¼š</p>
<p>JDK8è™šæ‹Ÿæœºå‚æ•°ï¼š</p>
<ul>
<li>-Xms20M</li>
<li>-Xmx20M</li>
<li>-Xmn10M</li>
<li>-XX:+PrintGCDetails</li>
<li><strong>-XX:+UseConcMarkSweepGC</strong></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[GC (Allocation Failure) [ParNew: 8144K-&gt;455K(9216K), 0.0054356 secs] 8144K-&gt;6601K(19456K), 0.0054911 secs] [Times: user=0.03 sys=0.00, real=0.00 secs] </span><br><span class="line">[GC (CMS Initial Mark) [1 CMS-initial-mark: 6146K(10240K)] 10697K(19456K), 0.0002332 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[CMS-concurrent-mark-start]</span><br><span class="line">[CMS-concurrent-mark: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[CMS-concurrent-preclean-start]</span><br><span class="line">[CMS-concurrent-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[CMS-concurrent-abortable-preclean-start]</span><br><span class="line">[CMS-concurrent-abortable-preclean: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[GC (CMS Final Remark) [YG occupancy: 4551 K (9216 K)][Rescan (parallel) , 0.0002916 secs][weak refs processing, 0.0000330 secs][class unloading, 0.0001571 secs][scrub symbol table, 0.0003754 secs][scrub string table, 0.0001245 secs][1 CMS-remark: 6146K(10240K)] 10697K(19456K), 0.0010223 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[CMS-concurrent-sweep-start]</span><br><span class="line">[CMS-concurrent-sweep: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">[CMS-concurrent-reset-start]</span><br><span class="line">[CMS-concurrent-reset: 0.000/0.000 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span><br><span class="line">Heap</span><br><span class="line"> par new generation   total 9216K, used 4634K [0x00000007bec00000, 0x00000007bf600000, 0x00000007bf600000)</span><br><span class="line">  eden space 8192K,  51% used [0x00000007bec00000, 0x00000007bf014930, 0x00000007bf400000)</span><br><span class="line">  from space 1024K,  44% used [0x00000007bf500000, 0x00000007bf571f58, 0x00000007bf600000)</span><br><span class="line">  to   space 1024K,   0% used [0x00000007bf400000, 0x00000007bf400000, 0x00000007bf500000)</span><br><span class="line"> concurrent mark-sweep generation total 10240K, used 6146K [0x00000007bf600000, 0x00000007c0000000, 0x00000007c0000000)</span><br><span class="line"> Metaspace       used 2811K, capacity 4490K, committed 4864K, reserved 1056768K</span><br><span class="line">  class space    used 305K, capacity 386K, committed 512K, reserved 1048576K</span><br></pre></td></tr></table></figure>
<p>æ–°ç”Ÿä»£ä½¿ç”¨çš„ParNewæ”¶é›†å™¨ï¼Œallocation4åˆ†é…æ—¶æ–°ç”Ÿä»£å·²æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´åˆ†é…ã€‚Survivioråªæœ‰1Mä¸èƒ½å¤Ÿå­˜æ”¾allocation1ï¼Œ2ï¼Œ3ä¸‰ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸‰ä¸ªå¯¹è±¡ä¼šå¤åˆ¶åˆ°concurrent mark-sweep generation ä¸­ã€‚æœ€ç»ˆallocation4åˆ†é…åˆ°par new generationä¸­ã€‚</p>
<p>ä»GCæ—¥å¿—å¯ä»¥çœ‹å‡ºè€å¹´ä»£GCçš„æ­¥éª¤ï¼šCMS-initial-mark -&gt; CMS-concurrent-mark -&gt; CMS-remark -&gt; CMS-concurrent-sweep -&gt; CMS-concurrent-reset(é‡ç½®çŠ¶æ€ç­‰å¾…ä¸‹ä¸€æ¬¡è§¦å‘GC)</p>
<h2 id="G1_u6536_u96C6_u5668"><a href="#G1_u6536_u96C6_u5668" class="headerlink" title="G1æ”¶é›†å™¨"></a>G1æ”¶é›†å™¨</h2><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-g1.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-g1-1.png" alt="G1æ”¶é›†å™¨è¿è¡Œç¤ºæ„å›¾"></p>
<h2 id="u5783_u573E_u6536_u96C6_u5668_u53C2_u6570_u603B_u7ED3"><a href="#u5783_u573E_u6536_u96C6_u5668_u53C2_u6570_u603B_u7ED3" class="headerlink" title="åƒåœ¾æ”¶é›†å™¨å‚æ•°æ€»ç»“"></a>åƒåœ¾æ”¶é›†å™¨å‚æ•°æ€»ç»“</h2><p>åƒåœ¾æ”¶é›†ç›¸å…³çš„å¸¸ç”¨å‚æ•°ï¼š</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th style="text-align:center">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>UseSerialGC</td>
<td style="text-align:center">è™šæ‹Ÿæœºè¿è¡Œåœ¨Clientæ¨¡å¼ä¸‹çš„é»˜è®¤å€¼ï¼Œæ‰“å¼€æ­¤å¼€å…³åï¼Œä½¿ç”¨ <strong>Serial + Serial Old</strong>çš„æ”¶é›†å™¨ç»„åˆè¿›è¡Œå†…å­˜å›æ”¶</td>
</tr>
<tr>
<td>UseParNewGC</td>
<td style="text-align:center">æ‰“å¼€æ­¤å¼€å…³åï¼Œä½¿ç”¨<strong>ParNew + Serial Old</strong>çš„æ”¶é›†å™¨ç»„åˆè¿›è¡Œå†…å­˜å›æ”¶</td>
</tr>
<tr>
<td>UseConcMarkSweepGC</td>
<td style="text-align:center">æ‰“å¼€æ­¤å¼€å…³åï¼Œä½¿ç”¨<strong>ParNew + CMS + Serial Old</strong>çš„æ”¶é›†å™¨ç»„åˆè¿›è¡Œå†…å­˜å›æ”¶ã€‚Serial Oldä½œä¸ºCMSå‡ºç°Concurrent Mode Failureå¤±è´¥åçš„åå¤‡æ”¶é›†å™¨ä½¿ç”¨</td>
</tr>
<tr>
<td>UseParallelGC</td>
<td style="text-align:center">è™šæ‹Ÿæœºè¿è¡Œåœ¨Serveræ¨¡å¼ä¸‹çš„é»˜è®¤å€¼ï¼Œæ‰“å¼€æ­¤å¼€å…³åï¼Œä½¿ç”¨<strong>Parallel Scanvenge + Serial Old</strong> (PS MarkSweep)çš„æ”¶é›†å™¨ç»„åˆè¿›è¡Œå†…å­˜å›æ”¶</td>
</tr>
<tr>
<td>UseParallelOldGC</td>
<td style="text-align:center">æ‰“å¼€æ­¤å¼€å…³åï¼Œä½¿ç”¨ <strong>Parallel Scavenge + Parallel Old</strong>çš„æ”¶é›†å™¨ç»„åˆè¿›è¡Œå†…å­˜å›æ”¶</td>
</tr>
<tr>
<td>SurvivorRatio</td>
<td style="text-align:center">æ–°ç”Ÿä»£ä¸­EdenåŒºåŸŸä¸SurvivoråŒºåŸŸçš„å®¹é‡æ¯”å€¼ï¼Œ<strong>é»˜è®¤ä¸º8</strong>ï¼Œä»£è¡¨<strong>Eden:Survivor = 8:1</strong></td>
</tr>
<tr>
<td>PretenureSizeThreshold</td>
<td style="text-align:center"><strong>ç›´æ¥æ™‹çº§åˆ°è€å¹´ä»£çš„å¯¹è±¡å¤§å°</strong>ï¼Œè®¾ç½®åï¼Œå¤§äºè¿™ä¸ªå‚æ•°çš„å¯¹è±¡å°†ç›´æ¥åœ¨è€å¹´ä»£ä¸­åˆ†é…</td>
</tr>
<tr>
<td>MaxTenuringThreshold</td>
<td style="text-align:center"><strong>æ™‹å‡åˆ°è€å¹´ä»£çš„å¯¹è±¡å¹´é¾„</strong>ã€‚æ¯ä¸ªå¯¹è±¡åšæŒè¿‡ä¸€æ¬¡Minor GCä¹‹åï¼Œå¹´é¾„å°±å¢åŠ 1ï¼Œå½“è¶…è¿‡è¿™ä¸ªå‚æ•°å€¼ä»¥åå°±è¿›å…¥è€å¹´ä»£</td>
</tr>
<tr>
<td>UseAdaptiveSizePolicy</td>
<td style="text-align:center"><strong>åŠ¨æ€è°ƒæ•´Javaå †ä¸­å„ä¸ªåŒºåŸŸçš„å¤§å°ä»¥åŠè¿›å…¥è€å¹´ä»£çš„å¹´é¾„</strong></td>
</tr>
<tr>
<td>HandlePromotionFailure</td>
<td style="text-align:center"><strong>æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥</strong>ï¼Œå³è€å¹´ä»£çš„å‰©ä½™ç©ºé—´ä¸è¶³ä»¥åº”ä»˜æ–°ç”Ÿä»£çš„æ•´ä¸ªEdenå’ŒSurvivoråŒºæ‰€æœ‰å¯¹è±¡éƒ½å­˜æ´»çš„æç«¯æƒ…å†µ</td>
</tr>
<tr>
<td>ParallelGCThreads</td>
<td style="text-align:center">è®¾ç½®<strong>å¹¶è¡ŒGCæ—¶è¿›è¡Œå†…å­˜å›æ”¶çš„çº¿ç¨‹æ•°</strong></td>
</tr>
<tr>
<td>GCTimeRatio</td>
<td style="text-align:center"><strong>GCæ—¶é—´å æ€»æ—¶é—´çš„æ¯”ç‡</strong>ï¼Œé»˜è®¤å€¼99ï¼Œå³å…è®¸1%çš„GCæ—¶é—´ã€‚ä»…åœ¨ä½¿ç”¨Parallel Scavengeæ”¶é›†å™¨æ—¶ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td>MaxGCPauseMillis</td>
<td style="text-align:center"><strong>è®¾ç½®GCçš„æœ€å¤§åœé¡¿æ—¶é—´</strong>ã€‚ä»…åœ¨ä½¿ç”¨Parallel Scavengeæ”¶é›†å™¨æ—¶ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td>CMSInitiatingOccupancyFraction</td>
<td style="text-align:center">è®¾ç½®<strong>CMSæ”¶é›†å™¨åœ¨è€å¹´ä»£ç©ºé—´è¢«ä½¿ç”¨å¤šå°‘åè§¦å‘åƒåœ¾æ”¶é›†</strong>ã€‚é»˜è®¤å€¼ä¸º<strong>68%</strong>ï¼Œä»…åœ¨CMSæ”¶é›†å™¨æ—¶ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td>UseCMSCompactAtFullCollection</td>
<td style="text-align:center">è®¾ç½®<strong>CMSæ”¶é›†å™¨åœ¨å®Œæˆåƒåœ¾æ”¶é›†åæ˜¯å¦è¦è¿›è¡Œä¸€æ¬¡å†…å­˜ç¢ç‰‡æ•´ç†</strong>ã€‚ä»…åœ¨CMSæ”¶é›†å™¨æ—¶ç”Ÿæ•ˆ</td>
</tr>
<tr>
<td>CMSFullGCsBeforeCompaction</td>
<td style="text-align:center">è®¾ç½®<strong>CMSæ”¶é›†å™¨åœ¨è¿›è¡Œè‹¥å¹²æ¬¡åƒåœ¾æ”¶é›†åå†å¯åŠ¨ä¸€æ¬¡ç¢ç‰‡æ•´ç†</strong>ã€‚ä»…åœ¨CMSæ”¶é›†å™¨æ—¶ç”Ÿæ•ˆ</td>
</tr>
</tbody>
</table>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/02/19/JVM-note-6/" data-id="cj03kfo3g003xuruqxm30v2ps" class="article-share-link" data-share="baidu" data-title="åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”åƒåœ¾æ”¶é›†å™¨">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/02/19/JVM-note-6/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/">JVM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JVM-note-5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/18/JVM-note-5/" class="article-date">
  <time datetime="2017-02-18T13:11:15.000Z" itemprop="datePublished">2017-02-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/18/JVM-note-5/">JVMç¬”è®°äº”ï¼šåƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”åƒåœ¾æ”¶é›†ç®—æ³•</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h3 id="u6807_u8BB0-_u6E05_u9664_u7B97_u6CD5"><a href="#u6807_u8BB0-_u6E05_u9664_u7B97_u6CD5" class="headerlink" title="æ ‡è®°-æ¸…é™¤ç®—æ³•"></a>æ ‡è®°-æ¸…é™¤ç®—æ³•</h3><p>æœ€åŸºç¡€çš„åƒåœ¾æ”¶é›†ç®—æ³•ã€‚</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-mark-sweep-1.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-mark-sweep.png" alt=""></p>
<p>å‚è€ƒï¼š<a href="http://www.jianshu.com/p/b0f5d21fe031" target="_blank" rel="external">http://www.jianshu.com/p/b0f5d21fe031</a></p>
<h3 id="u590D_u5236_u7B97_u6CD5"><a href="#u590D_u5236_u7B97_u6CD5" class="headerlink" title="å¤åˆ¶ç®—æ³•"></a>å¤åˆ¶ç®—æ³•</h3><p>åŠåŒºå¤åˆ¶ç®—æ³•çš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†æ›´å¥½çš„ç¼“è§£å†…å­˜ç¢ç‰‡é—®é¢˜ã€‚</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-copying-2.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-copying.jpg" alt=""></p>
<font color="red">ç°åœ¨çš„å•†ä¸šè™šæ‹Ÿæœºéƒ½æ˜¯é‡‡ç”¨è¿™ç§æ”¶é›†ç®—æ³•æ¥å›æ”¶<strong>æ–°ç”Ÿä»£</strong></font>ï¼Œæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡98%æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œæ‰€ä»¥å¹¶ä¸éœ€è¦å®‰è£…1:1çš„æ¯”ä¾‹åˆ’åˆ†å†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„EdenåŒºï¼Œå’Œä¸¤å—è¾ƒå°çš„Survivorç©ºé—´ã€‚<br><font color="red">HotSpotè™šæ‹Ÿæœºé»˜è®¤Edenå’ŒSurvivorçš„å¤§å°æ¯”ä¾‹æ˜¯8:1</font>ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡æ–°ç”Ÿä»£å¯ç”¨å†…å­˜ç©ºé—´ä¸ºæ•´ä¸ªæ–°ç”Ÿä»£å®¹é‡çš„90%ï¼Œåªæœ‰10%çš„å†…å­˜ä¼šè¢«æµªè´¹ã€‚å½“Servivorç©ºé—´ä¸å¤Ÿç”¨æ—¶ï¼Œéœ€è¦ä¾èµ–å…¶ä»–å†…å­˜ï¼ˆè¿™é‡ŒæŒ‡è€å¹´ä»£ï¼‰è¿›è¡Œåˆ†æ‹…æ‹…ä¿ã€‚<br><br><font color="green">å¤åˆ¶æ”¶é›†ç®—æ³•åœ¨å¯¹è±¡å­˜æ´»ç‡è¾ƒé«˜æ—¶å°±è¦è¿›è¡Œè¾ƒå¤šçš„å¤åˆ¶æ“ä½œï¼Œæ•ˆç‡å°†ä¼šé™ä½ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå¦‚æœä¸æƒ³æµªè´¹50%çš„ç©ºé—´ï¼Œå°±éœ€è¦æœ‰é¢å¤–çš„ç©ºé—´è¿›è¡Œæ‹…ä¿ï¼Œä»¥åº”å¯¹è¢«ä½¿ç”¨çš„å†…å­˜ä¸­æ‰€æœ‰å¯¹è±¡100%å­˜æ´»çš„æç«¯æƒ…å†µï¼Œæ‰€ä»¥åœ¨è€å¹´ä»£ä¸€èˆ¬ä¸èƒ½ç›´æ¥é€‰ç”¨è¿™ç§ç®—æ³•ã€‚</font>

<h3 id="u6807_u8BB0-_u6574_u7406_u7B97_u6CD5"><a href="#u6807_u8BB0-_u6574_u7406_u7B97_u6CD5" class="headerlink" title="æ ‡è®°-æ•´ç†ç®—æ³•"></a>æ ‡è®°-æ•´ç†ç®—æ³•</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-mark-compact.png" alt=""></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-mark-compact.jpg" alt=""></p>
<h3 id="u5206_u4EE3_u6536_u96C6_u7B97_u6CD5"><a href="#u5206_u4EE3_u6536_u96C6_u7B97_u6CD5" class="headerlink" title="åˆ†ä»£æ”¶é›†ç®—æ³•"></a>åˆ†ä»£æ”¶é›†ç®—æ³•</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-generation-collection.png" alt=""></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/02/18/JVM-note-5/" data-id="cj03kfo3i003zuruq5cah3mh4" class="article-share-link" data-share="baidu" data-title="JVMç¬”è®°äº”ï¼šåƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”åƒåœ¾æ”¶é›†ç®—æ³•">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/02/18/JVM-note-5/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-JVM-note-4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/18/JVM-note-4/" class="article-date">
  <time datetime="2017-02-18T02:27:59.000Z" itemprop="datePublished">2017-02-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/18/JVM-note-4/">JVMç¬”è®°å››ï¼šåƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”å¯¹è±¡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åœ¨å †é‡Œå­˜æ”¾ç€Javaä¸–ç•Œä¸­å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹ï¼Œåƒåœ¾æ”¶é›†å™¨åœ¨å¯¹å †è¿›è¡Œå›æ”¶å‰ï¼Œç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¦ç¡®å®šè¿™äº›å¯¹è±¡ä¹‹ä¸­å“ªäº›è¿˜å­˜æ´»ç€ï¼Œå“ªäº›å·²ç»æ­»å»ï¼ˆå³ä¸å¯èƒ½å†è¢«ä»»ä½•é€”å¾„ä½¿ç”¨çš„å¯¹è±¡ï¼‰ã€‚</p>
<h3 id="u5F15_u7528_u8BA1_u6570_u6CD5"><a href="#u5F15_u7528_u8BA1_u6570_u6CD5" class="headerlink" title="å¼•ç”¨è®¡æ•°æ³•"></a>å¼•ç”¨è®¡æ•°æ³•</h3><p>å¼•ç”¨è®¡æ•°æ³•ï¼ˆReference Countingï¼‰ï¼šç»™å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å°±åŠ 1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å°±å‡1ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸º0çš„å¯¹è±¡æ˜¯ä¸å¯èƒ½è¢«ä½¿ç”¨çš„ã€‚ä¸»æµçš„Javaè™šæ‹Ÿæœºé‡Œæ²¡æœ‰ä½¿ç”¨å¼•ç”¨è®¡æ•°æ³•æ¥ç®¡ç†å†…å­˜ï¼Œä¸»è¦åŸå› æ˜¯å®ƒå¾ˆéš¾è§£å†³å¯¹è±¡ä¹‹é—´çš„ç›¸äº’å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * å¼•ç”¨è®¡æ•°å™¨ç®—æ³•çš„ç¼ºé™·</span><br><span class="line"> * VM Argsï¼š-XX:+PrintGCDetails</span><br><span class="line"> * JDK1.6</span><br><span class="line"> * Created by larry.su on 2017/2/18.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReferenceCountingGC</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> Object instance = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> _1M = <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿™ä¸ªæˆå‘˜å±æ€§çš„å”¯ä¸€æ„ä¹‰å°±æ˜¯å ç”¨ç‚¹å†…å­˜ï¼Œä»¥ä¾¿èƒ½åœ¨GCä¸­çœ‹æ¸…æ¥šæ˜¯å¦è¢«å›æ”¶è¿‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">byte</span>[] bigSize = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span> * _1M];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ReferenceCountingGC objA = <span class="keyword">new</span> ReferenceCountingGC();</span><br><span class="line">        ReferenceCountingGC objB = <span class="keyword">new</span> ReferenceCountingGC();</span><br><span class="line"></span><br><span class="line">        objA.instance = objB;</span><br><span class="line">        objB.instance = objA;</span><br><span class="line"></span><br><span class="line">        objA = <span class="keyword">null</span>;</span><br><span class="line">        objB = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å‡è®¾æ­¤æ—¶å‘ç”ŸGCï¼ŒobjAå’ŒobjBæ˜¯å¦ä¼šè¢«å›æ”¶</span></span><br><span class="line">        System.gc();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="function">Full <span class="title">GC</span> <span class="params">(System)</span> [CMS: 0K-&gt;423<span class="title">K</span><span class="params">(<span class="number">63872</span>K)</span>, 0.0099285 secs] **6167K-&gt;423K**<span class="params">(<span class="number">83008</span>K)</span>, [CMS Perm : 4749K-&gt;4747<span class="title">K</span><span class="params">(<span class="number">21248</span>K)</span>], 0.0107293 secs] [Times: user</span>=<span class="number">0.01</span> sys=<span class="number">0.00</span>, real=<span class="number">0.01</span> secs] </span><br><span class="line">Heap</span><br><span class="line"> par <span class="keyword">new</span> generation   total <span class="number">19136</span>K, used <span class="number">1021</span>K [<span class="number">7f</span>3000000, <span class="number">7f</span>44c0000, <span class="number">7f</span>44c0000)</span><br><span class="line">  eden space <span class="number">17024</span>K,   <span class="number">6</span>% used [<span class="number">7f</span>3000000, <span class="number">7f</span>30ff670, <span class="number">7f</span>40a0000)</span><br><span class="line">  from space <span class="number">2112</span>K,   <span class="number">0</span>% used [<span class="number">7f</span>40a0000, <span class="number">7f</span>40a0000, <span class="number">7f</span>42b0000)</span><br><span class="line">  to   space <span class="number">2112</span>K,   <span class="number">0</span>% used [<span class="number">7f</span>42b0000, <span class="number">7f</span>42b0000, <span class="number">7f</span>44c0000)</span><br><span class="line"> concurrent mark-sweep generation total <span class="number">63872</span>K, used <span class="number">423</span>K [<span class="number">7f</span>44c0000, <span class="number">7f</span>8320000, <span class="number">7f</span>ae00000)</span><br><span class="line"> concurrent-mark-sweep perm gen total <span class="number">21248</span>K, used <span class="number">4880</span>K [<span class="number">7f</span>ae00000, <span class="number">7f</span>c2c0000, <span class="number">800000000</span>)</span><br></pre></td></tr></table></figure>
<p><strong>6167K-&gt;423K(83008K)</strong>æ„å‘³ç€è™šæ‹Ÿæœºå¹¶æ²¡æœ‰å› ä¸ºè¿™ä¸¤ä¸ªå¯¹è±¡å¹¶ç›¸äº’å¼•ç”¨å°±ä¸å›æ”¶ä»–ä»¬ï¼Œä¹Ÿä»ä¾§é¢è¯´æ˜è™šæ‹Ÿæœºå¹¶ä¸æ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°æ³•æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»çš„ã€‚</p>
<h3 id="u53EF_u8FBE_u6027_u5206_u6790_u7B97_u6CD5"><a href="#u53EF_u8FBE_u6027_u5206_u6790_u7B97_u6CD5" class="headerlink" title="å¯è¾¾æ€§åˆ†æç®—æ³•"></a>å¯è¾¾æ€§åˆ†æç®—æ³•</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com//jvm-reachabilityAnalysis.png" alt="å¯è¾¾æ€§åˆ†æç®—æ³•"></p>
<h3 id="u518D_u8C08_u5F15_u7528"><a href="#u518D_u8C08_u5F15_u7528" class="headerlink" title="å†è°ˆå¼•ç”¨"></a>å†è°ˆå¼•ç”¨</h3><p>åœ¨JDK1.2ä¹‹åï¼ŒJavaå¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œåˆ†ä¸ºå¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰ã€è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰ã€å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰ã€è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰4ç§ï¼Œè¿™4ç§å¼•ç”¨å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com//jvm-reference.png" alt="reference"></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/02/18/JVM-note-4/" data-id="cj03kfo3j0040uruqzb70r99b" class="article-share-link" data-share="baidu" data-title="JVMç¬”è®°å››ï¼šåƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”å¯¹è±¡">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/02/18/JVM-note-4/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/">JVM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JVM-note-3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/16/JVM-note-3/" class="article-date">
  <time datetime="2017-02-16T13:35:09.000Z" itemprop="datePublished">2017-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/16/JVM-note-3/">JVMç¬”è®°ä¸‰ï¼šJavaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸â€”â€”OutOfMemoryErrorå¼‚å¸¸</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h2 id="Java_u5806_u6EA2_u51FA"><a href="#Java_u5806_u6EA2_u51FA" class="headerlink" title="Javaå †æº¢å‡º"></a>Javaå †æº¢å‡º</h2><p>Javaå †ç”¨äºå­˜å‚¨å¯¹è±¡å®ä¾‹ï¼Œåªè¦ä¸æ–­åœ°åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯GC Rootsåˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„æ¥é¿å…åƒåœ¾å›æ”¶æœºåˆ¶æ¸…é™¤è¿™äº›å¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨å¯¹è±¡æ•°é‡åˆ°è¾¾æœ€å¤§çš„å®¹é‡é™åˆ¶åå°±ä¼šäº§ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</p>
<p>ä¸‹é¢ä»£ç é™åˆ¶Javaå †çš„å¤§å°ä¸º20MBï¼Œä¸å¯æ‰©å±•ï¼ˆå°†å †çš„æœ€å°å€¼-Xmså‚æ•°ä¸æœ€å¤§å€¼-Xmxå‚æ•°è®¾ç½®ä¸ºä¸€æ ·å³å¯é¿å…å †è‡ªåŠ¨æ‰©å±•ï¼‰ï¼Œé€šè¿‡å‚æ•°-XX:+HeapDumpOnOutOfMemoryErrorå¯ä»¥è®©è™šæ‹Ÿæœºåœ¨å‡ºç°å†…å­˜æº¢å‡ºæ—¶Dumpå‡ºå½“å‰çš„å†…å­˜å †è½¬å‚¨å¿«ç…§ä»¥ä¾¿äº‹åè¿›è¡Œåˆ†æã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * HeapOOM</span><br><span class="line"> * Created by larry.su on 2017/2/7.</span><br><span class="line"> * -Xms20m -Xmx20m -XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapOOM</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">OOMObject</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;OOMObject&gt; list = <span class="keyword">new</span> ArrayList&lt;OOMObject&gt;();</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            list.add(<span class="keyword">new</span> OOMObject());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">Dumping heap to java_pid65766.hprof ...</span><br><span class="line">Heap dump file created [<span class="number">27784157</span> bytes in <span class="number">0.137</span> secs]</span><br><span class="line">Exception in thread <span class="string">"main"</span> java.lang.OutOfMemoryError: Java heap space</span><br></pre></td></tr></table></figure>
<h3 id="u865A_u62DF_u673A_u6808_u548C_u672C_u5730_u65B9_u6CD5_u6808_u6EA2_u51FA"><a href="#u865A_u62DF_u673A_u6808_u548C_u672C_u5730_u65B9_u6CD5_u6808_u6EA2_u51FA" class="headerlink" title="è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"></a>è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º</h3><p>HotSpotè™šæ‹Ÿæœºä¸­å¹¶ä¸åŒºåˆ†è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œå¯¹äºHotSpotæ¥è¯´ï¼Œè™½ç„¶-Xosså‚æ•°ï¼ˆè®¾ç½®æœ¬åœ°æ–¹æ³•æ ˆå¤§å°ï¼‰å­˜åœ¨ï¼Œä½†å®é™…ä¸Šæ˜¯æ— æ•ˆçš„ã€‚æ ˆå®¹é‡åªç”±-Xsså‚æ•°è®¾å®šã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * VM Args: -Xss160k</span><br><span class="line"> * Created by larry.su on 2017/2/17.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaVMStackSOF</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> stackLength = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stackLeak</span><span class="params">()</span></span>&#123;</span><br><span class="line">        stackLength ++ ;</span><br><span class="line">        stackLeak();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        JavaVMStackSOF oom = <span class="keyword">new</span> JavaVMStackSOF();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            oom.stackLeak();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"stackLength:"</span> + oom.stackLength);</span><br><span class="line">            <span class="keyword">throw</span>  e;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">"main"</span> java.lang.StackOverflowError</span><br><span class="line">stackLength:<span class="number">744</span></span><br><span class="line">    at com.jvm.JavaVMStackSOF.stackLeak(JavaVMStackSOF.java:<span class="number">14</span>)</span><br><span class="line">    at com.jvm.JavaVMStackSOF.stackLeak(JavaVMStackSOF.java:<span class="number">15</span>)</span><br><span class="line">    at com.jvm.JavaVMStackSOF.stackLeak(JavaVMStackSOF.java:<span class="number">15</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨å•çº¿ç¨‹ä¸‹ï¼Œæ— è®ºæ˜¯ç”±äºæ ˆå¸§å¤ªå¤§è¿˜æ˜¯è™šæ‹Ÿæœºæ ˆå¸§å®¹é‡å¤ªå°ï¼Œå½“å†…å­˜æ— æ³•åˆ†é…çš„æ—¶å€™ï¼Œè™šæ‹ŸæœºæŠ›å‡ºçš„éƒ½æ˜¯StackOverFlowErrorå¼‚å¸¸ã€‚</p>
<h3 id="u65B9_u6CD5_u533A_u548C_u8FD0_u884C_u65F6_u5E38_u91CF_u6C60_u6EA2_u51FA"><a href="#u65B9_u6CD5_u533A_u548C_u8FD0_u884C_u65F6_u5E38_u91CF_u6C60_u6EA2_u51FA" class="headerlink" title="æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"></a>æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º</h3><p>ç”±äºè¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™ä¸¤ä¸ªåŒºåŸŸçš„æº¢å‡ºæµ‹è¯•å°±æ”¾åœ¨ä¸€èµ·è¿›è¡Œã€‚<strong>æ–¹æ³•åŒºç”¨äºå­˜æ”¾Classçš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç±»åã€è®¿é—®ä¿®é¥°ç¬¦ã€å¸¸é‡æ± ã€å­—æ®µæè¿°ã€æ–¹æ³•æè¿°ç­‰ã€‚</strong></p>
<p><code>String.intern()</code>ã€‚åœ¨JDK1.6ä¹‹å‰ç‰ˆæœ¬ä¸­ç”±äºå¸¸é‡æ± åˆ†é…åœ¨æ°¸ä¹…å†…å­˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡-XX:PermSizeå’Œ-XX:MaxPermSizeé™åˆ¶æ–¹æ³•åŒºçš„å¤§å°ï¼Œä»è€Œé—´æ¥é™åˆ¶å…¶ä¸­å¸¸é‡æ± çš„å®¹é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * Returns a canonical representation for the string object.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * A pool of strings, initially empty, is maintained privately by the</span><br><span class="line"> * class &#123;<span class="doctag">@code</span> String&#125;.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * When the intern method is invoked, if the pool already contains a</span><br><span class="line"> * string equal to this &#123;<span class="doctag">@code</span> String&#125; object as determined by</span><br><span class="line"> * the &#123;<span class="doctag">@link</span> #equals(Object)&#125; method, then the string from the pool is</span><br><span class="line"> * returned. Otherwise, this &#123;<span class="doctag">@code</span> String&#125; object is added to the</span><br><span class="line"> * pool and a reference to this &#123;<span class="doctag">@code</span> String&#125; object is returned.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * It follows that for any two strings &#123;<span class="doctag">@code</span> s&#125; and &#123;<span class="doctag">@code</span> t&#125;,</span><br><span class="line"> * &#123;<span class="doctag">@code</span> s.intern() == t.intern()&#125; is &#123;<span class="doctag">@code</span> true&#125;</span><br><span class="line"> * if and only if &#123;<span class="doctag">@code</span> s.equals(t)&#125; is &#123;<span class="doctag">@code</span> true&#125;.</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * All literal strings and string-valued constant expressions are</span><br><span class="line"> * interned. String literals are defined in section 3.10.5 of the</span><br><span class="line"> * &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;.</span><br><span class="line"> *</span><br><span class="line"> * <span class="doctag">@return</span>  a string that has the same contents as this string, but is</span><br><span class="line"> *          guaranteed to be from a pool of unique strings.</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> String <span class="title">intern</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * VM Args: -XX:PermSize=10M -XX:MaxPermSize=10M</span><br><span class="line"> * Created by larry.su on 2017/2/17.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RuntimeConstantsPoolOOM</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨Listä¿æŒå¸¸é‡æ± çš„å¼•ç”¨ï¼Œé¿å…Full GCå›æ”¶å¸¸é‡æ± è¡Œä¸º</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="comment">//10M çš„PermSizeåœ¨IntegerèŒƒå›´å†…è¶³å¤Ÿäº§ç”ŸOOM</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                list.add(String.valueOf(i++).intern());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">                System.out.println(i);</span><br><span class="line">                <span class="keyword">throw</span> e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">86889</span></span><br><span class="line">Exception in thread <span class="string">"main"</span> java.lang.OutOfMemoryError: PermGen space</span><br><span class="line">at java.lang.String.intern(Native Method)</span><br><span class="line">at com.jvm.RuntimeConstantsPoolOOM.main(RuntimeConstantsPoolOOM.java:<span class="number">21</span>)</span><br></pre></td></tr></table></figure>
<p>åœ¨JDK1.7ä¸­è¿è¡Œè¿™æ®µä»£ç å°±ä¸ä¼šå¾—åˆ°ç›¸åŒçš„æ¥å£ï¼Œwhileä¼šä¸€ç›´å¾ªç¯ä¸‹å»ã€‚</p>
<p>åœ¨JDK8ä¸­ï¼ŒwhileåŒæ ·ä¸€ç›´å¾ªç¯ä¸‹å»ï¼ŒåŒæ—¶æ§åˆ¶å°æ‰“å°å¦‚ä¸‹ä¿¡æ¯ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Java <span class="title">HotSpot</span><span class="params">(TM)</span> 64-Bit Server VM warning: ignoring option PermSize</span>=<span class="number">10</span>M; support was removed in <span class="number">8.0</span></span><br><span class="line"><span class="function">Java <span class="title">HotSpot</span><span class="params">(TM)</span> 64-Bit Server VM warning: ignoring option MaxPermSize</span>=<span class="number">10</span>M; support was removed in <span class="number">8.0</span></span><br></pre></td></tr></table></figure></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/02/16/JVM-note-3/" data-id="cj03kfo3k0042uruqcetyhnqz" class="article-share-link" data-share="baidu" data-title="JVMç¬”è®°ä¸‰ï¼šJavaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸â€”â€”OutOfMemoryErrorå¼‚å¸¸">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/02/16/JVM-note-3/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/">JVM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JVM-note-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/14/JVM-note-2/" class="article-date">
  <time datetime="2017-02-14T12:42:05.000Z" itemprop="datePublished">2017-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/14/JVM-note-2/">JVMç¬”è®°äºŒï¼šJavaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸â€”â€”HotSpotè™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>ä»¥å¸¸ç”¨çš„è™šæ‹ŸæœºHotSpotå’Œå¸¸ç”¨çš„å†…å­˜åŒºåŸŸJavaå †ä¸ºä¾‹ï¼Œæ·±å…¥æ¢è®¨HotSpotè™šæ‹Ÿæœºåœ¨Javaå †ä¸­å¯¹è±¡åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹ã€‚</p>
<h3 id="u5BF9_u8C61_u7684_u521B_u5EFA"><a href="#u5BF9_u8C61_u7684_u521B_u5EFA" class="headerlink" title="å¯¹è±¡çš„åˆ›å»º"></a>å¯¹è±¡çš„åˆ›å»º</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-new.png" alt="javaå¯¹è±¡çš„åˆ›å»º"></p>
<ul>
<li>è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡newæŒ‡ä»¤</li>
<li><strong>æ£€æŸ¥</strong>è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ã€‚å¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è§£æã€åˆå§‹åŒ–è¿‡ï¼Œæ²¡æœ‰å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚</li>
<li><strong>æŒ‡é’ˆç¢°æ’</strong>ï¼šè‹¥å¹²Javaå †ä¸­å†…å­˜æ˜¯ç»å¯¹è§„æ•´çš„ï¼Œæ‰€æœ‰ç”¨è¿‡çš„å†…å­˜éƒ½æ”¾åœ¨ä¸€è¾¹ï¼Œç©ºé—²çš„å†…å­˜æ”¾åœ¨å¦ä¸€è¾¹ï¼Œä¸­é—´æ”¾ç€ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œé‚£æ‰€åˆ†é…çš„å†…å­˜å°±ä»…ä»…æ˜¯æŠŠé‚£ä¸ªæŒ‡é’ˆå‘ç©ºé—²ç©ºé—´é‚£è¾¹æŒªåŠ¨ä¸€æ®µä¸å¯¹è±¡å¤§å°ç›¸ç­‰çš„è·ç¦»ã€‚</li>
<li><strong>ç©ºé—²åˆ—è¡¨</strong>ï¼šå¦‚æœjavaå †ä¸­çš„å†…å­˜å¹¶ä¸æ˜¯è§„æ•´çš„ï¼Œå·²ä½¿ç”¨çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜ç›¸äº’äº¤é”™ï¼ŒJVMå¿…é¡»ç»´æŠ¤ä¸€ä¸ªç©ºé—²åˆ—è¡¨ç”¨æ¥è®°å½•å“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œåœ¨åˆ†é…çš„æ—¶å€™ä»åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´åˆ’åˆ†ç»™å¯¹è±¡å®ä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„è®°å½•</li>
<li>å†…å­˜åˆ†é…å®Œæˆä»¥åï¼Œè™šæ‹Ÿæœºéœ€è¦å°†<strong>åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼</strong>ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ï¼Œç¡®ä¿å¯¹è±¡çš„å®ä¾‹å­—æ®µåœ¨Javaä»£ç ä¸­å¯ä»¥ä¸èµ‹åˆå§‹å€¼å°±ç›´æ¥ä½¿ç”¨ï¼Œç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„é›¶å€¼ã€‚</li>
<li>æ¥ä¸‹æ¥ï¼Œ<strong>JVMå¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®</strong>ï¼Œä¾‹å¦‚ï¼šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œå€¼ã€å¯¹è±¡çš„GCåˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰ä¸­ã€‚</li>
<li>ä¸Šé¢çš„å·¥ä½œå®Œæˆä¹‹åï¼Œ<strong>ä»JVMçš„è§’åº¦ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡ä»¥åŠäº§ç”Ÿ</strong>äº†ã€‚</li>
<li><strong>å¯¹Javaç¨‹åºæ¥è¯´ï¼Œå¯¹è±¡æ‰€æœ‰çš„å­—æ®µéƒ½ä¸ºé›¶å€¼</strong>ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œæ‰§è¡ŒnewæŒ‡ä»¤ä¹‹åä¼šæ¥ç€æ‰§è¡Œ<init>æ–¹æ³•ï¼ŒæŠŠå¯¹è±¡æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡å°±å®Œå…¨äº§ç”Ÿå‡ºæ¥ã€‚</init></li>
</ul>
<h3 id="u5BF9_u8C61_u7684_u5185_u5B58_u5E03_u5C40"><a href="#u5BF9_u8C61_u7684_u5185_u5B58_u5E03_u5C40" class="headerlink" title="å¯¹è±¡çš„å†…å­˜å¸ƒå±€"></a>å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-object.png" alt="å¯¹è±¡çš„å†…å­˜å¸ƒå±€"></p>
<h3 id="u5BF9_u8C61_u7684_u8BBF_u95EE_u5B9A_u4F4D"><a href="#u5BF9_u8C61_u7684_u8BBF_u95EE_u5B9A_u4F4D" class="headerlink" title="å¯¹è±¡çš„è®¿é—®å®šä½"></a>å¯¹è±¡çš„è®¿é—®å®šä½</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jvm-object-visit.png" alt="å¯¹è±¡çš„è®¿é—®å®šä½"></p>
<ul>
<li>ä½¿ç”¨<strong>å¥æŸ„è®¿é—®</strong>ï¼šJavaå †ä¸­å°†åˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreferenceä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„åœ°å€ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªçš„å…·ä½“åœ°å€ä¿¡æ¯</li>
<li>ä½¿ç”¨<strong>ç›´æ¥æŒ‡é’ˆè®¿é—®</strong>ï¼šJavaå †å¯¹è±¡çš„å¸ƒå±€ä¸­å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»å‹æ•°æ®ç›¸å…³ä¿¡æ¯ï¼Œè€Œreferenceä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡åœ°å€</li>
</ul>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2017/02/14/JVM-note-2/" data-id="cj03kfo3l0044uruqydpo7hyv" class="article-share-link" data-share="baidu" data-title="JVMç¬”è®°äºŒï¼šJavaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸â€”â€”HotSpotè™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2017/02/14/JVM-note-2/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/">JVM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JVM-note-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/25/JVM-note-1/" class="article-date">
  <time datetime="2016-12-25T06:56:19.000Z" itemprop="datePublished">2016-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/25/JVM-note-1/">JVMç¬”è®°ä¸€ï¼šJavaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸â€”â€”è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>è¯¥ç³»åˆ—å­¦ä¹ ç¬”è®°å‡æ¥è‡ªã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹ä¸€ä¹¦ã€‚</p>
<h3 id="u6982_u8FF0"><a href="#u6982_u8FF0" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><img src="http://7xpk5e.com1.z0.glb.clouddn.com//jvm-runtime-illustration.png" alt="Javaè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº"></p>
<h3 id="u7A0B_u5E8F_u8BA1_u6570_u5668"><a href="#u7A0B_u5E8F_u8BA1_u6570_u5668" class="headerlink" title="ç¨‹åºè®¡æ•°å™¨"></a>ç¨‹åºè®¡æ•°å™¨</h3><p>ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚åœ¨è™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</p>
<p>ç”±äºJavaè™šæ‹Ÿæœºçš„å¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„æ–¹å¼æ¥å®ç°çš„ï¼Œ<strong>åœ¨ä»»ä½•ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨ï¼ˆå¤šæ ¸å¤„ç†å™¨çš„ä¸€ä¸ªå†…æ ¸ï¼‰éƒ½åªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹çš„æŒ‡ä»¤ã€‚å› æ­¤ä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨</strong>ã€‚æˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸ºã€çº¿ç¨‹ç§æœ‰ã€çš„å†…å­˜ã€‚</p>
<p>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸€ä¸ªJavaæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„å°±æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ‰§è¡Œçš„æ˜¯ä¸€ä¸ªNativeæ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚</p>
<p>æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨Javaè™šæ‹Ÿæœºä¸­æ²¡æœ‰è§„å®šä»»ä½•OutOfMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚</p>
<h3 id="u865A_u62DF_u673A_u6808"><a href="#u865A_u62DF_u673A_u6808" class="headerlink" title="è™šæ‹Ÿæœºæ ˆ"></a>è™šæ‹Ÿæœºæ ˆ</h3><p>ä¸ç¨‹åºè®¡æ•°å™¨ä¸€æ ·ï¼Œ<strong>Javaè™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒ</strong>ã€‚</p>
<font color="red">è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹</font>ï¼š<strong>æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­çš„å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹</strong>ã€‚<br><br><font color="red">å±€éƒ¨å˜é‡è¡¨</font>

<ul>
<li><strong>å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹</strong>ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ã€<strong>å¯¹è±¡å¼•ç”¨</strong>ï¼ˆreferenceç±»å‹ï¼Œå®ƒä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰å’Œ<strong>returnAddressç±»å‹</strong>ï¼ˆæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰ã€‚</li>
<li>å…¶ä¸­64ä½é•¿åº¦çš„longå’Œdoubleç±»å‹çš„æ•°æ®ä¼šå ç”¨2ä¸ªå±€éƒ¨å˜é‡ç©ºé—´ï¼ˆSlotï¼‰ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ç”¨ä¸€ä¸ªã€‚</li>
<li>å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨å¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œåœ¨æ–¹æ³•çš„è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡çš„å¤§å°ã€‚</li>
</ul>
<p>åœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­ï¼Œå¯¹è¿™ä¸ªåŒºåŸŸè§„å®š2ç§å¼‚å¸¸æƒ…å†µï¼š</p>
<ul>
<li>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºå…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸</li>
<li>å¦‚æœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œæ‰©å±•ç”³è¯·æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œå°±ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸</li>
</ul>
<h3 id="u672C_u5730_u65B9_u6CD5_u6808"><a href="#u672C_u5730_u65B9_u6CD5_u6808" class="headerlink" title="æœ¬åœ°æ–¹æ³•æ ˆ"></a>æœ¬åœ°æ–¹æ³•æ ˆ</h3><p><font color="red">æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ä¸è™šæ‹Ÿæœºæ ˆå‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„</font>ï¼Œä»–ä»¬ä¹‹é—´çš„<font color="red">åŒºåˆ«</font>ï¼š<strong>è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡</strong>ã€‚</p>
<p>ä¸è™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œæœ¬åœ°æ–¹æ³•æ ˆåŒºåŸŸä¹Ÿä¼šæŠ›å‡ºStackOverflowErrorå’ŒOutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h3 id="Java_u5806"><a href="#Java_u5806" class="headerlink" title="Javaå †"></a>Javaå †</h3><p><font color="red">Javaå †æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜</font>ã€‚</p>
<p>Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œä¹Ÿè¢«ç§°ä¸ºã€GCå †ã€ã€‚ä»å†…å­˜å›æ”¶çš„è§’åº¦çœ‹ï¼Œç”±äºç°åœ¨æ”¶é›†å™¨åŸºæœ¬ä¸Šéƒ½é‡‡ç”¨<strong>åˆ†ä»£æ”¶é›†ç®—æ³•</strong>ï¼Œæ‰€ä»¥javaå †è¿˜å¯ä»¥ç»†åˆ†ä¸ºï¼š<strong>æ–°ç”Ÿä»£å’Œè€å¹´ä»£</strong>ï¼›åœ¨ç»†è‡´ä¸€ç‚¹çš„æœ‰Edenç©ºé—´ã€From Survivorç©ºé—´ã€To Survivorç©ºé—´ç­‰ã€‚</p>
<p>æ ¹æ®Javaè™šæ‹Ÿæœºè§„èŒƒçš„è§„å®šï¼Œ<strong>Javaå †</strong>å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œåªè¦é€»è¾‘ä¸Šçš„è¿ç»­å³å¯ï¼Œå°±åƒæˆ‘ä»¬çš„ç£ç›˜ç©ºé—´ä¸€æ ·ã€‚åœ¨å®ç°æ—¶ï¼Œæ—¢å¯ä»¥å®ç°æˆå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯æ‰©å±•çš„ï¼Œä¸è¿‡å½“å‰ä¸»æµçš„è™šæ‹Ÿæœºéƒ½æ˜¯æŒ‰ç…§<strong>å¯æ‰©å±•æ¥</strong>å®ç°çš„ï¼ˆ<strong>é€šè¿‡-Xmxå’Œ-Xmsæ§åˆ¶</strong>ï¼‰ã€‚å¦‚æœå †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼Œå°†ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h3 id="u65B9_u6CD5_u533A"><a href="#u65B9_u6CD5_u533A" class="headerlink" title="æ–¹æ³•åŒº"></a>æ–¹æ³•åŒº</h3><p>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ä¸Javaå †ä¸€æ ·ï¼Œæ˜¯<strong>å„ä¸ªçº¿ç¨‹å…±äº«</strong>çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äº<strong>å­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®</strong>ã€‚è™½ç„¶Javaè™šæ‹Ÿæœºè§„èŒƒæŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªåˆ«åå«Non-Heapï¼ˆéå †ï¼‰ï¼Œç›®çš„å°±æ˜¯ä¸Javaå †åŒºåˆ†å¼€æ¥ã€‚</p>
<p>å¯¹äºä¹ æƒ¯åœ¨HotSpotè™šæ‹Ÿæœºä¸Šå¼€å‘ã€éƒ¨ç½²ç¨‹åºçš„å¼€å‘è€…æ¥è¯´ï¼Œå¾ˆå¤šäººæ›´æ„¿æ„æŠŠæ–¹æ³•åŒºæˆä¸ºã€æ°¸ä¹…ä»£ã€ï¼ˆPermanent Generation)ï¼Œæœ¬è´¨ä¸Šä¸¤è€…å¹¶ä¸ç­‰ä»·ï¼Œä»…ä»…æ˜¯å› ä¸ºHotSpotè™šæ‹Ÿæœºçš„è®¾è®¡å›¢é˜Ÿé€‰æ‹©æŠŠGCåˆ†ä»£æ”¶é›†æ‰©å±•è‡³æ–¹æ³•åŒºï¼Œæˆ–è€…è¯´ä½¿ç”¨æ°¸ä¹…ä»£æ¥å®ç°æ–¹æ³•åŒºè€Œå·²ï¼Œè¿™æ ·HotSpotçš„åƒåœ¾æ”¶é›†å™¨å¯ä»¥åƒç®¡ç†Javaå †ä¸€æ ·ç®¡ç†è¿™éƒ¨åˆ†å†…å­˜ï¼Œèƒ½å¤Ÿçœå»å•ç‹¬ä¸ºæ–¹æ³•åŒºç¼–å†™å†…å­˜ç®¡ç†ä»£ç çš„å·¥ä½œã€‚åœ¨å·²ç»å‘å¸ƒçš„JDK1.7çš„HotSpotä¸­ï¼Œå·²ç»æŠŠåŸæœ¬æ”¾åœ¨æ°¸ä¹…ä»£çš„å­—ç¬¦ä¸²å¸¸é‡æ± ç§»å‡ºã€‚</p>
<p>Javaè™šæ‹Ÿæœºè§„èŒƒå¯¹æ–¹æ³•åŒºçš„é™åˆ¶éå¸¸å®½æ¾ï¼Œé™¤äº†å’ŒJavaå †ä¸€æ ·ä¸éœ€è¦è¿ç»­çš„å†…å­˜å’Œå¯ä»¥é€‰æ‹©å›ºå®šå¤§å°æˆ–è€…å¯æ‰©å±•å¤–ï¼Œè¿˜å¯ä»¥é€‰æ‹©ä¸å®ç°åƒåœ¾æ”¶é›†ã€‚ç›¸å¯¹è€Œè¨€ï¼Œåƒåœ¾æ”¶é›†è¡Œä¸ºåœ¨è¿™ä¸ªåŒºåŸŸæ˜¯æ¯”è¾ƒå°‘å‡ºç°çš„ï¼Œä½†å¹¶éæ•°æ®è¿›å…¥äº†æ–¹æ³•åŒºå°±å¦‚æ°¸ä¹…ä»£çš„åå­—ä¸€æ ·ã€æ°¸ä¹…ã€å­˜åœ¨äº†ã€‚è¿™ä¸ªåŒºåŸŸçš„å†…å­˜å›æ”¶ç›®æ ‡ä¸»è¦æ˜¯é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»å‹çš„å¸è½½ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªåŒºåŸŸçš„å†…å­˜å›æ”¶æˆç»©æ¯”è¾ƒéš¾ä»¥ä»¤äººæ»¡æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„å¸è½½ï¼Œæ¡ä»¶ç›¸å½“è‹›åˆ»ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†åŒºåŸŸçš„å›æ”¶ç¡®å®æ˜¯å¿…è¦çš„ã€‚</p>
<p>æ ¹æ®Javaè™šæ‹Ÿæœºè§„èŒƒçš„è§„å®šï¼Œæ–¹æ³•åŒºæ— æ³•æ»¡è¶³å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h4 id="u8FD0_u884C_u65F6_u5E38_u91CF_u6C60"><a href="#u8FD0_u884C_u65F6_u5E38_u91CF_u6C60" class="headerlink" title="è¿è¡Œæ—¶å¸¸é‡æ± "></a>è¿è¡Œæ—¶å¸¸é‡æ± </h4><p><strong>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†</strong>ã€‚Classæ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œæœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼ˆConstant Pool Tableï¼‰ï¼Œ<strong>ç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦åˆå¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½è¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å­˜æ”¾</strong>ã€‚</p>
<p>æ—¢ç„¶è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆè‡ªç„¶å—åˆ°æ–¹æ³•åŒºå†…å­˜çš„é™åˆ¶ï¼Œå½“å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚</p>
<h3 id="u76F4_u63A5_u5185_u5B58"><a href="#u76F4_u63A5_u5185_u5B58" class="headerlink" title="ç›´æ¥å†…å­˜"></a>ç›´æ¥å†…å­˜</h3><p>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯Javaè™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚ä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹çš„ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´OutOfMemoryErrorå¼‚å¸¸å‡ºç°ã€‚æ‰€ä»¥æˆ‘ä»¬æ”¾åˆ°ä¸€èµ·è®²ã€‚</p>
<p>åœ¨Jdk1.4ä¸­æ–°åŠ å…¥äº†NIOï¼ˆNew Input/Output)ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å­˜åŒºï¼ˆBufferï¼‰çš„I/Oæ–¹å¼ï¼Œä»–å¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨Javaå †ä¸­çš„DirectByteBufferå¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜å†…å­˜ï¼Œå› ä¸ºé¿å…äº†Javaå †å’ŒNativeå †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚</p>
<p>æ˜¾ç„¶ï¼Œæœ¬æœºç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ°Javaå †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ï¼Œæ—¢ç„¶æ˜¯å†…å­˜ï¼Œè‚¯å®šè¿˜æ˜¯å—åˆ°æœ¬æœºæ€»å†…å­˜ï¼ˆåŒ…æ‹¬RAMä»¥åŠSWAPåŒºæˆ–è€…åˆ†é¡µæ–‡ä»¶ï¼‰å¤§å°ä»¥åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ã€‚æœåŠ¡å™¨ç®¡ç†å‘˜åœ¨é…ç½®è™šæ‹Ÿæœºå‚æ•°æ—¶ï¼Œä¼šæ ¹æ®å®é™…å†…å­˜è®¾ç½®-Xmxç­‰å‚æ•°ä¿¡æ¯ï¼Œä½†æ˜¯<strong>ç»å¸¸å¿½ç•¥ç›´æ¥å†…å­˜ï¼Œä½¿å¾—å„ä¸ªå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶ï¼ˆåŒ…æ‹¬ç‰©ç†çš„å’Œæ“ä½œç³»ç»Ÿçš„é™åˆ¶ï¼‰ï¼Œä»è€Œå¯¼è‡´OutOfMemoryErrorå¼‚å¸¸</strong>ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/12/25/JVM-note-1/" data-id="cj03kfo3n0046uruq22q2kewx" class="article-share-link" data-share="baidu" data-title="JVMç¬”è®°ä¸€ï¼šJavaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸â€”â€”è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/12/25/JVM-note-1/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JVM/">JVM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-SocketChannel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/27/Java-NIO-SocketChannel/" class="article-date">
  <time datetime="2016-11-27T13:12:38.000Z" itemprop="datePublished">2016-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/27/Java-NIO-SocketChannel/">Java NIO SocketChannel</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ï¼š<a href="http://tutorials.jenkov.com/java-nio/socketchannel.html" target="_blank" rel="external">http://tutorials.jenkov.com/java-nio/socketchannel.html</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/11/27/Java-NIO-SocketChannel/" data-id="cj03kfo2z003curuqp45ccdoz" class="article-share-link" data-share="baidu" data-title="Java NIO SocketChannel">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/11/27/Java-NIO-SocketChannel/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-FileChannel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/22/Java-NIO-FileChannel/" class="article-date">
  <time datetime="2016-11-21T16:14:33.000Z" itemprop="datePublished">2016-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/22/Java-NIO-FileChannel/">Java NIO FileChannel</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ï¼š[<a href="http://tutorials.jenkov.com/java-nio/file-channel.html]{http://tutorials.jenkov.com/java-nio/file-channel.html}" target="_blank" rel="external">http://tutorials.jenkov.com/java-nio/file-channel.html]{http://tutorials.jenkov.com/java-nio/file-channel.html}</a></p>
<p>Java NIOä¸­çš„FileChannelæ˜¯ä¸€ä¸ªè¿æ¥æ–‡ä»¶çš„channelï¼Œå¯ä»¥ä½¿ç”¨å®ƒä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®æˆ–å‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ã€‚Java NIOçš„FileChannelæ˜¯NIOçš„ä¸€ä¸ªé€‰æ‹©ç›¸å¯¹æ ‡å‡†çš„Java IO APIæ¥è¯´ã€‚</p>
<p>FileChannelå¯ä»¥è®¾ç½®æˆéé˜»å¡æ¨¡å¼ï¼Œä½†æ˜¯ä»ç„¶ä¼šæŒ‰ç…§é˜»å¡æ¨¡å¼è¿è¡Œã€‚</p>
<h2 id="u6253_u5F00FileChannel"><a href="#u6253_u5F00FileChannel" class="headerlink" title="æ‰“å¼€FileChannel"></a>æ‰“å¼€FileChannel</h2><p>åœ¨ä½¿ç”¨FileChannelæ—¶éœ€è¦å…ˆæ‰“å¼€å®ƒï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥æ‰“å¼€ã€‚éœ€è¦å€ŸåŠ©InputStream,OutputStreamæˆ–è€…æ˜¯RandomAccessFileã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RandomAccessFile aFile     = <span class="keyword">new</span> RandomAccessFile(<span class="string">"data/nio-data.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">FileChannel      inChannel = aFile.getChannel();</span><br></pre></td></tr></table></figure>
<h2 id="u4ECEFileChannel_u8BFB_u6570_u636E"><a href="#u4ECEFileChannel_u8BFB_u6570_u636E" class="headerlink" title="ä»FileChannelè¯»æ•°æ®"></a>ä»FileChannelè¯»æ•°æ®</h2><p>ä»FileChannelè¯»æ•°æ®å¯ä»¥è°ƒç”¨<code>read()</code>æ–¹æ³•ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ByteBuffer buf = ByteBuffer.allocate(<span class="number">48</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> bytesRead = inChannel.read(buf);</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆç»™Bufferåˆ†é…å­—èŠ‚ï¼Œ FileChannelä¸­çš„æ•°æ®å°±æ˜¯è¯»åˆ°Bufferä¸­ã€‚</p>
<p>å…¶æ¬¡ï¼Œå†è°ƒç”¨<code>FileChannel.read()</code>æ–¹æ³•ã€‚ä»FileChannelä¸­å°†æ•°æ®è¯»å…¥bufferã€‚read()çš„æ•´å‹è¿”å›å€¼å‘Šè¯‰æˆ‘ä»¬å·²ç»å†™å…¥Bufferçš„å­—èŠ‚é‡ã€‚å¦‚æœè¿”å›<code>-1</code>,å°±æ˜¯è¯»åˆ°äº†æ–‡ä»¶çš„ç»“å°¾ã€‚</p>
<h2 id="FileChannel_u5199_u5165_u6570_u636E"><a href="#FileChannel_u5199_u5165_u6570_u636E" class="headerlink" title="FileChannelå†™å…¥æ•°æ®"></a>FileChannelå†™å…¥æ•°æ®</h2><p>Writing data to a FileChannel is done using the FileChannel.write() method, which takes a Buffer as parameter. Here is an example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String newData = <span class="string">"New String to write to file..."</span> + System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">ByteBuffer buf = ByteBuffer.allocate(<span class="number">48</span>);</span><br><span class="line">buf.clear();</span><br><span class="line">buf.put(newData.getBytes());</span><br><span class="line"></span><br><span class="line">buf.flip();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(buf.hasRemaining()) &#123;</span><br><span class="line">    channel.write(buf);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Notice how the FileChannel.write() method is called inside a while-loop. There is no guarantee of how many bytes the write() method writes to the FileChannel. Therefore we repeat the write() call until the Buffer has no further bytes to write.</p>
<h2 id="u5173_u95EDFileChannel"><a href="#u5173_u95EDFileChannel" class="headerlink" title="å…³é—­FileChannel"></a>å…³é—­FileChannel</h2><p>When you are done using a FileChannel you must close it. Here is how that is done:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel.close();</span><br></pre></td></tr></table></figure>
<h2 id="FileChannel_Position"><a href="#FileChannel_Position" class="headerlink" title="FileChannel Position"></a>FileChannel Position</h2><p>When reading or writing to a FileChannel you do so at a specific position. You can obtain the current position of the FileChannel object by calling the position() method.</p>
<p>You can also set the position of the FileChannel by calling the position(long pos) method.</p>
<p>Here are two examples:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> pos channel.position();</span><br><span class="line"></span><br><span class="line">channel.position(pos +<span class="number">123</span>);</span><br></pre></td></tr></table></figure>
<p>If you set the position after the end of the file, and try to read from the channel, you will get -1 - the end-of-file marker.</p>
<p>If you set the position after the end of the file, and write to the channel, the file will be expanded to fit the position and written data. This may result in a â€œfile holeâ€, where the physical file on the disk has gaps in the written data.</p>
<h2 id="FileChannel_Size"><a href="#FileChannel_Size" class="headerlink" title="FileChannel Size"></a>FileChannel Size</h2><p>The size() method of the FileChannel object returns the file size of the file the channel is connected to. Here is a simple example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> fileSize = channel.size();</span><br></pre></td></tr></table></figure>
<h2 id="FileChannel_Truncate"><a href="#FileChannel_Truncate" class="headerlink" title="FileChannel Truncate"></a>FileChannel Truncate</h2><p>You can truncate a file by calling the FileChannel.truncate() method. When you truncate a file, you cut it off at a given length. Here is an example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel.truncate(<span class="number">1024</span>);</span><br></pre></td></tr></table></figure>
<p>This example truncates the file at 1024 bytes in length.</p>
<h2 id="FileChannel_Force"><a href="#FileChannel_Force" class="headerlink" title="FileChannel Force"></a>FileChannel Force</h2><p>The FileChannel.force() method flushes all unwritten data from the channel to the disk. An operating system may cache data in memory for performance reasons, so you are not guaranteed that data written to the channel is actually written to disk, until you call the force() method.</p>
<p>The force() method takes a boolean as parameter, telling whether the file meta data (permission etc.) should be flushed too.</p>
<p>Here is an example which flushes both data and meta data:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">channel.force(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/11/22/Java-NIO-FileChannel/" data-id="cj03kfo35003kuruq0z0q0xq6" class="article-share-link" data-share="baidu" data-title="Java NIO FileChannel">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/11/22/Java-NIO-FileChannel/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-Selector" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/16/Java-NIO-Selector/" class="article-date">
  <time datetime="2016-11-16T14:27:08.000Z" itemprop="datePublished">2016-11-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/16/Java-NIO-Selector/">Java NIO Selector</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ï¼š<a href="http://tutorials.jenkov.com/java-nio/selectors.html" target="_blank" rel="external">http://tutorials.jenkov.com/java-nio/selectors.html</a></p>
<p><code>Selector</code>æ˜¯Java NIOä¸­ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªæˆ–å¤šä¸ªNIOé€šé“çš„ï¼Œå†³å®šå“ªä¸ªé€šé“åšå¥½å‡†å¤‡è¿›è¡Œè¯»å†™çš„ç»„ä»¶ã€‚è¿™æ ·ï¼Œä¸€ä¸ªå•çº¿ç¨‹å°±å¯ä»¥ç®¡ç†å¤šä¸ªé€šé“ï¼Œä»¥ä¾¿ç®¡ç†å¤šä¸ªç½‘ç»œè¿æ¥ã€‚</p>
<h2 id="u4E3A_u4F55_u4F7F_u7528Selector_3F"><a href="#u4E3A_u4F55_u4F7F_u7528Selector_3F" class="headerlink" title="ä¸ºä½•ä½¿ç”¨Selector?"></a>ä¸ºä½•ä½¿ç”¨Selector?</h2><p>ä½¿ç”¨å•çº¿ç¨‹å¤„ç†å¤šé€šé“çš„å¥½å¤„å°±æ˜¯å¯ä»¥ä½¿ç”¨æ›´å°‘çš„çº¿ç¨‹å¤„ç†å¤šä¸ªé€šé“ã€‚å®é™…ä¸Šå¯ä»¥ä½¿ç”¨åªç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªé€šé“ã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹åˆ‡æ¢å¼€é”€å¾ˆå¤§ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå ç”¨ä¸€äº›èµ„æºï¼ˆå†…å­˜ï¼‰ã€‚å› æ­¤ï¼Œçº¿ç¨‹è¶Šå°‘è¶Šå¥½ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½“å‰æ“ä½œç³»ç»Ÿå’ŒCPUå¤šä»»åŠ¡å¤„ç†ä¸Šå·²ç»éå¸¸å¥½ï¼Œå¤šçº¿ç¨‹çš„å¼€é”€å·²ç»å˜å¾—å¾ˆå°äº†ã€‚å¦‚æœä¸€ä¸ªCPUæœ‰å¤šä¸ªå†…æ ¸ï¼Œä¸ä½¿ç”¨å¤šä»»åŠ¡å¯èƒ½æ˜¯åœ¨æµªè´¹CPUèƒ½åŠ›ã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œå…³äºé‚£ç§è®¾è®¡çš„è®¨è®ºåº”è¯¥æ”¾åœ¨å¦ä¸€ç¯‡ä¸åŒçš„æ–‡ç« ä¸­ã€‚åœ¨è¿™é‡Œï¼Œåªè¦çŸ¥é“ä½¿ç”¨Selectorèƒ½å¤Ÿå¤„ç†å¤šä¸ªé€šé“å°±è¶³å¤Ÿäº†ã€‚</p>
<p>ä½¿ç”¨ä¸€ä¸ªSelectorå¤„ç†3ä¸ªchannelçš„å›¾è§£å¦‚ä¸‹ï¼š</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/JavaNIOSelectors.png" alt="
Java NIO: A Thread uses a Selector to handle 3 Channel&#39;s"></p>
<h2 id="Selector_u7684_u521B_u5EFA"><a href="#Selector_u7684_u521B_u5EFA" class="headerlink" title="Selectorçš„åˆ›å»º"></a>Selectorçš„åˆ›å»º</h2><p>è°ƒç”¨<code>Selector.open()</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªselectorã€‚åƒè¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Selector selector = Selector.open();</span><br></pre></td></tr></table></figure>
<h2 id="Channel_u6CE8_u518C_u5230Selector_u4E0A"><a href="#Channel_u6CE8_u518C_u5230Selector_u4E0A" class="headerlink" title="Channelæ³¨å†Œåˆ°Selectorä¸Š"></a>Channelæ³¨å†Œåˆ°Selectorä¸Š</h2><p>ä¸ºäº†ç»“åˆSelectorä½¿ç”¨Channelï¼Œé¦–å…ˆè¦å°†Channelæ³¨å†Œåˆ°Selectorä¸Šã€‚é€šè¿‡æ–¹æ³•<code>SelectableChannel.register()</code>å®ç°:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">channel.configureBlocking(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">SelectionKey key = channel.register(selector, SelectionKey.OP_READ);</span><br></pre></td></tr></table></figure>
<p>ç»“åˆSelectorä½¿ç”¨æ—¶ï¼ŒChannelå¿…é¡»æ˜¯éé˜»å¡å¸ˆçš„ã€‚è¿™å°±æ„å‘³ç€ï¼Œä½ ä¸èƒ½æŠŠFileChannelå’ŒSelectorç»“åˆä½¿ç”¨ï¼Œå› ä¸ºFileChannelä¸èƒ½åˆ‡æ¢åˆ°éé˜»å¡æ¨¡å¼ã€‚Socket Channelç¡®å¯ä»¥å¾ˆå¥½çš„ç»“åˆSelectorä½¿ç”¨ã€‚</p>
<p><code>register()</code>æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°éœ€è¦æ³¨æ„ä¸‹ã€‚è¿™æ˜¯ä¸ªæœ‰è¶£çš„è®¾ç½®ï¼Œæ„æ€æ˜¯åœ¨é€šè¿‡Selectorç›‘å¬Channelæ—¶åˆšå…´è¶£çš„äº‹ä»¶ã€‚å¯ä»¥ç›‘å¬åˆ°ä»¥ä¸‹å››ç§äº‹ä»¶ï¼š</p>
<ul>
<li>Connect</li>
<li>Accept</li>
<li>Read</li>
<li>Write</li>
</ul>
<p>ä¸€ä¸ªchannelè§¦å‘äº†äº‹ä»¶å°±æ˜¯æ„å‘³ç€è¯¥äº‹ä»¶å·²å°±ç»ªã€‚å› æ­¤ï¼Œchannelè¿æ¥æœåŠ¡æˆåŠŸå°±æ˜¯<code>Connect</code>å°±ç»ªã€‚æœåŠ¡socke channelå‡†å¤‡æ¥å—è¿›å…¥çš„è¿æ¥å°±æ˜¯<code>Accept</code>å°±ç»ªã€‚æœåŠ¡socket channelå·²ç»å‡†å¤‡å¥½äº†å¯ä»¥è¯»å–çš„æ•°æ®å°±æ˜¯<code>Read</code>å°±ç»ªã€‚channelå‡†å¤‡å¥½å¯ä»¥å†™å…¥æ•°æ®å°±æ˜¯<code>Write</code>å°±ç»ªã€‚</p>
<p>è¿™å››ç§äº‹ä»¶ç”¨SelectionKeyçš„å¸¸é‡è¡¨ç¤ºï¼š </p>
<ul>
<li>SelectionKey.OP_CONNECT</li>
<li>SelectionKey.OP_ACCEPT</li>
<li>SelectionKey.OP_READ</li>
<li>SelectionKey.OP_WRITE</li>
</ul>
<p>å¦‚æœå¯¹å¤šä¸ªäº‹ä»¶æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨â€œä½æˆ–â€æ“ä½œç¬¦å°†å¸¸é‡è¿æ¥èµ·æ¥ï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> interestSet = SelectionKey.OP_READ | SelectionKey.OP_WRITE;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢è¿˜ä¼šç»§ç»­æåˆ°interesté›†åˆã€‚</p>
<h2 id="SelectionKey"><a href="#SelectionKey" class="headerlink" title="SelectionKey"></a>SelectionKey</h2><p>é€šè¿‡å‰é¢ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œè°ƒç”¨<code>register()</code>æ–¹æ³•å‘selectorä¸Šæ³¨å†Œchannelæ—¶è¿”å›<code>SelectionKey</code>å¯¹è±¡ã€‚è¿™ä¸ª<code>SelectionKey</code>å¯¹è±¡ä¸­åŒ…å«å¾ˆå¤šæœ‰è¶£çš„å±æ€§ã€‚</p>
<ul>
<li>interesté›†åˆ</li>
<li>ready é›†åˆ</li>
<li>Channel</li>
<li>Selector</li>
<li>é™„åŠ å¯¹è±¡ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<p>ä¸‹é¢ä¼šæè¿°è¿™äº›å±æ€§ã€‚</p>
<h3 id="Interest_u96C6_u5408"><a href="#Interest_u96C6_u5408" class="headerlink" title="Interesté›†åˆ"></a>Interesté›†åˆ</h3><p>å°±åƒå‘Selectoræ³¨å†Œé€šé“ä¸€èŠ‚ä¸­æ‰€æè¿°çš„ï¼Œinteresté›†åˆæ˜¯ä½ æ‰€é€‰æ‹©çš„æ„Ÿå…´è¶£çš„äº‹ä»¶é›†åˆã€‚é€šè¿‡SelectionKeyå¯ä»¥è¯»å†™interesté›†åˆã€‚ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> interestSet = selectionKey.interestOps();</span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> isInterestedInAccept  = interestSet &amp; SelectionKey.OP_ACCEPT;</span><br><span class="line"><span class="keyword">boolean</span> isInterestedInConnect = interestSet &amp; SelectionKey.OP_CONNECT;</span><br><span class="line"><span class="keyword">boolean</span> isInterestedInRead    = interestSet &amp; SelectionKey.OP_READ;</span><br><span class="line"><span class="keyword">boolean</span> isInterestedInWrite   = interestSet &amp; SelectionKey.OP_WRITE;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨ã€ä½ä¸ã€æ“ä½œinteresté›†åˆå’Œç»™å®šçš„çš„SelectionKeyå¸¸é‡ï¼Œå¯ä»¥ç¡®å®šæŸä¸ªç¡®å®šçš„ä¸–ç•Œæ˜¯å¦åœ¨interesté›†åˆä¸­ã€‚</p>
<h3 id="Ready_u96C6_u5408"><a href="#Ready_u96C6_u5408" class="headerlink" title="Readyé›†åˆ"></a>Readyé›†åˆ</h3><p>readyé›†åˆæ˜¯channelå·²ç»å‡†å¤‡å°±ç»ªçš„channelé›†åˆã€‚åœ¨ä¸€æ¬¡<code>selection</code>ä»¥åï¼Œå¯ä»¥å…ˆè·å¾—readyé›†åˆã€‚è‡³äº<code>selecton</code>ï¼Œä¼šå†ä¸‹é¢çš„ç« èŠ‚è§£é‡Šã€‚å¯ä»¥è¿™æ ·è·å–readyé›†åˆï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> readySet = selectionKey.readyOps();</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨åƒæ£€æµ‹interesté›†åˆé‚£æ ·çš„æ–¹æ³•ï¼Œæ¥æ£€æµ‹channelä¸­ä»€ä¹ˆäº‹ä»¶æˆ–æ“ä½œå·²ç»å°±ç»ªã€‚ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å››ä¸ªæ–¹æ³•ï¼Œå®ƒä»¬éƒ½ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">selectionKey.isAcceptable();</span><br><span class="line">selectionKey.isConnectable();</span><br><span class="line">selectionKey.isReadable();</span><br><span class="line">selectionKey.isWritable();</span><br></pre></td></tr></table></figure>
<h3 id="Channel_+_Selector"><a href="#Channel_+_Selector" class="headerlink" title="Channel + Selector"></a>Channel + Selector</h3><p>Accessing the channel + selector from the SelectionKey is trivial. Here is how itâ€™s done:<br>ä»SelectionKeyä¸­è·å¾—channelå’Œselectorå¾ˆç®€å•ï¼Œåƒè¿™æ ·å°±å¥½:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Channel  channel  = selectionKey.channel();</span><br><span class="line">Selector selector = selectionKey.selector();</span><br></pre></td></tr></table></figure>
<h3 id="u9644_u52A0_u5BF9_u8C61"><a href="#u9644_u52A0_u5BF9_u8C61" class="headerlink" title="é™„åŠ å¯¹è±¡"></a>é™„åŠ å¯¹è±¡</h3><p>å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡é™„åŠ åˆ°SelectionKeyä¸Šã€‚è¿™æ˜¯ä¸ªè¯†åˆ«ç»™å®šçš„channelçš„ç®€ä¾¿æ–¹æ³•ï¼Œè¿˜å¯ä»¥é™„åŠ æ›´å¤šä¿¡æ¯ä¸Šå»ã€‚æ¯”å¦‚ï¼Œé™„åŠ ä¸ªä¸channelä¸€èµ·ä½¿ç”¨çš„bufferï¼Œæˆ–è€…èšåˆæ›´å¤šæ•°æ®çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">selectionKey.attach(theObject);</span><br><span class="line">Object attachedObj = selectionKey.attachment();</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥åœ¨æ³¨å†Œæ—¶é™„åŠ å¯¹è±¡ï¼Œåƒè¿™æ ·ï¼š </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SelectionKey key = channel.register(selector, SelectionKey.OP_READ, theObject);</span><br></pre></td></tr></table></figure>
<h2 id="u901A_u8FC7Selector_u9009_u62E9Channel"><a href="#u901A_u8FC7Selector_u9009_u62E9Channel" class="headerlink" title="é€šè¿‡Selectoré€‰æ‹©Channel"></a>é€šè¿‡Selectoré€‰æ‹©Channel</h2><p>ä¸€æ—¦å‘Selectoræ³¨å†Œäº†ä¸€ä¸ªæˆ–å¤šä¸ªchannelï¼Œå°±å¯ä»¥è°ƒç”¨ä»»ä¸€<code>select()</code>æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•è¿”å›é‚£äº›æ³¨å†Œæ—¶æ„Ÿå…´è¶£äº‹ä»¶ï¼ˆconnectï¼Œacceptï¼Œread æˆ–è€… writeï¼‰çš„channelã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ„Ÿå…´è¶£çš„channelå·²å¯¹è¯»æ•°æ®åšå¥½å‡†å¤‡ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨<code>select()</code>æ–¹æ³•ä»¥åï¼Œå°±ä¼šè¿”å›å¯¹è¯»å°±ç»ªçš„channelã€‚</p>
<p>selectæ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§:</p>
<ol>
<li><code>int select()</code></li>
<li><code>int select(long timeout)</code></li>
<li><code>int selectNow()</code></li>
</ol>
<p><code>select()</code> é˜»å¡ç›´åˆ°è‡³å°‘ä¸€ä¸ªchannelå·²ç»å¯¹ç›‘å¬äº‹ä»¶åšå¥½å‡†å¤‡ã€‚</p>
<p><code>select(long timeout)</code> å’Œ<code>select()</code>ä¸€æ ·ï¼Œé™¤äº†æœ€é•¿ä¼šé˜»å¡timeoutæ¯«ç§’(å‚æ•°)ã€‚</p>
<p><code>selectNow()</code> ä¸ä¼šé˜»å¡ï¼Œæ— è®ºchannelæœ‰æ²¡æœ‰å‡†å¤‡å¥½éƒ½ä¼šç›´æ¥è¿”å›ã€‚ï¼ˆæ²¡æœ‰å‡†å¤‡å¥½çš„ç›´æ¥è¿”å›0ï¼‰</p>
<p>select()æ–¹æ³•è¿”å›çš„intå€¼è¡¨ç¤ºæœ‰å¤šå°‘é€šé“å·²ç»å°±ç»ªã€‚äº¦å³ï¼Œè‡ªä¸Šæ¬¡è°ƒç”¨select()æ–¹æ³•åæœ‰å¤šå°‘é€šé“å˜æˆå°±ç»ªçŠ¶æ€ã€‚å¦‚æœè°ƒç”¨select()æ–¹æ³•ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªé€šé“å˜æˆå°±ç»ªçŠ¶æ€ï¼Œè¿”å›äº†1ï¼Œè‹¥å†æ¬¡è°ƒç”¨select()æ–¹æ³•ï¼Œå¦‚æœå¦ä¸€ä¸ªé€šé“å°±ç»ªäº†ï¼Œå®ƒä¼šå†æ¬¡è¿”å›1ã€‚å¦‚æœå¯¹ç¬¬ä¸€ä¸ªå°±ç»ªçš„channelæ²¡æœ‰åšä»»ä½•æ“ä½œï¼Œç°åœ¨å°±æœ‰ä¸¤ä¸ªå°±ç»ªçš„é€šé“ï¼Œä½†åœ¨æ¯æ¬¡select()æ–¹æ³•è°ƒç”¨ä¹‹é—´ï¼Œåªæœ‰ä¸€ä¸ªé€šé“å°±ç»ªäº†ã€‚</p>
<h3 id="selectedKeys_28_29"><a href="#selectedKeys_28_29" class="headerlink" title="selectedKeys()"></a>selectedKeys()</h3><p>è°ƒç”¨select()æ–¹æ³•åï¼Œä¸€æ—¦å…¶è¿”å›å€¼è¡¨æ˜ä¸€ä¸ªæˆ–å¤šä¸ªchannelå°±ç»ªï¼Œå°±å¯ä»¥é€šè¿‡<code>selectedKeys()</code>æ–¹æ³•è®¿é—®ã€selected key setã€ï¼ˆå·²é€‰æ‹©é”®é›†ï¼‰ä¸­çš„å°±ç»ªchannelã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨<code>Channel.register()</code>å‘selectoræ³¨å†Œchannelä»¥åè¿”å›<code>SelectionKey</code>å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å°±ä»£è¡¨äº†æ³¨å†Œåˆ°selectorçš„channelã€‚å¯ä»¥é€šè¿‡SelectionKeyå¯¹è±¡çš„<code>electedKeySet()</code>æ–¹æ³•è·å¾—è¿™äº›å¯¹è±¡ã€‚</p>
<p>éå†å·²é€‰æ‹©çš„é”®é›†è·å¾—å°±ç»ªçš„channelï¼š </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();</span><br><span class="line"></span><br><span class="line">Iterator&lt;SelectionKey&gt; keyIterator = selectedKeys.iterator();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(keyIterator.hasNext()) &#123;</span><br><span class="line">    </span><br><span class="line">    SelectionKey key = keyIterator.next();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(key.isAcceptable()) &#123;</span><br><span class="line">        <span class="comment">// a connection was accepted by a ServerSocketChannel.</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isConnectable()) &#123;</span><br><span class="line">        <span class="comment">// a connection was established with a remote server.</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isReadable()) &#123;</span><br><span class="line">        <span class="comment">// a channel is ready for reading</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isWritable()) &#123;</span><br><span class="line">        <span class="comment">// a channel is ready for writing</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    keyIterator.remove();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå¾ªç¯éå†å·²é€‰æ‹©é”®é›†ä¸­çš„æ¯ä¸ªé”®ï¼Œå¹¶æ£€æµ‹å„ä¸ªé”®æ‰€å¯¹åº”çš„é€šé“çš„å°±ç»ªäº‹ä»¶ã€‚</p>
<p>æ³¨æ„åœ¨æ¯æ¬¡éå†åè°ƒç”¨<code>keyIterator.remove()</code>æ–¹æ³•ã€‚Selectorä¸ä¼šä»å·²é€‰æ‹©é”®é›†ä¸­è‡ªåŠ¨åˆ é™¤SelectionKeyçš„å®ä¾‹ã€‚åœ¨å¤„ç†å®Œchannelåå¿…é¡»è°ƒç”¨æ­¤æ–¹æ³•ã€‚ä¸‹æ¬¡channelä¼šå‡†å¤‡å¥½ï¼ŒSelectorå°†å…¶é‡æ–°æ·»åŠ åˆ°å·²é€‰æ‹©çš„é”®é›†ä¸­ã€‚ ï¼ˆåŸæ–‡ï¼šNotice the keyIterator.remove() call at the end of each iteration. The Selector does not remove the SelectionKey instances from the selected key set itself. You have to do this, when you are done processing the channel. The next time the channel becomes â€œreadyâ€ the Selector will add it to the selected key set again.ï¼‰</p>
<p>è°ƒç”¨<code>SelectionKey.channel()</code>æ–¹æ³•ä¼šè¿”å›éœ€è¦å¤„ç†çš„channelã€‚æ¯”å¦‚ServerSocketChannelæˆ–è€…SocketChannelç­‰ã€‚</p>
<h3 id="wakeUp_28_29_u65B9_u6CD5"><a href="#wakeUp_28_29_u65B9_u6CD5" class="headerlink" title="wakeUp()æ–¹æ³•"></a>wakeUp()æ–¹æ³•</h3><p>æŸä¸ªçº¿ç¨‹è°ƒç”¨select()æ–¹æ³•ä»¥åä¼šè¢«é˜»å¡ï¼Œå³ä½¿æ²¡æœ‰å°±ç»ªçš„channelï¼Œä¹Ÿå¯ä»¥ä½¿å…¶ä»select()æ–¹æ³•è¿”å›ã€‚åªè¦è®©å…¶å®ƒçº¿ç¨‹åœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨select()æ–¹æ³•çš„é‚£ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨Selector.wakeup()æ–¹æ³•å³å¯ã€‚é˜»å¡åœ¨select()æ–¹æ³•ä¸Šçš„çº¿ç¨‹ä¼šç«‹é©¬è¿”å›ã€‚</p>
<p>å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹è°ƒç”¨äº†wakeup()æ–¹æ³•ï¼Œä½†å½“å‰æ²¡æœ‰çº¿ç¨‹é˜»å¡åœ¨select()æ–¹æ³•ä¸Šï¼Œä¸‹ä¸ªè°ƒç”¨select()æ–¹æ³•çš„çº¿ç¨‹ä¼šç«‹å³â€œé†’æ¥ï¼ˆwake upï¼‰â€ã€‚</p>
<h3 id="close_28_29_u65B9_u6CD5"><a href="#close_28_29_u65B9_u6CD5" class="headerlink" title="close()æ–¹æ³•"></a>close()æ–¹æ³•</h3><p>ç”¨å®ŒSelectoråè°ƒç”¨å…¶close()æ–¹æ³•ä¼šå…³é—­è¯¥Selectorï¼Œä¸”ä½¿æ³¨å†Œåˆ°è¯¥Selectorä¸Šçš„æ‰€æœ‰SelectionKeyå®ä¾‹æ— æ•ˆã€‚é€šé“æœ¬èº«å¹¶ä¸ä¼šå…³é—­ã€‚</p>
<h2 id="u5B8C_u6574_u7684Selector_u793A_u4F8B"><a href="#u5B8C_u6574_u7684Selector_u793A_u4F8B" class="headerlink" title="å®Œæ•´çš„Selectorç¤ºä¾‹"></a>å®Œæ•´çš„Selectorç¤ºä¾‹</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„selectorä¾‹å­ï¼Œopen,register,ç›‘å¬ç­‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Selector selector = Selector.open();</span><br><span class="line"></span><br><span class="line">channel.configureBlocking(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">SelectionKey key = channel.register(selector, SelectionKey.OP_READ);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> readyChannels = selector.select();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(readyChannels == <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();</span><br><span class="line"></span><br><span class="line">  Iterator&lt;SelectionKey&gt; keyIterator = selectedKeys.iterator();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(keyIterator.hasNext()) &#123;</span><br><span class="line"></span><br><span class="line">    SelectionKey key = keyIterator.next();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(key.isAcceptable()) &#123;</span><br><span class="line">        <span class="comment">// a connection was accepted by a ServerSocketChannel.</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isConnectable()) &#123;</span><br><span class="line">        <span class="comment">// a connection was established with a remote server.</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isReadable()) &#123;</span><br><span class="line">        <span class="comment">// a channel is ready for reading</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key.isWritable()) &#123;</span><br><span class="line">        <span class="comment">// a channel is ready for writing</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    keyIterator.remove();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/11/16/Java-NIO-Selector/" data-id="cj03kfo31003euruqitviooaj" class="article-share-link" data-share="baidu" data-title="Java NIO Selector">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/11/16/Java-NIO-Selector/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-Channel-to-Channel-Transfers" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/10/Java-NIO-Channel-to-Channel-Transfers/" class="article-date">
  <time datetime="2016-11-10T03:05:11.000Z" itemprop="datePublished">2016-11-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/10/Java-NIO-Channel-to-Channel-Transfers/">Java NIO Channelä¹‹é—´çš„æ•°æ®ä¼ è¾“</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ï¼š<a href="http://tutorials.jenkov.com/java-nio/channel-to-channel-transfers.html" target="_blank" rel="external">http://tutorials.jenkov.com/java-nio/channel-to-channel-transfers.html</a></p>
<p>åœ¨Java NIO ä¸­channelä¹‹é—´å¯ä»¥ç›´æ¥ç›¸äº’ä¼ è¾“ã€‚æ¯”å¦‚ä¸€ä¸ªFileChannelç±»å‹çš„channelï¼ŒFileChannelç±»æä¾›<code>transferTo()</code>å’Œ<code>transferFrom()</code>ä¸¤ä¸ªæ–¹æ³•åšè¿™ä¸ªäº‹æƒ…ã€‚</p>
<h2 id="transferFrom_28_29"><a href="#transferFrom_28_29" class="headerlink" title="transferFrom()"></a>transferFrom()</h2><p><code>FileChannel.transferFrom()</code>æ–¹æ³•å°†ä¸€ä¸ªchannelçš„æ•°æ®ä¼ å…¥FileChannelã€‚</p>
<p>ä»£ç ğŸŒ°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">RandomAccessFile fromFile = <span class="keyword">new</span> RandomAccessFile(<span class="string">"fromFile.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">FileChannel      fromChannel = fromFile.getChannel();</span><br><span class="line"></span><br><span class="line">RandomAccessFile toFile = <span class="keyword">new</span> RandomAccessFile(<span class="string">"toFile.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">FileChannel      toChannel = toFile.getChannel();</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> position = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">long</span> count    = fromChannel.size();</span><br><span class="line"></span><br><span class="line">toChannel.transferFrom(fromChannel, position, count);</span><br></pre></td></tr></table></figure>
<p>positionå‚æ•°ç¡®å®šç›®æ ‡æ–‡ä»¶çš„ä¼ è¾“åˆå§‹ä½ç½®ï¼Œcountå‚æ•°ç¡®å®šä¼ è¾“çš„æœ€å¤§æ•°é‡ã€‚channelä¸­çš„å­—èŠ‚æ•°è‹¥æ˜¯å°‘äºcountï¼Œå°±è¯»å–å…¨éƒ¨å­—èŠ‚ã€‚<br>å¦å¤–ï¼ŒSocketChannelä¼ è¾“çš„æ˜¯å…¶å†…éƒ¨æ­¤æ—¶æ­¤å¤„çš„å°±ç»ªçš„æ•°æ®ï¼ˆSocketChannelåç»­å¯èƒ½è¿˜ä¼šæœ‰æ›´å¤šçš„å¯ç”¨æ•°æ®ï¼‰ã€‚å› æ­¤ï¼Œä»SocketChannelä¼ è¾“æ•°æ®æ—¶ï¼Œæœ‰å¯èƒ½ä¸èƒ½æŠŠå…¨éƒ¨çš„è¯·æ±‚æ•°æ®ï¼ˆä¸è¶³countçš„æ•°æ®ï¼‰éƒ½ä¼ å…¥FileChannelä¸­ã€‚</p>
<h2 id="transferTo_28_29"><a href="#transferTo_28_29" class="headerlink" title="transferTo()"></a>transferTo()</h2><p><code>transferTo()</code>æ–¹æ³•å°†FileChannelæ•°æ®ä¼ å…¥å…¶ä»–çš„channelä¸­ã€‚</p>
<p>ä»£ç ğŸŒ°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">RandomAccessFile fromFile = <span class="keyword">new</span> RandomAccessFile(<span class="string">"fromFile.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">FileChannel      fromChannel = fromFile.getChannel();</span><br><span class="line"></span><br><span class="line">RandomAccessFile toFile = <span class="keyword">new</span> RandomAccessFile(<span class="string">"toFile.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">FileChannel      toChannel = toFile.getChannel();</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> position = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">long</span> count    = fromChannel.size();</span><br><span class="line"></span><br><span class="line">fromChannel.transferTo(position, count, toChannel);</span><br></pre></td></tr></table></figure>
<p>å’Œä¸Šé¢çš„ä¾‹å­å¾ˆç›¸ä¼¼ã€‚åŒºåˆ«åœ¨äºè°ƒç”¨æ–¹æ³•çš„FileChannelå¯¹è±¡ä¸ä¸€æ ·ã€‚</p>
<p>å…³äºSocketChannelçš„é—®é¢˜åœ¨transferTo()æ–¹æ³•ä¸­åŒæ ·å­˜åœ¨ã€‚SocketChannelä¼šä¸€ç›´ä¼ è¾“æ•°æ®ç›´åˆ°ç›®æ ‡bufferè¢«å¡«æ»¡ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/11/10/Java-NIO-Channel-to-Channel-Transfers/" data-id="cj03kfo38003ouruq0ua0awnd" class="article-share-link" data-share="baidu" data-title="Java NIO Channelä¹‹é—´çš„æ•°æ®ä¼ è¾“">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/11/10/Java-NIO-Channel-to-Channel-Transfers/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-Scatter-Gather" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/09/Java-NIO-Scatter-Gather/" class="article-date">
  <time datetime="2016-11-09T15:09:19.000Z" itemprop="datePublished">2016-11-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/09/Java-NIO-Scatter-Gather/">Java NIO Scatter / Gather</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ï¼š<a href="http://tutorials.jenkov.com/java-nio/scatter-gather.html" target="_blank" rel="external">http://tutorials.jenkov.com/java-nio/scatter-gather.html</a></p>
<p>Java NIO ä»ä¸€å¼€å§‹å°±å†…åµŒäº†scatter/gatherçš„æ”¯æŒã€‚scatter/gatheræ˜¯ä»channelä¸­è¯»å–å†™å…¥çš„æ“ä½œæ¦‚å¿µã€‚</p>
<p><strong>scatter</strong>ï¼šä»channelä¸­å°†æ•°æ®è¯»åˆ°å¤šä¸ªbuffersä¸­çš„æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œchannelçš„åˆ†æ•£å™¨å°†channelä¸­çš„æ•°æ®åˆ†æ•£åˆ°å¤šä¸ªbuffersã€‚</p>
<p><strong>gather</strong>ï¼šå°†å¤šä¸ªbuffersä¸­çš„æ•°æ®å†™å…¥ä¸€ä¸ªchannelä¸­çš„æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œchannelçš„æ”¶é›†å™¨ï¼Œå°†å¤šä¸ªbuffersä¸­çš„æ•°æ®æ”¶é›†åˆ°channelä¸­ã€‚</p>
<p>scatter/gatterç»å¸¸ç”¨äºéœ€è¦å°†ä¼ è¾“çš„æ•°æ®åˆ†å¼€å¤„ç†çš„åœºåˆã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªä¿¡æ¯åŒ…å«headå’Œbodyï¼Œä½ å¯èƒ½ä¼šå°†æ¶ˆæ¯ä½“å’Œæ¶ˆæ¯å¤´åˆ†æ•£åˆ°ä¸åŒçš„bufferä¸­ï¼Œè¿™æ ·ä½ å¯ä»¥æ–¹ä¾¿çš„å¤„ç†æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ã€‚</p>
<h2 id="Scattering_Reads"><a href="#Scattering_Reads" class="headerlink" title="Scattering Reads"></a>Scattering Reads</h2><p>Scattering Readsï¼Œå°†å•ä¸ªchannelä¸­çš„æ•°æ®è¯»åˆ°å¤šä¸ªbuffersä¸­ï¼Œä¸‹é¢æ˜¯åŸç†å›¾ç¤ºï¼š </p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/java-nio-scatter-read.png" alt="java-nio-scatter-read"></p>
<p>ä»£ç ğŸŒ°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ByteBuffer header = ByteBuffer.allocate(<span class="number">128</span>);</span><br><span class="line">ByteBuffer body   = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">ByteBuffer[] bufferArray = &#123; header, body &#125;;</span><br><span class="line">channel.read(bufferArray);</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„bufferé¦–å…ˆè¢«æ’å…¥åˆ°æ•°ç»„ï¼Œç„¶åå†å°†æ•°ç»„ä½œä¸ºchannel.read() çš„è¾“å…¥å‚æ•°ã€‚read()æ–¹æ³•æŒ‰ç…§bufferåœ¨æ•°ç»„ä¸­çš„é¡ºåºå°†ä»channelä¸­è¯»å–çš„æ•°æ®å†™å…¥åˆ°bufferï¼Œå½“ä¸€ä¸ªbufferè¢«å†™æ»¡åï¼Œchannelç´§æ¥ç€å‘å¦ä¸€ä¸ªbufferä¸­å†™ã€‚</p>
<p>Scattering Readsåœ¨ç§»åŠ¨ä¸‹ä¸€ä¸ªbufferå‰ï¼Œå¿…é¡»å¡«æ»¡å½“å‰çš„bufferï¼Œè¿™ä¹Ÿæ„å‘³ç€å®ƒä¸é€‚ç”¨äºåŠ¨æ€å¤§å°æ¶ˆæ¯ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå­˜åœ¨æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼Œæ¶ˆæ¯å¤´å¿…é¡»å®Œæˆå¡«å……ï¼ˆä¾‹å¦‚å¡«æ»¡128byteï¼‰ï¼ŒScattering Readsæ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<h2 id="Gathering_Writes"><a href="#Gathering_Writes" class="headerlink" title="Gathering Writes"></a>Gathering Writes</h2><p>Gathering Writesï¼šå°†å¤šä¸ªbuffersä¸­çš„æ•°æ®å†™å…¥å•ä¸ªchannelï¼Œä¸‹é¢æ˜¯åŸç†å›¾ç¤ºï¼š</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/java-nio-gather.png" alt="Gathering Write"></p>
<p>ä»£ç ğŸŒ°ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ByteBuffer header = ByteBuffer.allocate(<span class="number">128</span>);</span><br><span class="line">ByteBuffer body   = ByteBuffer.allocate(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//write data into buffers</span></span><br><span class="line">ByteBuffer[] bufferArray = &#123; header, body &#125;;</span><br><span class="line"></span><br><span class="line">channel.write(bufferArray);</span><br></pre></td></tr></table></figure></p>
<p>The array of buffers are passed into the write() method, which writes the buffersæ•°ç»„æ˜¯write()æ–¹æ³•çš„å…¥å‚ï¼Œwrite()æ–¹æ³•ä¼šæŒ‰ç…§bufferåœ¨æ•°ç»„ä¸­çš„é¡ºåºï¼Œå°†æ•°æ®å†™å…¥åˆ°channelï¼Œæ³¨æ„åªæœ‰positionå’Œlimitä¹‹é—´çš„æ•°æ®æ‰ä¼šè¢«å†™å…¥ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªbufferçš„å®¹é‡ä¸º128byteï¼Œä½†æ˜¯ä»…ä»…åŒ…å«58byteçš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™58byteçš„æ•°æ®å°†è¢«å†™å…¥åˆ°channelä¸­ã€‚å› æ­¤ä¸Scattering Readsç›¸åï¼ŒGathering Writesèƒ½è¾ƒå¥½çš„å¤„ç†åŠ¨æ€æ¶ˆæ¯ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/11/09/Java-NIO-Scatter-Gather/" data-id="cj03kfo32003guruqhn2z8feu" class="article-share-link" data-share="baidu" data-title="Java NIO Scatter / Gather">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/11/09/Java-NIO-Scatter-Gather/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-IntelliJ" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/18/IntelliJ/" class="article-date">
  <time datetime="2016-10-18T09:38:43.000Z" itemprop="datePublished">2016-10-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/18/IntelliJ/">IntelliJ ä½¿ç”¨è¯´æ˜</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h3 id="u5B89_u88C5"><a href="#u5B89_u88C5" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>Windowsä¸‹è½½åœ°å€ï¼š<a href="https://www.jetbrains.com/idea/download/#section=windows" target="_blank" rel="external">https://www.jetbrains.com/idea/download/#section=windows</a></p>
<p>ç‰ˆæœ¬é€‰æ‹©Ultimate</p>
<p>ä¸‹è½½çš„æ–‡ä»¶ç›´æ¥åŒå‡»ä¸€è·¯nextå®‰è£…å³å¯ã€‚å®‰è£…ç»“æŸä»¥åè¿è¡Œèµ·æ¥åï¼Œé€šè¿‡Serveræ–¹å¼ç ´è§£</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/%E7%A0%B4%E8%A7%A3.png" alt="ç ´è§£"></p>
<p><a href="http://idea.iteblog.com/key.php" target="_blank" rel="external">http://idea.iteblog.com/key.php</a></p>
<h3 id="u9879_u76EE_u5F15_u5165"><a href="#u9879_u76EE_u5F15_u5165" class="headerlink" title="é¡¹ç›®å¼•å…¥"></a>é¡¹ç›®å¼•å…¥</h3><p>ç ´è§£ä»¥åï¼Œä¸€è·¯é»˜è®¤å¯åŠ¨èµ·æ¥ã€‚å…ˆåˆ›å»ºä¸ªProjectï¼ŒIntellijé‡Œé¢çš„projectç›¸å½“äºworkplaceï¼Œå¯ä»¥å…ˆå»ºä¸€ä¸ªç©ºçš„projectçš„ï¼Œå°†é¡¹ç›®ä»£ç æ£€å‡ºåˆ°projecté‡Œé¢ï¼ˆä¹Ÿå¯ä»¥å°†åŸæœ‰çš„é¡¹ç›®copyåˆ°projectæ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœä¸æƒ³copyï¼Œç›´æ¥importä¹Ÿå¯ä»¥ï¼‰ï¼Œç„¶ååœ¨é‡Œé¢import module</p>
<p>æ£€å‡ºä»£ç åçš„æ•ˆæœï¼š<br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/checkout.png" alt="intellij-checkout"></p>
<p>importåçš„æ•ˆæœï¼š<br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/import1.png" alt="import1"><br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/import2.png" alt="import2"><br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/import3.png" alt="import3"><br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/import4.png" alt="import4"></p>
<h3 id="u914D_u7F6E"><a href="#u914D_u7F6E" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>intellijçš„æ‰€æœ‰é…ç½®ä¿¡æ¯éƒ½åœ¨ File-&gt;Settingsé‡Œé¢ï¼Œè¯·è‡ªè¡Œæ‘¸ç´¢ã€‚</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/settings.png" alt="intellij-settings"></p>
<p>è¿™é‡Œè¯´è¯´å¸¸ç”¨çš„å‡ ä¸ªé…ç½®åœ¨å“ªé‡Œã€‚</p>
<p>1ã€é¡¹ç›®ç»“æ„</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/structure1.png" alt="structure1"></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/structure2.png" alt="structure2"><br>è¿™é‡Œé¢å¯ä»¥é…ç½®moduleçš„è¯­è¨€ç‰ˆæœ¬ï¼Œæ·»åŠ jdkï¼Œjarå¼•å…¥ç­‰</p>
<p>2ã€maven</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/maven1.png" alt="maven1"></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/maven2.png" alt="maven2"></p>
<p>3ã€Server</p>
<p>ä»¥tomcatä¸ºä¾‹</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/Server1.png" alt="tomcat1"></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/Server2.png" alt="tomcat2"></p>
<p>é…ç½®å¥½Serverçš„åŸºæœ¬ä¿¡æ¯ï¼Œå®Œæˆè¿™ä¸€æ­¥ä¿å­˜ï¼Œç„¶åæ·»åŠ å…·ä½“çš„Server</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/Server3.png" alt="tomcat3"></p>
<p>æ·»åŠ æœ¬åœ°Serverï¼ŒServeræ ‡ç­¾é¡µæ›´æ”¹ç«¯å£ç­‰é…ç½®ä¿¡æ¯</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/Server4.png" alt="tomcat4"></p>
<p>Deploymenté‡Œé¢éƒ¨ç½²waråŒ…ï¼Œç‚¹å‡»åŠ å·ï¼Œé€‰æ‹©</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/Server5.png" alt="tomcat5"></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/Server6.png" alt="tomcat6"></p>
<h3 id="u5916_u89C2_u5B57_u4F53_u6837_u5F0F_u4FEE_u6539"><a href="#u5916_u89C2_u5B57_u4F53_u6837_u5F0F_u4FEE_u6539" class="headerlink" title="å¤–è§‚å­—ä½“æ ·å¼ä¿®æ”¹"></a>å¤–è§‚å­—ä½“æ ·å¼ä¿®æ”¹</h3><p>é€šè¿‡File-&gt;Import Settingå¯ä»¥ç›´æ¥å¯¼å…¥Intellijçš„é…ç½®ä¿¡æ¯ã€‚æˆ‘è¿™é‡Œæœ‰ä¸ªjaråŒ…ï¼Œç›´æ¥å¯¼å…¥å³å¯</p>
<p>jaråœ°å€ï¼š<a href="https://pan.baidu.com/s/1kU6DxZL" target="_blank" rel="external">https://pan.baidu.com/s/1kU6DxZL</a></p>
<p>å¯¼å…¥é‡å¯å³å¯ï¼Œè°ƒæ•´äº†å­—ä½“å¤§å°ï¼Œæ–‡ä»¶æ³¨é‡Šæ¨¡æ¿ï¼Œé»˜è®¤UTF-8ï¼Œä½¿ç”¨äº†sublimeç±»ä¼¼çš„ä¸»é¢˜ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/10/18/IntelliJ/" data-id="cj03kfo3o0048uruqmdjpme0x" class="article-share-link" data-share="baidu" data-title="IntelliJ ä½¿ç”¨è¯´æ˜">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/10/18/IntelliJ/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IntelliJ/">IntelliJ</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-gitcommands" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/18/gitcommands/" class="article-date">
  <time datetime="2016-10-18T08:38:01.000Z" itemprop="datePublished">2016-10-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/18/gitcommands/">git å¸¸ç”¨å‘½ä»¤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h3 id="u57FA_u672C_u547D_u4EE4"><a href="#u57FA_u672C_u547D_u4EE4" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><p>ä»£ç æ£€å‡ºï¼šgit clone åœ°å€</p>
<p>æ–‡ä»¶ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼šgit add readme.txt </p>
<p>æ–‡ä»¶æäº¤ï¼šgit commit -m â€œå¤‡æ³¨â€ </p>
<p>æŸ¥çœ‹å·¥ä½œåŒºå½“å‰çŠ¶æ€ï¼šgit status</p>
<p>æŸ¥çœ‹å·®å¼‚ï¼šgit diff æ–‡ä»¶å</p>
<p>æŸ¥çœ‹å†å²ï¼šgit log â€“pretty=oneline</p>
<p>æŸ¥çœ‹å†å²æäº¤commit idï¼šgit log â€“pretty=oneline â€“abbrev-commit</p>
<p>æ¢å¤å½“å‰ç‰ˆæœ¬ï¼šgit reset â€“hard HEAD</p>
<p>æ¢å¤ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼šgit reset â€“hard HEAD^<br>ï¼ˆä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^^ï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ª^æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆHEAD~100ï¼‰</p>
<p>æ¢å¤æŒ‡å®šç‰ˆæœ¬ï¼šgit reset â€“hard 3628164</p>
<p>æŸ¥çœ‹å‘½ä»¤å†å²ï¼šgit reflog</p>
<p>æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“åŒºåˆ«ï¼šgit diff HEAD â€“ readme.txt</p>
<p>æ’¤é”€ä¿®æ”¹ï¼šgit checkout â€“ readme.txt</p>
<p>æ’¤é”€ç¼“å­˜åŒºæ–‡ä»¶ï¼šgit reset HEAD readme.txt</p>
<p>åˆ é™¤æ–‡ä»¶ï¼šgit rm test.txt</p>
<h3 id="u5206_u652F_u547D_u4EE4"><a href="#u5206_u652F_u547D_u4EE4" class="headerlink" title="åˆ†æ”¯å‘½ä»¤"></a>åˆ†æ”¯å‘½ä»¤</h3><p>æŸ¥çœ‹åˆ†æ”¯ï¼šgit branch</p>
<p>åˆ›å»ºåˆ†æ”¯ï¼šgit branch <name></name></p>
<p>åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout <name></name></p>
<p>åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b <name></name></p>
<p>æ¨é€è¿œç¨‹åˆ†æ”¯ï¼šgit push origin <name></name></p>
<p>åˆ›å»ºè¿œç¨‹åˆ†æ”¯ï¼šgit checkout -b dev origin/dev</p>
<p>git checkout -b paytest_20151202_online origin/paytest_20151202_online</p>
<p>åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge <name></name></p>
<p>åˆå¹¶åˆ†æ”¯ç¦ç”¨Fast forwardï¼šgit merge â€“no-ff -m â€œå¤‡æ³¨â€ dev</p>
<p>åˆ é™¤åˆ†æ”¯ï¼šgit branch -d <name></name></p>
<p>åˆ é™¤è¿œç¨‹åˆ†æ”¯ï¼šgit push origin â€“delete <branchname></branchname></p>
<p>å¼ºåˆ¶åˆ é™¤åˆ†æ”¯ï¼šgit branch -D <name></name></p>
<p>æŸ¥çœ‹åˆ†æ”¯å†å²ï¼šgit log â€“graph â€“pretty=oneline â€“abbrev-commit</p>
<p>åˆ†æ”¯åˆå¹¶å›¾ï¼šgit log â€“graph</p>
<p>å‚¨è—å·¥ä½œåŒºï¼šgit stash</p>
<p>æŸ¥çœ‹å‚¨è—çš„å·¥ä½œåŒºï¼šgit stash list</p>
<p>æ¢å¤å¹¶åˆ é™¤å‚¨è—å·¥ä½œåŒºï¼šgit stash pop</p>
<p>æ¢å¤æŒ‡å®šå·¥ä½œåŒºï¼šgit stash apply stash@{0}</p>
<p>æ¢å¤å‚¨è—å·¥ä½œåŒºï¼šgit stash apply</p>
<p>åˆ é™¤å‚¨è—å·¥ä½œåŒºï¼šgit stash drop</p>
<p>æŸ¥è¯¢è¿œç¨‹åº“è¯¦ç»†ä¿¡æ¯ï¼šgit remote -v</p>
<p>æ¨é€åˆ†æ”¯ï¼šgit push origin dev</p>
<p>æŠ“å–æœ€æ–°æ–‡ä»¶ï¼šgit pull åˆ†æ”¯å</p>
<p>å–è¿œç¨‹åˆ†æ”¯ï¼šgit pull origin åˆ†æ”¯å</p>
<p>æŒ‡å®šåˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯é“¾æ¥ï¼šgit branch â€“set-upstream dev origin/dev</p>
<h3 id="u6807_u7B7E_u547D_u4EE4"><a href="#u6807_u7B7E_u547D_u4EE4" class="headerlink" title="æ ‡ç­¾å‘½ä»¤"></a>æ ‡ç­¾å‘½ä»¤</h3><p>åˆ›å»ºæ ‡ç­¾ï¼šgit tag v1.0</p>
<p>åˆ é™¤æœ¬åœ°æ ‡ç­¾ï¼šgit tag -d v0.1</p>
<p>åˆ é™¤è¿œç¨‹æ ‡ç­¾ï¼šgit push origin :refs/tags0.9</p>
<p>åˆ é™¤è¿œç¨‹æ ‡ç­¾ï¼šgit push origin â€“delete tag <tagname></tagname></p>
<p>æŸ¥çœ‹æ ‡ç­¾ï¼šgit tag</p>
<p>æŒ‡å®šcommit idåˆ›å»ºæ ‡ç­¾ï¼šgit tag v0.9 6224937</p>
<p>æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼šgit tag -a <tagname> -m â€œblablablaâ€¦â€</tagname></p>
<p>å¯ä»¥ç”¨PGPç­¾åæ ‡ç­¾ï¼šgit tag -s <tagname> -m â€œblablablaâ€¦â€</tagname></p>
<p>æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ï¼šgit show æ ‡ç­¾å</p>
<p>æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ï¼šgit push origin v1.0</p>
<p>æ¨é€æ‰€æœ‰æ ‡ç­¾åˆ°è¿œç¨‹ï¼šgit push origin â€“tags</p>
<h3 id="u5176_u4ED6"><a href="#u5176_u4ED6" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>é…ç½®åˆ«åï¼šgit config â€“global alias.st status</p>
<p>åœ¨Gitå·¥ä½œåŒºçš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„.gitignoreæ–‡ä»¶ï¼Œç„¶åæŠŠè¦å¿½ç•¥çš„æ–‡ä»¶åå¡«è¿›å»ï¼ŒGitå°±ä¼šè‡ªåŠ¨å¿½ç•¥è¿™äº›æ–‡ä»¶ã€‚</p>
<p>æ’¤éŠ·git add . =&gt; git rm -r â€“cached .</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/10/18/gitcommands/" data-id="cj03kfo17000puruq50lzugov" class="article-share-link" data-share="baidu" data-title="git å¸¸ç”¨å‘½ä»¤">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/10/18/gitcommands/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-docker-jenkins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/17/docker-jenkins/" class="article-date">
  <time datetime="2016-10-17T08:44:51.000Z" itemprop="datePublished">2016-10-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/17/docker-jenkins/">javaåº”ç”¨ç»“åˆJenkinsï¼Œdockeréƒ¨ç½²åˆ°Kubernetes</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h3 id="Jenkins_u5B89_u88C5"><a href="#Jenkins_u5B89_u88C5" class="headerlink" title="Jenkinså®‰è£…"></a>Jenkinså®‰è£…</h3><p>1ã€ä¸‹è½½Jenkins waråŒ…å®‰è£…ï¼Œä¸‹è½½åœ°å€ <a href="/jenkins.io">jenkins.io</a>ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯Jenkins2.24ç‰ˆæœ¬</p>
<p>2ã€å¯åŠ¨Jenkins</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JENKINS_HOME=~/.jenkins java -jar ~/Downloads/jenkins-<span class="number">2.24</span>.war --httpPort=<span class="number">9090</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨åï¼Œæ—¥å¿—ä¼šæç¤º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*************************************************************&#10;*************************************************************&#10;*************************************************************&#10; &#10;Jenkins initial setup is required. An admin user has been created and a password generated.&#10;Please use the following password to proceed to installation:&#10; &#10;3521fbc3d40448efa8942f8e464b2dd9&#10; &#10;This may also be found at: /Users/arungupta/.jenkins/secrets/initialAdminPassword&#10; &#10;*************************************************************&#10;*************************************************************&#10;*************************************************************</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®localhost:9090ï¼Œè¾“å…¥ä¸Šé¢æç¤ºçš„å¯†ç ï¼Œç„¶åæ ¹æ®æç¤ºï¼Œå®‰è£…æ¨èçš„æ’ä»¶ï¼Œå¹¶åˆ›å»ºç”¨æˆ·</p>
<h3 id="Jenkins_u63D2_u4EF6_u5B89_u88C5"><a href="#Jenkins_u63D2_u4EF6_u5B89_u88C5" class="headerlink" title="Jenkinsæ’ä»¶å®‰è£…"></a>Jenkinsæ’ä»¶å®‰è£…</h3><p>1ã€mavené…ç½®<br>åœ¨ ç³»ç»Ÿç®¡ç†-&gt;Global Tool Configuration-&gt;Maven ä¸­é…ç½®Mavenä¿¡æ¯<br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/jenkis-maven3.png" alt="maven3"></p>
<p>2ã€å…¶ä»–æ’ä»¶å®‰è£…<br>åœ¨ ç³»ç»Ÿç®¡ç†-&gt;ç®¡ç†æ’ä»¶-&gt;å¯é€‰æ’ä»¶ä¸­æœç´¢ docker pipe ï¼Œé€‰æ‹©CloudBees Docker Pipelineè¿›è¡Œå®‰è£…ï¼Œå®‰è£…åé‡å¯Jenkins</p>
<h3 id="u521B_u5EFAJenkins_u4EFB_u52A1"><a href="#u521B_u5EFAJenkins_u4EFB_u52A1" class="headerlink" title="åˆ›å»ºJenkinsä»»åŠ¡"></a>åˆ›å»ºJenkinsä»»åŠ¡</h3><p>æ–°å»ºä»»åŠ¡docker-pipeline</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/docker-pipeline.png" alt="docker-pipeline"></p>
<p>é€‰æ‹©Pipelineåï¼Œç‚¹å‡»Okåå¯¹ä»»åŠ¡è¿›è¡Œé…ç½®ã€‚é…ç½®é¡µä¸­ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œè®¾ç½®ã€‚éƒ½æ¯”è¾ƒç®€å•ä¸€çœ‹å°±çŸ¥é“ã€‚æˆ‘è¿™é‡Œæµ‹è¯•çš„æ˜¯ä»£ç SCMä½¿ç”¨çš„SVNï¼Œå†Pipelineé¡¹é€‰æ‹©Pipeline script from scmè¿›è¡Œå¦‚ä¸‹è®¾ç½®</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/pipeline-from-scm.png" alt="pipeline-from-scm"></p>
<p>å…¶ä¸­script pathä¸­è®¾ç½®çš„Jenkinsfileä¸ºå…·ä½“çš„æ„å»ºæ­¥éª¤ï¼Œåœ¨é¡¹ç›®åœ°å€çš„ç›®å½•ä¸­ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥é€‰æ‹© Pipeline scriptï¼Œç›´æ¥åœ¨è„šæœ¬ä¸­è®¾ç½®æ„å»ºæ­¥éª¤</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/pipeline-script.png" alt="pipeline-script"></p>
<p>è„šæœ¬ä¸­ä¸»è¦çš„å°±æ˜¯æ„å»ºæ­¥éª¤ï¼Œä»scmæ£€å‡ºé¡¹ç›®ï¼Œmvnæµ‹è¯•æ‰“åŒ…ï¼Œç”Ÿæˆdockeré•œåƒï¼Œå°†dockeré•œåƒä¸Šä¼ åˆ°é•œåƒä»“åº“ï¼Œç„¶åç™»å½•K8sçš„masterä¸Šï¼Œéƒ¨ç½²æ–°çš„é•œåƒåŒ…ã€‚</p>
<p>æ¥çœ‹çœ‹Jenkinsfileï¼Œé‡Œé¢æ˜¯å¦‚ä½•æè¿°ä¸Šé¢çš„æ­¥éª¤çš„ã€‚</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node &#123;&#10;    checkout scm&#10;    env.PATH = &#34;$&#123;tool &#39;Maven3&#39;&#125;/bin:$&#123;env.PATH&#125;&#34;&#10;    stage(&#39;Package&#39;) &#123;&#10;        dir(&#39;RpcServerSample&#39;) &#123;&#10;            sh &#39;mvn clean package -DskipTests&#39;&#10;        &#125;&#10;    &#125;&#10;&#10;    stage(&#39;Run Tests&#39;) &#123;&#10;        dir(&#39;RpcServerSample&#39;) &#123;&#10;                sh &#34;mvn test&#34;&#10;        &#125;&#10;    &#125;&#10;&#10;    stage(&#39;Build Image&#39;) &#123;&#10;        dir(&#39;RpcServerSample&#39;) &#123;&#10;            docker.build(&#34;daocloud.io/suqun/docker-jenkins-pipeline:v1&#34;).push()&#10;        &#125;&#10;    &#125;&#10;&#10;    stage(&#39;Deploy&#39;) &#123;&#10;        //&#26367;&#25442;rpcserver.yaml&#30340;&#38236;&#20687;&#29256;&#26412;&#21495;&#65292;&#24453;&#23436;&#25104;&#10;&#10;        dir(&#39;RpcServerSample&#39;) &#123;&#10;            //scp rpcserver.yaml &#21040; k8s&#30340;master&#19978;&#10;            sh &#39;sshpass -p vagrant scp rpcserver.yaml vagrant@192.168.1.10:/home/vagrant/rpcserver.yaml&#39;&#10;&#10;            //&#36828;&#31243;&#30331;&#24405;k8s&#38598;&#32676;master&#20027;&#26426;,&#26356;&#26032;&#38236;&#20687;&#65292;&#36825;&#37324;&#38754;&#35201;&#36827;&#34892;&#21028;&#26029;&#65292;&#31532;&#19968;&#27425;create&#10;            sh &#39;sshpass -p vagrant ssh vagrant@192.168.1.10 &#34;kubectl create -f /home/vagrant/rpcserver.yaml&#34;&#39;&#10;        &#125;&#10;    &#125;&#10;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>docker.buildè¯­å¥é€šè¿‡RpcServerSampleè·¯å¾„ä¸‹çš„Dockerfileåˆ›å»ºé•œåƒ</p>
<p>Dockerfile<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM daocloud.io/java:<span class="number">7</span></span><br><span class="line">MAINTAINER <span class="string">"Larry Su &lt;larrys@wicresoft.com&gt;"</span></span><br><span class="line">ADD target/RpcServerSample-<span class="number">1.0</span>-SNAPSHOT-jar-with-dependencies.jar /usr/src/myapp/RpcServerSample.jar</span><br><span class="line">WORKDIR /usr/src/myapp</span><br><span class="line">CMD [<span class="string">"java"</span>,<span class="string">"-jar"</span>, <span class="string">"RpcServerSample.jar"</span>]</span><br></pre></td></tr></table></figure></p>
<p>rpcserver.yamlæ˜¯K8sä¸­çš„Deploymentå’ŒService</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1&#10;kind: Service&#10;metadata:&#10;  name: rpcserversample&#10;  labels:&#10;    app: rpcserversample&#10;spec:&#10;  # if your cluster supports it, uncomment the following to automatically create&#10;  # an external load-balanced IP for the frontend service.&#10;  #type: NodePort&#10;  ports:&#10;    # the port that this service should serve on&#10;  - port: 9001&#10;  selector:&#10;    app: rpcserversample&#10;---&#10;apiVersion: extensions/v1beta1&#10;kind: Deployment&#10;metadata:&#10;  name: rpcserversample&#10;  # these labels can be applied automatically&#10;  # from the labels in the pod template if not set&#10;  labels:&#10;    app: rpcserversample&#10;spec:&#10;  # this replicas value is default&#10;  # modify it according to your case&#10;  replicas: 2&#10;  # selector can be applied automatically&#10;  # from the labels in the pod template if not set&#10;  # selector:&#10;  #   matchLabels:&#10;  #     app: guestbook&#10;  #     tier: frontend&#10;  template:&#10;    metadata:&#10;      labels:&#10;        app: rpcserversample&#10;    spec:&#10;      containers:&#10;      - name: rpcserversample&#10;        image: daocloud.io/suqun/rpcserversample:v1&#10;        resources:&#10;          requests:&#10;            cpu: 100m&#10;            memory: 100Mi&#10;        ports:&#10;        - containerPort: 80</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰äº›Jenkins pipelineæœ€ä½³å®è·µï¼Œå¯ä»¥å‚è€ƒ:<a href="http://www.weixinla.com/document/41174312.html" target="_blank" rel="external">Jenkinsç®¡é“æœ€ä½³å®è·µTop 10</a></p>
<p>è„šæœ¬å†™çš„æ¯”è¾ƒçƒ‚ï¼Œåªæ˜¯å¤§æ¦‚çš„æµç¨‹ï¼Œå¾…å®Œå–„ã€‚</p>
<h3 id="u6784_u5EFA"><a href="#u6784_u5EFA" class="headerlink" title="æ„å»º"></a>æ„å»º</h3><p>è¿›å…¥ä»»åŠ¡ï¼Œç‚¹å‡»ç«‹å³æ„å»ºåç»“æœå¦‚ä¸‹</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/Jenkins-build.png" alt="result"></p>
<p>ç„¶åå¯ä»¥ç™»å½•K8sé›†ç¾¤çš„masterä¸»æœºï¼Œé€šè¿‡<code>kubectl get po,svc</code> æ£€æŸ¥æ˜¯å¦éƒ¨ç½²æˆåŠŸã€‚</p>
<p>å‚è€ƒï¼š<a href="https://dzone.com/articles/deployment-pipeline-using-docker-jenkins-java-and" target="_blank" rel="external">Deployment Pipeline Using Docker, Jenkins, Java, and Couchbase</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/10/17/docker-jenkins/" data-id="cj03kfo1l001curuqbx65ohqo" class="article-share-link" data-share="baidu" data-title="javaåº”ç”¨ç»“åˆJenkinsï¼Œdockeréƒ¨ç½²åˆ°Kubernetes">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/10/17/docker-jenkins/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/K8s/">K8s</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dockerjavamicroservice4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/27/dockerjavamicroservice4/" class="article-date">
  <time datetime="2016-09-27T02:52:03.000Z" itemprop="datePublished">2016-09-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/27/dockerjavamicroservice4/">ä½¿ç”¨kubeadmåœ¨CentOS7ä¸Šå®‰è£…Kubernetesé›†ç¾¤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>Kubernetes1.4ç‰ˆæœ¬æä¾›kubeadmå‘½ä»¤è¿›è¡Œç®€åŒ–k8sé›†ç¾¤çš„å®‰è£…ï¼Œåªè¦ä½¿ç”¨2ä¸ªç®€å•å‘½ä»¤å°±å¯ä»¥å®Œæˆå®‰è£…ã€‚ å®‰è£…kubernetesä»¥åï¼Œä½¿ç”¨<code>kubeadm init</code>å¯åŠ¨masterï¼Œä½¿ç”¨<code>kubeadm joins</code>æŠŠnodeæ·»åŠ åˆ°é›†ç¾¤é‡Œã€‚ä¸‹é¢æ˜¯æ ¹æ®å®˜æ–¹åšå®¢<a href="http://kubernetes.io/docs/getting-started-guides/kubeadm/" target="_blank" rel="external">Installing Kubernetes on Linux with kubeadm</a>ç»ƒä¹ çš„è®°å½•ã€‚</p>
<h4 id="u4F7F_u7528vagrant_u521B_u5EFA_u4E24_u4E2Acentos7"><a href="#u4F7F_u7528vagrant_u521B_u5EFA_u4E24_u4E2Acentos7" class="headerlink" title="ä½¿ç”¨vagrantåˆ›å»ºä¸¤ä¸ªcentos7"></a>ä½¿ç”¨vagrantåˆ›å»ºä¸¤ä¸ªcentos7</h4><p>åœ¨k8s-centos7-clusteræ–‡ä»¶å¤¹ä¸‹åˆ›å»ºVagrantfileæ–‡ä»¶ã€‚Vagrantfileé…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line">boxes = [</span><br><span class="line">  &#123; <span class="symbol">:name</span> =&gt; <span class="symbol">:master</span>,<span class="symbol">:ip</span> =&gt; <span class="string">'192.168.1.20'</span>,<span class="symbol">:forward</span> =&gt; <span class="number">80</span>,<span class="symbol">:cpus</span> =&gt; <span class="number">1</span>,<span class="symbol">:mem</span> =&gt; <span class="number">1024</span>&#125;,</span><br><span class="line">  &#123; <span class="symbol">:name</span> =&gt; <span class="symbol">:node1</span>,<span class="symbol">:ip</span> =&gt; <span class="string">'192.168.1.21'</span>,<span class="symbol">:forward</span> =&gt; <span class="number">80</span>,<span class="symbol">:cpus</span> =&gt; <span class="number">1</span>,<span class="symbol">:mem</span> =&gt; <span class="number">1024</span>&#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line"><span class="constant">VAGRANTFILE_API_VERSION</span> = <span class="string">"2"</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Vagrant</span>.configure(<span class="constant">VAGRANTFILE_API_VERSION</span>) <span class="keyword">do</span> |config|</span><br><span class="line">    boxes.each <span class="keyword">do</span> |opts|</span><br><span class="line">        config.vm.define opts[<span class="symbol">:name</span>] <span class="keyword">do</span> |config|</span><br><span class="line">            config.vm.box       = <span class="string">"centos7"</span></span><br><span class="line">            config.vm.boot_timeout = <span class="number">360</span></span><br><span class="line">            config.ssh.username = <span class="string">"vagrant"</span></span><br><span class="line">            config.ssh.password = <span class="string">"vagrant"</span></span><br><span class="line">            config.vm.synced_folder <span class="string">"."</span>, <span class="string">"/vagrant"</span>, <span class="symbol">disabled:</span><span class="keyword">true</span></span><br><span class="line">            config.vm.network  <span class="string">"public_network"</span>, <span class="symbol">ip:</span> opts[<span class="symbol">:ip</span>]</span><br><span class="line">            <span class="comment">#config.vm.network "forwarded_port", guest: 80, host: 8080</span></span><br><span class="line">            config.vm.hostname = <span class="string">"%s.vagrant"</span> % opts[<span class="symbol">:name</span>].to_s</span><br><span class="line">            config.vm.provider <span class="string">"virtualbox"</span> <span class="keyword">do</span> |vb|</span><br><span class="line">                vb.customize [<span class="string">"modifyvm"</span>, <span class="symbol">:id</span>, <span class="string">"--cpus"</span>, opts[<span class="symbol">:cpus</span>] ] <span class="keyword">if</span> opts[<span class="symbol">:cpus</span>]</span><br><span class="line">                vb.customize [<span class="string">"modifyvm"</span>, <span class="symbol">:id</span>, <span class="string">"--memory"</span>, opts[<span class="symbol">:mem</span>] ] <span class="keyword">if</span> opts[<span class="symbol">:mem</span>]</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="comment">#config.vm.provision "shell", inline: $update_script</span></span><br><span class="line">            <span class="comment">#config.vm.provision "shell", path: opts[:provision] if opts[:provision]</span></span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>åœ¨Vagrantfileæ–‡ä»¶ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸¤ä¸ªCentOS7ç³»ç»Ÿï¼Œä¸€ä¸ªä½œä¸ºmasterï¼Œä¸€ä¸ªä½œä¸ºnode<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  k8s-centos7-cluster vagrant up</span><br><span class="line">Bringing machine <span class="string">'master'</span> up with <span class="string">'virtualbox'</span> provider...</span><br><span class="line">Bringing machine <span class="string">'node1'</span> up with <span class="string">'virtualbox'</span> provider...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>Okï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹åœ¨CentOS7ä¸­å®‰è£…k8sé›†ç¾¤</p>
<h4 id="u5B89_u88C5kubelet_u548Ckuebadm"><a href="#u5B89_u88C5kubelet_u548Ckuebadm" class="headerlink" title="å®‰è£…kubeletå’Œkuebadm"></a>å®‰è£…kubeletå’Œkuebadm</h4><p>åœ¨æ‰€æœ‰çš„æœºå­ä¸Šéƒ½å¿…é¡»å®‰è£…dockerï¼Œkubeletï¼Œkubectlï¼Œkubeadmï¼Œæ— è®ºæ˜¯masterè¿˜æ˜¯nodeã€‚å¹¶ä¸”ä½¿ç”¨rootæƒé™è¿›è¡Œå®‰è£…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  k8s-centos7-cluster vagrant ssh master <span class="comment">#è¾“å…¥å¯†ç ç™»å½•master</span></span><br><span class="line">[vagrant@master ~]$ </span><br><span class="line">[vagrant@master ~]$ sudo su -</span><br></pre></td></tr></table></figure>
<p>ç™»å½•masterï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cat &#60;&#60;EOF &#62; /etc/yum.repos.d/k8s.repo&#10;[kubelet]&#10;name=kubelet&#10;baseurl=http://files.rm-rf.ca/rpms/kubelet/&#10;enabled=1&#10;gpgcheck=0&#10;EOF&#10;# yum install docker kubelet kubeadm kubectl kubernetes-cni&#10;# systemctl enable docker &#38;&#38; systemctl start docker&#10;# systemctl enable kubelet &#38;&#38; systemctl start kubelet</span><br></pre></td></tr></table></figure>
<p>ç­‰å¾…ä¸‹è½½åå®‰è£…ã€‚<br>å®‰è£…å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨<code>systemctl status</code> æŸ¥çœ‹å®‰è£…å¥½çš„ç»„ä»¶æœåŠ¡çŠ¶æ€ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]<span class="comment"># systemctl status docker</span></span><br><span class="line">â— docker.service - Docker Application Container Engine</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Tue <span class="number">2016</span>-<span class="number">09</span>-<span class="number">27</span> <span class="number">04</span>:<span class="number">57</span>:<span class="number">44</span> UTC; <span class="number">41</span>s ago</span><br></pre></td></tr></table></figure>
<h4 id="u521D_u59CB_u5316master"><a href="#u521D_u59CB_u5316master" class="headerlink" title="åˆå§‹åŒ–master"></a>åˆå§‹åŒ–master</h4><p>åœ¨masterä¸Šè¿è¡Œæ§åˆ¶ç»„ä»¶ï¼ŒåŒ…å«etcdï¼ˆé›†ç¾¤çš„æ•°æ®åº“ï¼‰ï¼ŒAPI serverï¼ˆkubectl å®¢æˆ·ç«¯æ²Ÿé€šç”¨ï¼‰ã€‚è¿™äº›ç»„ä»¶éƒ½åœ¨podä¸­é€šè¿‡kubeletå¯åŠ¨è¿è¡Œã€‚<br>åˆå§‹åŒ–masterï¼Œé€‰æ‹©ä¸Šé¢å®ç°å®‰è£…è¿‡kubeletå’Œkubeadmçš„ä¸»æœºï¼Œç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]<span class="comment"># kubeadm init --use-kubernetes-version v1.4.0-beta.11</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œåï¼Œä¼šä¸‹è½½å®‰è£…é›†ç¾¤ç”¨çš„æ•°æ®åº“å’Œæ§åˆ¶ç»„ä»¶ï¼Œéœ€è¦ç­‰å¾…ä¸€äº›æ—¶é—´ï¼Œè¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;master/tokens&gt; generated token: <span class="string">"88958f.2068ff49c1675f8c"</span></span><br><span class="line">&lt;master/pki&gt; created keys and certificates <span class="keyword">in</span> <span class="string">"/etc/kubernetes/pki"</span></span><br><span class="line">&lt;util/kubeconfig&gt; created <span class="string">"/etc/kubernetes/kubelet.conf"</span></span><br><span class="line">&lt;util/kubeconfig&gt; created <span class="string">"/etc/kubernetes/admin.conf"</span></span><br><span class="line">&lt;master/apiclient&gt; created API client configuration</span><br><span class="line">&lt;master/apiclient&gt; created API client, waiting <span class="keyword">for</span> the control plane to become ready</span><br></pre></td></tr></table></figure>
<p>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/09/27/dockerjavamicroservice4/" data-id="cj03kfo1b000vuruq009jqyq5" class="article-share-link" data-share="baidu" data-title="ä½¿ç”¨kubeadmåœ¨CentOS7ä¸Šå®‰è£…Kubernetesé›†ç¾¤">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/09/27/dockerjavamicroservice4/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/K8s/">K8s</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dockerjavamicroservice3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/26/dockerjavamicroservice3/" class="article-date">
  <time datetime="2016-09-26T09:14:49.000Z" itemprop="datePublished">2016-09-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/26/dockerjavamicroservice3/">åŸºäºDockerçš„javaå¾®æœåŠ¡(ä¸‰) KubernetesæœåŠ¡å‘ç°ä¹‹ç¯å¢ƒå˜é‡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <ol>
<li>åˆ›å»ºä¸¤ä¸ªæœåŠ¡</li>
<li>å°†æœåŠ¡æ‰“åŒ…æˆé•œåƒ</li>
<li>k8sçš„service</li>
<li>k8sçš„deployment</li>
<li>ç®€å•æµ‹è¯•</li>
</ol>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/09/26/dockerjavamicroservice3/" data-id="cj03kfo1d000zuruq31nafp3y" class="article-share-link" data-share="baidu" data-title="åŸºäºDockerçš„javaå¾®æœåŠ¡(ä¸‰) KubernetesæœåŠ¡å‘ç°ä¹‹ç¯å¢ƒå˜é‡">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/09/26/dockerjavamicroservice3/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/K8s/">K8s</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dockerjavamicroservice2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/07/dockerjavamicroservice2/" class="article-date">
  <time datetime="2016-09-07T11:23:15.000Z" itemprop="datePublished">2016-09-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/07/dockerjavamicroservice2/">åŸºäºDockerçš„javaå¾®æœåŠ¡(äºŒ) CentOS7éƒ¨ç½²Kubernetesé›†ç¾¤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>æœ¬æ–‡ä¸»è¦å‚è€ƒç¾å›¢äº‘çš„<a href="https://mos.meituan.com/library/37/how-to-setup-k8s-cluster-on-CentOS7/" target="_blank" rel="external">åœ¨CentOS7ä¸Šéƒ¨ç½²Kubernetesé›†ç¾¤</a></p>
<h3 id="u6982_u8FF0"><a href="#u6982_u8FF0" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Kubernetes(k8s)æ˜¯Googleå¼€æºçš„å¤§è§„æ¨¡å®¹å™¨é›†ç¾¤ç®¡ç†ç³»ç»Ÿ, æœ¬æ–‡å°†åŸºäºCentOS7è‡ªå¸¦çš„Kubernetesç»„ä»¶ã€åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ç³»ç»Ÿetcdä»¥åŠFlannelå®ç°çš„overlayç½‘ç»œæ¥æ­å»ºä¸€ä¸ªç®€å•çš„k8sé›†ç¾¤ã€‚</p>
<h3 id="vagrant_u5B89_u88C5_u591A_u53F0CentOS7"><a href="#vagrant_u5B89_u88C5_u591A_u53F0CentOS7" class="headerlink" title="vagrantå®‰è£…å¤šå°CentOS7"></a>vagrantå®‰è£…å¤šå°CentOS7</h3><p>ä½¿ç”¨vagrantåˆ›å»ºå¤šä¸ªCentOS7è™šæ‹Ÿæœºç”¨äºé›†ç¾¤éƒ¨ç½²ã€‚vagrantçš„å®‰è£…éå¸¸ç®€å•,ç½‘ä¸Šä¸€å¤§å †æ•™ç¨‹ï¼Œå¯ä»¥å‚è€ƒ<a href="http://www.tuicool.com/articles/miE7vm6" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯1.8.5ç‰ˆæœ¬ã€‚åŒæ—¶è¿˜éœ€è¦ä¸‹è½½CentOSçš„boxæ–‡ä»¶,<br>ç”±äºboxæ–‡ä»¶éƒ½åœ¨å›½å¤–çš„ç½‘ç«™ä¸Šä¸‹è½½é€Ÿåº¦ç¼“æ…¢,å¯ä»¥ä»æˆ‘çš„äº‘ç›˜ä¸Šä¸‹è½½<a href="https://pan.baidu.com/s/1jI6T4EE" target="_blank" rel="external">CentOS-7-x86_64-Minimal-1511.box</a>ã€‚<br>æœ‰äº†boxæ–‡ä»¶å,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ box</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant add box CentOS-<span class="number">7</span>-x86_64-Minimal-<span class="number">1511</span>.box</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹vagrantå·²æ·»åŠ çš„box</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant box list</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå•å°CentOSå¾ˆç®€å•ï¼Œéœ€è¦ä¸‹é¢çš„æ­¥éª¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkidr centos7</span><br><span class="line"><span class="built_in">cd</span> centos7</span><br><span class="line">vagrant init</span><br><span class="line">vagrant up</span><br></pre></td></tr></table></figure>
<p>vagrant initä¼šåˆå§‹åŒ–ä¸€ä¸ªVagrantfileçš„æ–‡ä»¶ï¼ŒCentOSçš„é…ç½®éƒ½æ˜¯è¿™ä¸ªæ–‡ä»¶è®¾å®šçš„ã€‚è¿™é‡Œç»™å‡ºåˆ›å»ºå¤šå°centosçš„Vagrantfileé…ç½®ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- mode: ruby -*-</span></span><br><span class="line"><span class="comment"># vi: set ft=ruby :</span></span><br><span class="line"></span><br><span class="line">boxes = [</span><br><span class="line">  &#123; <span class="symbol">:name</span> =&gt; <span class="symbol">:master</span>,<span class="symbol">:ip</span> =&gt; <span class="string">'192.168.253.7'</span>,<span class="symbol">:cpus</span> =&gt; <span class="number">1</span>,<span class="symbol">:mem</span> =&gt; <span class="number">1024</span>&#125;,</span><br><span class="line">  &#123; <span class="symbol">:name</span> =&gt; <span class="symbol">:worker1</span>,<span class="symbol">:ip</span> =&gt; <span class="string">'192.168.253.8'</span>,<span class="symbol">:cpus</span> =&gt; <span class="number">1</span>,<span class="symbol">:mem</span> =&gt; <span class="number">1024</span>&#125;,</span><br><span class="line">  &#123; <span class="symbol">:name</span> =&gt; <span class="symbol">:worker2</span>,<span class="symbol">:ip</span> =&gt; <span class="string">'192.168.253.9'</span>,<span class="symbol">:cpus</span> =&gt; <span class="number">1</span>,<span class="symbol">:mem</span> =&gt; <span class="number">1024</span>&#125;,</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line"><span class="constant">VAGRANTFILE_API_VERSION</span> = <span class="string">"2"</span></span><br><span class="line"></span><br><span class="line"><span class="constant">Vagrant</span>.configure(<span class="constant">VAGRANTFILE_API_VERSION</span>) <span class="keyword">do</span> |config|</span><br><span class="line">    boxes.each <span class="keyword">do</span> |opts|</span><br><span class="line">        config.vm.define opts[<span class="symbol">:name</span>] <span class="keyword">do</span> |config|</span><br><span class="line">            config.vm.box       = <span class="string">"centos7"</span></span><br><span class="line">            config.vm.boot_timeout = <span class="number">360</span></span><br><span class="line">            config.ssh.username = <span class="string">"vagrant"</span></span><br><span class="line">            config.ssh.password = <span class="string">"vagrant"</span></span><br><span class="line">            config.vm.synced_folder <span class="string">"."</span>, <span class="string">"/vagrant"</span>, <span class="symbol">disabled:</span><span class="keyword">true</span></span><br><span class="line">            config.vm.network  <span class="string">"public_network"</span>, <span class="symbol">ip:</span> opts[<span class="symbol">:ip</span>]</span><br><span class="line">            config.vm.hostname = <span class="string">"%s.vagrant"</span> % opts[<span class="symbol">:name</span>].to_s</span><br><span class="line">            config.vm.provider <span class="string">"virtualbox"</span> <span class="keyword">do</span> |vb|</span><br><span class="line">                vb.customize [<span class="string">"modifyvm"</span>, <span class="symbol">:id</span>, <span class="string">"--cpus"</span>, opts[<span class="symbol">:cpus</span>] ] <span class="keyword">if</span> opts[<span class="symbol">:cpus</span>]</span><br><span class="line">                vb.customize [<span class="string">"modifyvm"</span>, <span class="symbol">:id</span>, <span class="string">"--memory"</span>, opts[<span class="symbol">:mem</span>] ] <span class="keyword">if</span> opts[<span class="symbol">:mem</span>]</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="comment">#config.vm.provision "shell", inline: $update_script</span></span><br><span class="line">            <span class="comment">#config.vm.provision "shell", path: opts[:provision] if opts[:provision]</span></span><br><span class="line">       <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªæ–‡ä»¶çš„ç›®å½•ä¸‹æ‰§è¡Œ<code>vagrant up</code>å°±å¯ä»¥åˆ›å»º3å°è™šæ‹Ÿæœºã€‚æˆ‘ä»¬æŠŠå…¶ä¸­masterä½œä¸ºk8sçš„MasterèŠ‚ç‚¹ï¼Œworker1ï¼Œworker2ä½œä¸ºk8sçš„NodeèŠ‚ç‚¹æ¥åˆ›å»ºk8sé›†ç¾¤ã€‚</p>
<h3 id="u73AF_u5883_u51C6_u5907"><a href="#u73AF_u5883_u51C6_u5907" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>master</th>
<th style="text-align:center">worker1</th>
<th style="text-align:center">worker2</th>
</tr>
</thead>
<tbody>
<tr>
<td>192.168.253.7</td>
<td style="text-align:center">192.168.253.8</td>
<td style="text-align:center">192.168.253.9</td>
</tr>
<tr>
<td>kubernetes</td>
<td style="text-align:center">ntpd</td>
<td style="text-align:center">ntpd</td>
</tr>
<tr>
<td>etcd</td>
<td style="text-align:center">flannel</td>
<td style="text-align:center">flannel</td>
</tr>
<tr>
<td>ntpd</td>
<td style="text-align:center">kubernetes</td>
<td style="text-align:center">kubernetes</td>
</tr>
</tbody>
</table>
<p>MasterèŠ‚ç‚¹ç¦ç”¨CentOS7è‡ªå¸¦é˜²ç«å¢™ï¼Œå®‰è£…kubernetesã€etcdã€ntpdç­‰è½¯ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop firewalld &amp;&amp; sudo systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line">sudo yum install -y kubernetes etcd ntp.x86_64</span><br></pre></td></tr></table></figure>
<p>NodeèŠ‚ç‚¹åŒæ ·ç¦ç”¨CentOS7è‡ªå¸¦é˜²ç«å¢™ï¼Œå®‰è£…kubernetesã€flannelã€ntpdç­‰è½¯ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop firewalld &amp;&amp; sudo systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line">sudo yum install -y ntp.x86_64 flannel kubernetes</span><br></pre></td></tr></table></figure>
<h3 id="Master_u914D_u7F6E"><a href="#Master_u914D_u7F6E" class="headerlink" title="Masteré…ç½®"></a>Masteré…ç½®</h3><p>ä¿®æ”¹etcdé…ç½®<code>/etc/etcd/etcd.conf</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ETCD_LISTEN_CLIENT_URLS=<span class="string">"http://0.0.0.0:2379"</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹kuberneteså…¨å±€é…ç½®<code>/etc/kubernetes/config</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KUBE_LOG_LEVEL=<span class="string">"--v=2"</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹kubernetes apiserverçš„é…ç½®<code>/etc/kubernetes/apiserver</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">KUBE_API_ADDRESS=<span class="string">"--address=0.0.0.0"</span></span><br><span class="line">KUBE_API_PORT=<span class="string">"--port=8080"</span></span><br><span class="line">KUBELET_PORT=<span class="string">"--kubelet_port=10250"</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨masterçš„ntpdã€etcdã€kube-apiserverã€kube-schedulerã€kube-controller-manageræœåŠ¡ï¼Œè®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ï¼Œå¹¶æŸ¥çœ‹å¯åŠ¨åçš„çŠ¶æ€ã€‚å¦‚æœæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯åŠ¨æˆåŠŸï¼Œé‚£ä¹ˆsudo systemctl status $SRVæ˜¾ç¤ºçš„ä¿¡æ¯åˆ™åŒ…å«Active: active (running)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> SRV <span class="keyword">in</span> ntpd etcd kube-apiserver kube-scheduler kube-controller-manager;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    sudo systemctl start <span class="variable">$SRV</span></span><br><span class="line">    sudo systemctl <span class="built_in">enable</span> <span class="variable">$SRV</span></span><br><span class="line">    sudo systemctl status <span class="variable">$SRV</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹etcdé…ç½®ï¼Œåœ¨è®¾å®šNodeä¸­flannelæ‰€ä½¿ç”¨çš„å­ç½‘èŒƒå›´ä¸º172.17.1.0~172.17.254.0ï¼ˆæ¯ä¸€ä¸ªNodeèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„flannelå­ç½‘ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">etcdctl mk /coreos.com/network/config <span class="string">'&#123;"Network":"172.17.0.0/16", "SubnetMin": "172.17.1.0", "SubnetMax": "172.17.254.0"&#125;'</span></span><br></pre></td></tr></table></figure>
<h3 id="Node_u914D_u7F6E"><a href="#Node_u914D_u7F6E" class="headerlink" title="Nodeé…ç½®"></a>Nodeé…ç½®</h3><p>ä¿®æ”¹NodeèŠ‚ç‚¹ä¸Šflannelçš„é…ç½®<code>/etc/sysconfig/</code>flanneldï¼Œè®¾å®šetcdçš„ç›¸å…³ä¿¡æ¯ï¼Œå…¶ä¸­192.168.253.7ä¸ºMasterçš„IPåœ°å€ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLANNEL_ETCD=<span class="string">"http://192.168.253.7:2379"</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹NodeèŠ‚ç‚¹kubernetesçš„å…¨å±€é…ç½®æ–‡ä»¶<code>/etc/kubernetes/config</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">KUBE_LOG_LEVEL=<span class="string">"--v=2"</span></span><br><span class="line">KUBE_MASTER=<span class="string">"--master=http://192.168.253.7:8080"</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹NodeèŠ‚ç‚¹ä¸Škubernetes kubeletçš„é…ç½®<code>/etc/kubernetes/kubelet</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">KUBELET_ADDRESS=<span class="string">"--address=0.0.0.0"</span></span><br><span class="line">KUBELET_PORT=<span class="string">"--port=10250"</span></span><br><span class="line">KUBELET_API_SERVER=<span class="string">"--api_servers=http://192.168.253.7:8080"</span></span><br><span class="line">KUBELET_HOSTNAME=<span class="string">""</span></span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨NodeèŠ‚ç‚¹ä¸Šçš„ç›¸å…³æœåŠ¡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> SRV <span class="keyword">in</span> ntpd flanneld docker kube-proxy kubelet;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    sudo systemctl start <span class="variable">$SRV</span></span><br><span class="line">    sudo systemctl <span class="built_in">enable</span> <span class="variable">$SRV</span></span><br><span class="line">    sudo systemctl status <span class="variable">$SRV</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<p>ç±»ä¼¼MasterèŠ‚ç‚¹ï¼Œå¦‚æœæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯åŠ¨æˆåŠŸï¼Œé‚£ä¹ˆsudo systemctl status $SRVæ˜¾ç¤ºçš„ä¿¡æ¯åˆ™åŒ…å«Active: active (running)ã€‚</p>
<p>é…ç½®æ­¥éª¤éƒ½æ˜¯å‚è€ƒ<a href="https://mos.meituan.com/library/37/how-to-setup-k8s-cluster-on-CentOS7/" target="_blank" rel="external">ç¾å›¢äº‘åœ¨CentOS7ä¸Šéƒ¨ç½²Kubernetesé›†ç¾¤</a>ã€‚<br>ä¸å·§çš„æ˜¯ï¼Œæˆ‘åœ¨è¿™ä¸€æ­¥ä¸ŠèŠ±äº†1å‘¨çš„æ—¶é—´ã€‚ã€‚ã€‚ã€‚NodeèŠ‚ç‚¹ä¸Šçš„flanneldå’ŒdockeræœåŠ¡æ­»æ´»èµ·ä¸èµ·æ¥ã€‚<br>é€šè¿‡<code>systemctl status flanneld</code>ï¼Œå‘ç°ä¸€ç›´æŠ¥é”™<code>Failed to retrieve network config</code>ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<p>ä¿®æ”¹NodeèŠ‚ç‚¹ä¸Šçš„flanneldé…ç½® <code>/etc/sysconfig/flanneld</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLANNEL_ETCD_KEY=<span class="string">"/coreos.com/network"</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åé‡æ–°å¯åŠ¨flanneldå’ŒdockeræœåŠ¡å³å¯ã€‚</p>
<h3 id="u6D4B_u8BD5"><a href="#u6D4B_u8BD5" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>åœ¨Masterä¸ŠæŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@master ~]$ kubectl get nodes</span><br><span class="line">NAME              STATUS    AGE</span><br><span class="line">worker1.vagrant   Ready     <span class="number">4</span>m</span><br><span class="line">worker2.vagrant   Ready     <span class="number">10</span>s</span><br></pre></td></tr></table></figure>
<p>åœ¨MasterèŠ‚ç‚¹æŸ¥çœ‹flannelå­ç½‘åˆ†é…æƒ…å†µ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@master ~]$ etcdctl ls /coreos.com/network/subnets</span><br><span class="line">/coreos.com/network/subnets/<span class="number">172.17</span>.<span class="number">29.0</span>-<span class="number">24</span></span><br></pre></td></tr></table></figure>
<h3 id="Guestbook_u90E8_u7F72_u5230k8s_u4E2D"><a href="#Guestbook_u90E8_u7F72_u5230k8s_u4E2D" class="headerlink" title="Guestbookéƒ¨ç½²åˆ°k8sä¸­"></a>Guestbookéƒ¨ç½²åˆ°k8sä¸­</h3><p><a href="https://github.com/kubernetes/kubernetes/blob/release-1.2/examples/guestbook/README.md" target="_blank" rel="external">Guestbook example</a></p>
<p>éƒ¨ç½²çš„è¿‡ç¨‹ä¸­é‡åˆ°2ä¸ªé—®é¢˜</p>
<ol>
<li><p>é€šè¿‡<code>kubectl create -f xxx.yaml</code>åˆ›å»ºpodæ˜¾ç¤ºæˆåŠŸï¼Œä½†æ˜¯é€šè¿‡ <code>kubectl get pod</code>å‘½ä»¤ç¡®æŸ¥è¯¢ä¸åˆ°ä»»ä½•podä¿¡æ¯ã€‚è§£å†³æ–¹æ¡ˆå¯ä»¥å‚è€ƒï¼š<a href="http://www.voidcn.com/blog/jinzhencs/article/p-5975011.html" target="_blank" rel="external"> kubenetesæ— æ³•åˆ›å»ºpod/åˆ›å»ºRCæ—¶æ— æ³•è‡ªåŠ¨åˆ›å»ºpodçš„é—®é¢˜</a></p>
</li>
<li><p>è§£å†³äº†ä¸Šé¢çš„é—®é¢˜åï¼Œå¯ä»¥getåˆ°podä¿¡æ¯ï¼Œä½†æ˜¯nodeèŠ‚ç‚¹é€šè¿‡æŸ¥è¯¢docker imageså¹¶æœªå‘ç°ä»»ä½•é•œåƒï¼ŒåŸå› æ˜¯å› ä¸ºå›½å†…çš„ç½‘ç»œé—®é¢˜ï¼Œæ— æ³•ä¸‹è½½åˆ°é•œåƒæ‰€è‡´ã€‚å¯ä»¥æ‰‹åŠ¨pull<br>é•œåƒï¼š<code>registry.access.redhat.com/rhel7/pod-infrastructure</code>ä»¥åŠä½ æ‰€éœ€çš„å…¶ä»–é•œåƒã€‚</p>
</li>
</ol>
<h3 id="u603B_u7ED3"><a href="#u603B_u7ED3" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>è¿™é‡Œçš„é›†ç¾¤éƒ¨ç½²å‚è€ƒçš„æ˜¯ç¾å›¢äº‘åˆ†äº«çš„ã€‚éƒ½åªæ˜¯ç»ƒæ‰‹ç”¨çš„ã€‚</p>
<p>k8séƒ¨ç½²è¿˜å¯ä»¥æ›´ç®€å•ï¼Œä¸€é”®éƒ¨ç½²ã€‚ä½¿ç”¨vagrant+coreOsï¼Œå®‰è£…å®Œè™šæ‹Ÿæœºåï¼ŒMasterèŠ‚ç‚¹c1ä¼šè‡ªåŠ¨ä¸‹åœ¨k8sæ‰€éœ€çš„ç¯å¢ƒï¼Œå¥ˆä½•å¤§é™†çš„ç¨‹åºå‘˜æ¯”è¾ƒè‹¦é€¼ï¼Œæœ‰å¢™çš„å­˜åœ¨ã€‚åœ¨ç¿»å¢™çš„æƒ…å†µä¸‹å¯ä»¥å°è¯•ä¸€é”®éƒ¨ç½²k8sé›†ç¾¤ã€‚è¯¦æƒ…è¯·ç§»æ­¥<a href="https://coreos.com/kubernetes/docs/latest/kubernetes-on-vagrant.html" target="_blank" rel="external">è¦ç¿»æ‰èƒ½çœ‹çš„åˆ°</a>ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/09/07/dockerjavamicroservice2/" data-id="cj03kfo1h0012uruqrbp5a86m" class="article-share-link" data-share="baidu" data-title="åŸºäºDockerçš„javaå¾®æœåŠ¡(äºŒ) CentOS7éƒ¨ç½²Kubernetesé›†ç¾¤">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/09/07/dockerjavamicroservice2/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/K8s/">K8s</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dockerjavamicroservice1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/24/dockerjavamicroservice1/" class="article-date">
  <time datetime="2016-08-24T11:23:15.000Z" itemprop="datePublished">2016-08-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/24/dockerjavamicroservice1/">åŸºäºDockerçš„javaå¾®æœåŠ¡(ä¸€) éƒ¨ç½²Chris Richardsonçš„è½¬è´¦æ¡ˆä¾‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h3 id="u6982_u8FF0"><a href="#u6982_u8FF0" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>æœ¬æ–‡ä¸»è¦å‚è€ƒ<a href="http://www.infoq.com/cn/articles/Automate-Docker-Cloud-Java-Microservice-Deployment-with-DCHQ" target="_blank" rel="external">ä½¿ç”¨DCHQè‡ªåŠ¨éƒ¨ç½²å’Œç®¡ç†åŸºäºDockerçš„äº‘/è™šæ‹ŸåŒ–ç¯å¢ƒJavaå¾®æœåŠ¡</a></p>
<p>æœ€è¿‘åœ¨å­¦ä¹ å¾®æœåŠ¡,å‰ä¸¤å‘¨äº†è§£åŸºäºSpring Cloudçš„å¾®æœåŠ¡æ¡†æ¶,è¿™ä¸¤å¤©å¼€å§‹çœ‹çœ‹å…³äºDockerçš„å¾®æœåŠ¡ã€‚</p>
<p>Spring Cloudæ•´åˆäº†Netflixå¼€æºçš„Eureka,Hystrix,Ribbon,Feign,ZUULç­‰,<br>æ˜¯ä¸€ä¸ªåŸºäºSpring Bootå®ç°çš„äº‘åº”ç”¨å¼€å‘å·¥å…·ï¼Œå®ƒä¸ºåŸºäºJVMçš„äº‘åº”ç”¨å¼€å‘ä¸­çš„é…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€æ™ºèƒ½è·¯ç”±ã€å¾®ä»£ç†ã€æ§åˆ¶æ€»çº¿ã€å…¨å±€é”ã€å†³ç­–ç«é€‰ã€<br>åˆ†å¸ƒå¼ä¼šè¯å’Œé›†ç¾¤çŠ¶æ€ç®¡ç†ç­‰æ“ä½œæä¾›äº†ä¸€ç§ç®€å•çš„å¼€å‘æ–¹å¼(<a href="http://blog.didispace.com/springcloud1/" target="_blank" rel="external">å‚è€ƒDIDI</a>)ã€‚</p>
<p>é‚£ä¹ˆDockerçš„å¾®æœåŠ¡æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ã€‚æœ‰ç©ºçš„åŒå­¦å¯ä»¥çœ‹çœ‹Spring Cloudå’ŒDockerçš„æ¯”è¾ƒ<br><a href="http://www.infoq.com/cn/articles/netflix-oss-spring-cloud-kubernetes?utm_campaign=rightbar_v2&amp;utm_source=infoq&amp;utm_medium=articles_link&amp;utm_content=link_text" target="_blank" rel="external">Netflix OSSã€Spring Cloudè¿˜æ˜¯Kubernetes?</a>ã€‚<br>ç®€å•çš„è¯´,å°±æ˜¯åŸºäºDockerçš„è°ƒåº¦å™¨Kuberneteså¯ä»¥å¸®å¿™æŠŠå¤§å®¶ä»æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€å®¹é”™ç­‰åŠŸèƒ½ä¸­è§£æ”¾å‡ºæ¥,æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å¼€å‘ã€‚</p>
<p>Kubernetesæ˜¯ä¸ªä»€ä¹ˆé¬¼?è¦äº†è§£å®ƒ,æˆ‘ä»¬å¾—å…ˆäº†è§£ä¸‹,æˆ‘ä»¬å¼€å‘å¥½çš„é¡¹ç›®æ˜¯æ€ä¹ˆåœ¨Dockerä¸Šéƒ¨ç½²åº”ç”¨çš„,å¤šä¸ªDockerå®¹å™¨åˆæ˜¯å¦‚ä½•ç®¡ç†çš„ã€‚<br>è¿™ç¯‡æ–‡ç« æ˜¯Chris Richardsoné’ˆå¯¹äº‹ä»¶æº¯æºã€CQRSå’ŒDockeræ‰€åˆ›å»ºçš„è½¬è´¦<a href="https://github.com/cer/event-sourcing-examples" target="_blank" rel="external">æ¡ˆä¾‹</a>ã€‚</p>
<p>æ¡ˆä¾‹ä¸»è¦åŠŸèƒ½å¦‚ä¸‹:</p>
<ul>
<li>åŸºäºä¸€ä¸ªåˆå§‹çš„ä½™é¢ï¼Œåˆ›å»ºæ–°è´¦æˆ·</li>
<li>æŸ¥è¯¢æŸä¸ªè´¦æˆ·ï¼Œå¾—åˆ°å…¶ä½™é¢</li>
<li>ä»ä¸€ä¸ªè´¦æˆ·åˆ°å¦ä¸€ä¸ªè´¦æˆ·è¿›è¡Œè½¬è´¦</li>
</ul>
<p>æˆ‘ä»¬å°±ç”¨è¿™ä¸ªä¾‹å­,æ¥äº†è§£ä¸‹æ•´ä¸ªå¼€å‘éƒ¨ç½²æµç¨‹(<strong>ä»…ä»…æ˜¯äº†è§£</strong>)ã€‚æ¡ˆä¾‹çš„å…·ä½“ä¸šåŠ¡é€»è¾‘ä»‹ç»è¯·ç§»æ­¥<a href="https://github.com/cer/event-sourcing-examples" target="_blank" rel="external">event-sourcing-examples</a></p>
<h3 id="u83B7_u53D6Event_Store_u51ED_u8BC1"><a href="#u83B7_u53D6Event_Store_u51ED_u8BC1" class="headerlink" title="è·å–Event Storeå‡­è¯"></a>è·å–Event Storeå‡­è¯</h3><p>æ¶æ„ä½¿ç”¨äº‹ä»¶é©±åŠ¨çš„æ–¹å¼æ¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§,è¿™é‡Œé¢ä½¿ç”¨çš„æ˜¯Event Storeã€‚</p>
<p>åœ¨ä½¿ç”¨ä¹‹å‰,éœ€è¦è·å–Event Storeå‡­è¯ã€‚<br>è¿›å…¥<a href="http://eventuate.io/" target="_blank" rel="external">Event Store</a>å®˜ç½‘,æ³¨å†Œä¸ªè´¦å·,è¿‡å‡ ä¸ªå°æ—¶ä¸€èˆ¬å°±ä¼šæ”¶åˆ°æ¥è‡ª<a href="/chris@chrisrichardson.net">chris</a>çš„é‚®ä»¶ã€‚<br>é‚®ä»¶ä¸­æœ‰EVENTUATE_API_KEY_IDå’ŒEVENTUATE_API_KEY_SECRET,è¿™ä¸ªåœ¨åé¢çš„ymlæ¨¡æ¿é‡Œä¼šç”¨åˆ°ã€‚</p>
<h3 id="gradle_u6784_u5EFA"><a href="#gradle_u6784_u5EFA" class="headerlink" title="gradleæ„å»º"></a>gradleæ„å»º</h3><p>ä»<a href="https://github.com/cer/event-sourcing-examples" target="_blank" rel="external">event-sourcing-examples</a>cloneé¡¹ç›®åˆ°æœ¬åœ°ã€‚</p>
<p>ç›´æ¥ä¸‹è½½ä¸‹æ¥çš„ä¾‹å­ï¼Œéƒ¨ç½²æµ‹è¯•çš„æ—¶å€™ï¼Œä¼šæŠ¥å‡ ä¸ªé”™è¯¯ï¼Œéœ€è¦å¯¹ä»£ç åšéƒ¨åˆ†ä¿®æ”¹</p>
<ul>
<li>ä¿®æ”¹ xx-xx-side-serviceæ¨¡å—ä¸­build.gradleæ–‡ä»¶,æ·»åŠ å¦‚ä¸‹å†…å®¹<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jar &#123;</span><br><span class="line">    manifest &#123;</span><br><span class="line">        attributes <span class="string">'Main-Class'</span>: <span class="string">'net.chrisrichardson.eventstore.javaexamples.banking.web.main.XxxxSideServiceMain'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ·»åŠ è¿™ä¸ªè§£å†³éƒ¨ç½²æ—¶é‡åˆ°çš„æ‰¾ä¸åˆ°manifesté”™è¯¯</p>
<ul>
<li>xx-xx-side-serviceä¸»æ–¹æ³•æ·»åŠ æ³¨è§£@SpringBootApplication</li>
</ul>
<p>ä¸»æ–¹æ³•æ²¡æœ‰@SpringBootApplicationè¿™ä¸ªæ³¨è§£ï¼Œæ˜¯æ— æ³•å¯åŠ¨spring bootæ»´ã€‚</p>
<p>ä¿®æ”¹åï¼Œä½¿ç”¨gradleçš„assembleå‘½ä»¤æ„å»ºï¼Œæ„å»ºæˆåŠŸåï¼Œæ¨¡å—çš„/build/libsä¼šç”ŸæˆjaråŒ…ã€‚</p>
<h3 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h3><p>gradleæ„å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬è¦æŠŠserviceæ¨¡å—çš„jaråŒ…æ”¾åˆ°ä¸€ä¸ªdockeré•œåƒä¸­ï¼Œç„¶åå¯åŠ¨è¿™ä¸ªdockerã€‚<br>è¿™é‡Œä½¿ç”¨äº†docker-composeæ¥ç”Ÿæˆå¯åŠ¨é•œåƒã€‚</p>
<p>docker-composeçš„å®‰è£…åŠä»‹ç»ï¼Œè¯·ç§»æ­¥ï¼š<a href="https://yeasy.gitbooks.io/docker_practice/content/compose/" target="_blank" rel="external">Docker Compose é¡¹ç›®</a></p>
<h4 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h4><p>docker-composeç®¡ç†è°ƒåº¦dockerå®¹å™¨é»˜è®¤æ˜¯æ ¹æ®docker-compose.ymlæ¨¡æ¿è¿›è¡Œçš„ã€‚è¿™ä¸ªæ¨¡æ¿é‡Œå®šä¹‰äº†ç”Ÿæˆé•œåƒéƒ¨ç½²é•œåƒçš„ä¸€äº›æ­¥éª¤ã€‚</p>
<p>æœ¬æ¡ˆä¾‹çš„ymlå¦‚ä¸‹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">accountscommandside:&#10;  image: openjdk:8u92-jdk-alpine&#10;  working_dir: /app&#10;  volumes:&#10;    - ./accounts-command-side-service/build/libs:/app&#10;  command: java -jar /app/accounts-command-side-service.jar&#10;  ports:&#10;    - &#34;8080:8080&#34;&#10;  environment:&#10;    EVENTUATE_API_KEY_ID: 5NJSVTRJ6UTYVL8U4RN8TKDRM&#10;    EVENTUATE_API_KEY_SECRET: fiAKWYEEj7EVxNi6yKXF8WDcVLbYA8Cu5RnFFKjwVOw&#10;&#10;transactionscommandside:&#10;  image: openjdk:8u92-jdk-alpine&#10;  working_dir: /app&#10;  volumes:&#10;    - ./transactions-command-side-service/build/libs:/app&#10;  command: java -jar /app/transactions-command-side-service.jar&#10;  ports:&#10;    - &#34;8082:8080&#34;&#10;  environment:&#10;    EVENTUATE_API_KEY_ID: 5NJSVTRJ6UTYVL8U4RN8TKDRM&#10;    EVENTUATE_API_KEY_SECRET: fiAKWYEEj7EVxNi6yKXF8WDcVLbYA8Cu5RnFFKjwVOw&#10;&#10;&#10;accountsqueryside:&#10;  image: openjdk:8u92-jdk-alpine&#10;  working_dir: /app&#10;  volumes:&#10;    - ./accounts-query-side-service/build/libs:/app&#10;  command: java -jar /app/accounts-query-side-service.jar&#10;  ports:&#10;    - &#34;8081:8080&#34;&#10;  links:&#10;    - mongodb&#10;  environment:&#10;    EVENTUATE_API_KEY_ID: 5NJSVTRJ6UTYVL8U4RN8TKDRM&#10;    EVENTUATE_API_KEY_SECRET: fiAKWYEEj7EVxNi6yKXF8WDcVLbYA8Cu5RnFFKjwVOw&#10;    SPRING_DATA_MONGODB_URI: mongodb://mongodb/mydb&#10;&#10;mongodb:&#10;  image: mongo:3.2.9&#10;  hostname: mongodb&#10;  command: mongod --smallfiles&#10;  ports:&#10;    - &#34;27017:27017&#34;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œé¢å®šä¹‰äº†4ä¸ªå®¹å™¨å†…å®¹ï¼Œåˆ†åˆ«æ˜¯accountscommandsideï¼Œtransactionscommandsideï¼Œaccountsquerysideï¼Œmongodb</p>
<ul>
<li>imageï¼šæŒ‡å®šä¸ºé•œåƒåç§°æˆ–é•œåƒ IDã€‚å¦‚æœé•œåƒåœ¨æœ¬åœ°ä¸å­˜åœ¨ï¼ŒCompose å°†ä¼šå°è¯•æ‹‰å–è¿™ä¸ªé•œåƒ</li>
<li>volumesï¼šå·æŒ‚è½½è·¯å¾„è®¾ç½®ï¼Œè¿™é‡Œæ˜¯å°†å®¹å™¨çš„/appè·¯å¾„æŒ‚è½½åˆ°å®¿ä¸»æœº/build/libs è·¯å¾„ä¸Š</li>
<li>commandï¼šè¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ï¼Œè¿™é‡Œæ˜¯é»˜è®¤ç›´æ¥å¯åŠ¨spring booté¡¹ç›®</li>
<li>portsï¼šæš´éœ²ç«¯å£ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹<ul>
<li>å®¿ä¸»ï¼šå®¹å™¨ ï¼ˆHOST:CONTAINERï¼‰</li>
<li>å®¹å™¨ï¼ˆå®¿ä¸»ä¼šéšæœºé€‰æ‹©ç«¯å£ï¼‰</li>
</ul>
</li>
<li>linksï¼šé“¾æ¥åˆ°å…¶å®ƒæœåŠ¡ä¸­çš„å®¹å™¨ã€‚ä½¿ç”¨æœåŠ¡åç§°ï¼ˆåŒæ—¶ä½œä¸ºåˆ«åï¼‰æˆ–æœåŠ¡åç§°ï¼šæœåŠ¡åˆ«å ï¼ˆSERVICE:ALIASï¼‰æ ¼å¼éƒ½å¯ä»¥ã€‚ <ul>
<li>db</li>
<li>db:database</li>
<li>redis</li>
</ul>
</li>
<li>environmentï¼šè®¾ç½®ç¯å¢ƒå˜é‡</li>
</ul>
<p>æ›¿æ¢æˆä½ è‡ªå·±çš„EVENTUATE_API_KEY_IDå’ŒEVENTUATE_API_KEY_SECRETï¼Œå¦åˆ™éƒ¨ç½²åè¿è¡Œæµ‹è¯•ï¼Œä¼šæŠ¥401æœªæˆæƒé”™è¯¯ã€‚</p>
<h4 id="docker-compse_up"><a href="#docker-compse_up" class="headerlink" title="docker-compse up"></a>docker-compse up</h4><p>è®¾ç½®å¥½ymlæ¨¡æ¿ä»¥åï¼Œä½¿ç”¨docker-compse upæ¥å¯åŠ¨è¿™4ä¸ªå®¹å™¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  java-spring git:(master) âœ— docker-compose up</span><br></pre></td></tr></table></figure>
<p>å†å¼€ä¸ªshellï¼Œçœ‹ä¸‹å¯åŠ¨çš„å››ä¸ªå®¹å™¨çš„çŠ¶æ€</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">âœ  java-spring git:(master) âœ— docker-compose ps</span><br><span class="line">                Name                              Command               State            Ports</span><br><span class="line">--------------------------------------------------------------------------------------------------------</span><br><span class="line">javaspring_accountscommandside_1       java -jar /app/accounts-co ...   Up      <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8080</span>-&gt;<span class="number">8080</span>/tcp</span><br><span class="line">javaspring_accountsqueryside_1         java -jar /app/accounts-qu ...   Up      <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8081</span>-&gt;<span class="number">8080</span>/tcp</span><br><span class="line">javaspring_mongodb_1                   /entrypoint.sh mongod --sm ...   Up      <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">27017</span>-&gt;<span class="number">27017</span>/tcp</span><br><span class="line">javaspring_transactionscommandside_1   java -jar /app/transaction ...   Up      <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">8082</span>-&gt;<span class="number">8080</span>/tcp</span><br></pre></td></tr></table></figure>
<p>å››ä¸ªçŠ¶æ€éƒ½æ˜¯upï¼Œå¥½äº†ï¼Œè®¿é—®æœåŠ¡æµ‹è¯•ä¸‹ã€‚</p>
<h3 id="u6D4B_u8BD5"><a href="#u6D4B_u8BD5" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>å…ˆåˆ›å»º2ä¸ªè´¦æˆ·ï¼Œæ¯ä¸ªéƒ½åˆå§‹500ç¾å…ƒ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  java-spring git:(master) âœ— curl -X POST -H <span class="string">"Content-Type: application/json"</span> -H <span class="string">"Cache-Control: no-cache"</span> <span class="operator">-d</span> <span class="string">'&#123;"initialBalance": 500&#125;'</span> <span class="string">"http://localhost:8080/accounts"</span></span><br><span class="line">&#123;<span class="string">"accountId"</span>:<span class="string">"00000156bfc1c044-0242ac1100460000"</span>&#125;%                                                                            </span><br><span class="line">âœ  java-spring git:(master) âœ— curl -X POST -H <span class="string">"Content-Type: application/json"</span> -H <span class="string">"Cache-Control: no-cache"</span> <span class="operator">-d</span> <span class="string">'&#123;"initialBalance": 500&#125;'</span> <span class="string">"http://localhost:8080/accounts"</span></span><br><span class="line">&#123;<span class="string">"accountId"</span>:<span class="string">"00000156bfc1da88-0242ac1100960000"</span>&#125;%</span><br></pre></td></tr></table></figure></p>
<p>æ ¹æ®è´¦æˆ·IDæŸ¥è¯¢<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">âœ  java-spring git:(master) âœ— curl -X GET <span class="string">"http://localhost:8081/accounts/00000156bfc1c044-0242ac1100460000"</span></span><br><span class="line">&#123;<span class="string">"accountId"</span>:<span class="string">"00000156bfc1c044-0242ac1100460000"</span>,<span class="string">"balance"</span>:<span class="number">50000</span>&#125;%                                                        </span><br><span class="line">âœ  java-spring git:(master) âœ— curl -X GET <span class="string">"http://localhost:8081/accounts/00000156bfc1da88-0242ac1100960000"</span></span><br><span class="line">&#123;<span class="string">"accountId"</span>:<span class="string">"00000156bfc1da88-0242ac1100960000"</span>,<span class="string">"balance"</span>:<span class="number">50000</span>&#125;%</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°æ¯ä¸ªè´¦æˆ·é‡Œéƒ½æœ‰50000ç¾åˆ†ã€‚è¯•è¯•è½¬è´¦ï¼Œç„¶åå†æŸ¥è¯¢<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âœ  java-spring git:(master) âœ— curl -X POST -H <span class="string">"Content-Type: application/json"</span> <span class="operator">-d</span> <span class="string">'&#123;"fromAccountId" : "00000156bfc1c044-0242ac1100460000", "toAccountId" : "00000156bfc1da88-0242ac1100960000", "amount" : 500&#125;'</span> <span class="string">"http://localhost:8082/transfers"</span></span><br><span class="line">&#123;<span class="string">"moneyTransferId"</span>:<span class="string">"00000156bfc75387-0242ac1100ac0000"</span>&#125;%                                                                                                                                                    </span><br><span class="line">âœ  java-spring git:(master) âœ— curl -X GET <span class="string">"http://localhost:8081/accounts/00000156bfc1da88-0242ac1100960000"</span></span><br><span class="line">&#123;<span class="string">"accountId"</span>:<span class="string">"00000156bfc1da88-0242ac1100960000"</span>,<span class="string">"balance"</span>:<span class="number">50000</span>&#125;%                                                                                                                                          </span><br><span class="line">âœ  java-spring git:(master) âœ— curl -X GET <span class="string">"http://localhost:8081/accounts/00000156bfc1c044-0242ac1100460000"</span></span><br><span class="line">&#123;<span class="string">"accountId"</span>:<span class="string">"00000156bfc1c044-0242ac1100460000"</span>,<span class="string">"balance"</span>:<span class="number">0</span>&#125;%                                                                                                                                              </span><br><span class="line">âœ  java-spring git:(master) âœ— curl -X GET <span class="string">"http://localhost:8081/accounts/00000156bfc1da88-0242ac1100960000"</span></span><br><span class="line">&#123;<span class="string">"accountId"</span>:<span class="string">"00000156bfc1da88-0242ac1100960000"</span>,<span class="string">"balance"</span>:<span class="number">100000</span>&#125;%</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ä¸­é—´æœ‰ä¸ªçŠ¶æ€æ˜¯ä¸å¯¹çš„ï¼Œè¿™ä¸ªåŸºäºäº‹ä»¶é©±åŠ¨çš„ï¼Œè¿˜æ²¡æœ‰è‡ªå·±çœ‹ï¼Œåº”è¯¥æ˜¯æœ‰å»¶è¿Ÿï¼Œåæ¥å†æŸ¥è¯¢å°±æ˜¯å‡†ç¡®çš„äº†ã€‚äº‹ä»¶é©±åŠ¨çš„åé¢ä¼šä¸“é—¨çœ‹çœ‹å†æ•´ç†ç¯‡æ–‡ç« ã€‚</p>
<h3 id="u7ED3_u8BED"><a href="#u7ED3_u8BED" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>æœ¬ç¯‡ä¸»è¦æè¿°äº†å¦‚ä½•ä½¿ç”¨docker-composeæ„å»ºåŸºäºdockerçš„javaå¾®æœåŠ¡æ¡†æ¶ã€‚åç»­ä¼šå¯¹é‡Œé¢çš„çŸ¥è¯†ç‚¹åšäº›è¯¦ç»†çš„å­¦ä¹ ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/08/24/dockerjavamicroservice1/" data-id="cj03kfo1j0015uruq6p2drfc0" class="article-share-link" data-share="baidu" data-title="åŸºäºDockerçš„javaå¾®æœåŠ¡(ä¸€) éƒ¨ç½²Chris Richardsonçš„è½¬è´¦æ¡ˆä¾‹">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/08/24/dockerjavamicroservice1/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CQRS/">CQRS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Event-Sourcing/">Event-Sourcing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-springcloud6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/09/springcloud6/" class="article-date">
  <time datetime="2016-08-09T07:47:33.000Z" itemprop="datePublished">2016-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/09/springcloud6/">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå…­ï¼‰æœåŠ¡ç½‘å…³</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ : <a href="http://blog.didispace.com/springcloud5/" target="_blank" rel="external">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäº”ï¼‰æœåŠ¡ç½‘å…³</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/08/09/springcloud6/" data-id="cj03kfo12000guruqm9g9n203" class="article-share-link" data-share="baidu" data-title="Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå…­ï¼‰æœåŠ¡ç½‘å…³">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/08/09/springcloud6/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-SpringCloud5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/09/SpringCloud5/" class="article-date">
  <time datetime="2016-08-09T02:38:46.000Z" itemprop="datePublished">2016-08-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/09/SpringCloud5/">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäº”ï¼‰åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ : <a href="http://blog.didispace.com/springcloud4/" target="_blank" rel="external">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/08/09/SpringCloud5/" data-id="cj03kfo1q001luruqv3ans8tk" class="article-share-link" data-share="baidu" data-title="Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäº”ï¼‰åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/08/09/SpringCloud5/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰é›†ç¾¤" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰é›†ç¾¤/" class="article-date">
  <time datetime="2016-08-05T02:07:59.000Z" itemprop="datePublished">2016-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰é›†ç¾¤/">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰é›†ç¾¤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>å‰é¢ä¸‰ç¯‡éƒ½åˆ†äº«è‡ª<a href="http://blog.didispace.com/" target="_blank" rel="external">ç¨‹åºçŒ¿DD</a>çš„åšå®¢,æš‚æ—¶(2016å¹´08æœˆ05æ—¥)è¿˜æ²¡æœ‰æ›´æ–°å…³äºEurekaé›†ç¾¤çš„åšå®¢ã€‚<br>è¿™é‡Œå‚è€ƒäº†<a href="https://segmentfault.com/blog/mumubin" target="_blank" rel="external">æœ¨æœ¨å½¬</a>çš„<a href="https://segmentfault.com/a/1190000006149891" target="_blank" rel="external">Spring Cloudå®æˆ˜(äºŒ)-Spring Cloud Eureka</a>åšå®¢å†…å®¹ã€‚<br>å¯¹é›†ç¾¤é…ç½®ç®€å•è®°å½•ä¸‹,æ–¹ä¾¿ä»¥åæŸ¥é˜…ã€‚åŒæ—¶ä¹ŸæœŸå¾…<code>ç¨‹åºçŒ¿DD</code>æ›´æ–°æ›´å¤šæ›´ç²¾å½©çš„åšå®¢ã€‚</p>
<p>æœ¬æ–‡ä»£ç åŸºäº<a href="https://git.oschina.net/didispace/SpringBoot-Learning/tree/master/Chapter9-1-3?dir=1&amp;filepath=Chapter9-1-3&amp;oid=cc93af44af30b42320041332790d071ed72a2450&amp;sha=4329c564d673b6cf7a53893ad9770abb7a67b328" target="_blank" rel="external">ç¨‹åºçŒ¿DD / SpringBoot-Learning / Chapter9-1-3</a>è¿›è¡Œé›†ç¾¤é…ç½®ã€‚</p>
<p>Spring Cloud å®˜æ–¹æ–‡æ¡£ä¸Šå¯¹é›†ç¾¤é…ç½®ä»‹ç»çš„éå¸¸ç®€å•ï¼Œå¯¹Eureka Serverè¿›è¡Œ<a href="http://cloud.spring.io/spring-cloud-static/docs/1.0.x/spring-cloud.html#_peer_awareness" target="_blank" rel="external">Peer Awareness</a>é…ç½®ï¼Œè¿™æ ·å¤šä¸ªæœåŠ¡ç«¯å°±å¯ä»¥å…³è”åˆ°ä¸€èµ·ã€‚å¥½äº†ï¼Œä¸‹é¢çœ‹çœ‹å…·ä½“çš„é…ç½®ã€‚</p>
<h4 id="hosts_u4FEE_u6539"><a href="#hosts_u4FEE_u6539" class="headerlink" title="hostsä¿®æ”¹"></a>hostsä¿®æ”¹</h4><p>åœ¨hostsï¼ˆè·¯å¾„ï¼š/etc/hostsï¼‰æ–‡ä»¶ä¸­æ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1       eureka-primary&#10;127.0.0.1       eureka-secondary&#10;127.0.0.1       eureka-tertiary</span><br></pre></td></tr></table></figure>
<h4 id="u670D_u52A1_u7AEF_u914D_u7F6E"><a href="#u670D_u52A1_u7AEF_u914D_u7F6E" class="headerlink" title="æœåŠ¡ç«¯é…ç½®"></a>æœåŠ¡ç«¯é…ç½®</h4><p>å…ˆæ³¨é‡Šæ‰application.propertiesä¸­çš„é…ç½®ï¼Œæ·»åŠ application.ymlï¼Œåœ¨ymlæ·»åŠ å¤šä¸ªprofiles,å’ŒinstanceIdï¼Œæ­¤æ—¶Eureka Server åŒæ—¶ä¹Ÿæ˜¯ä¸ªEureka Client,éœ€è¦è®¾ç½®eureka.client.serviceUrl.defaultZone,å€¼æ˜¯å¦å¤–ä¸¤ä¸ªï¼ˆè¿™å°±æ˜¯å®˜ç½‘æ‰€è¯´çš„<code>Peer Awareness</code>ï¼‰:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">---&#10;spring:&#10;  application:&#10;    name: eureka-server-clustered&#10;  profiles: primary&#10;server:&#10;  port: 1111&#10;eureka:&#10;  instance:&#10;    hostname: eureka-primary&#10;  client:&#10;    registerWithEureka: true&#10;    fetchRegistry: true&#10;    serviceUrl:&#10;      defaultZone: http://eureka-secondary:1112/eureka/,http://eureka-tertiary:1113/eureka/&#10;---&#10;spring:&#10;  application:&#10;    name: eureka-server-clustered&#10;  profiles: secondary&#10;server:&#10;  port: 1112&#10;eureka:&#10;  instance:&#10;    hostname: eureka-secondary&#10;  client:&#10;    registerWithEureka: true&#10;    fetchRegistry: true&#10;    serviceUrl:&#10;      defaultZone: http://eureka-secondary:1111/eureka/,http://eureka-tertiary:1113/eureka/&#10;---&#10;spring:&#10;  application:&#10;    name: eureka-server-clustered&#10;  profiles: tertiary&#10;server:&#10;  port: 1113&#10;eureka:&#10;  instance:&#10;    hostname: eureka-tertiary&#10;  client:&#10;    registerWithEureka: true&#10;    fetchRegistry: true&#10;    serviceUrl:&#10;      defaultZone: http://eureka-secondary:1111/eureka/,http://eureka-tertiary:1112/eureka/</span><br></pre></td></tr></table></figure>
<h4 id="u670D_u52A1_u7AEF_u542F_u52A8"><a href="#u670D_u52A1_u7AEF_u542F_u52A8" class="headerlink" title="æœåŠ¡ç«¯å¯åŠ¨"></a>æœåŠ¡ç«¯å¯åŠ¨</h4><p>é…ç½®å®Œæˆï¼Œè¦åˆ†åˆ«å¯åŠ¨3ä¸ªServerï¼Œåˆ†åˆ«æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  eureka-server git:(master) âœ— mvn clean &amp;&amp; mvn install</span><br><span class="line">âœ  eureka-server git:(master) âœ— <span class="built_in">cd</span> target</span><br><span class="line">âœ  target git:(master) âœ— java -Dspring.profiles.active=primary -jar eureka-server-<span class="number">0.0</span>.<span class="number">1</span>-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  target git:(master) âœ— java -Dspring.profiles.active=secondary -jar eureka-server-<span class="number">0.0</span>.<span class="number">1</span>-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  target git:(master) âœ— java -Dspring.profiles.active=tertiary -jar eureka-server-<span class="number">0.0</span>.<span class="number">1</span>-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è®¿é—®å…¶ä¸­ä¸€ä¸ªæœåŠ¡åœ°å€<a href="http://localhost:1111/" target="_blank" rel="external">http://localhost:1111/</a> å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜æœåŠ¡å¯åŠ¨æˆåŠŸï¼š</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/eureka-server-1.png" alt="Eureka Server"></p>
<h4 id="u5BA2_u6237_u7AEF_u914D_u7F6E"><a href="#u5BA2_u6237_u7AEF_u914D_u7F6E" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h4><p>æœåŠ¡ç«¯å·²å‡†å¤‡å°±ç»ªï¼Œå®¢æˆ·ç«¯å¦‚ä½•æ³¨å†Œåˆ°å¤šä¸ªæœåŠ¡åœ°å€å‘¢ï¼Ÿå…¶å®åœ¨æœåŠ¡ç«¯é…ç½®defaultZoneæ—¶ï¼ŒæŒ‡å®šå¤šä¸ªåœ°å€ï¼Œå°±å‘Šè¯‰æˆ‘ä»¬å®¢æˆ·ç«¯ä¹Ÿè¿™ä¹ˆæŒ‡å®šå°±å¯ä»¥å•¦ã€‚</p>
<p>ä¿®æ”¹compute-serviceçš„application.propertiesä¸­çš„defaultZoneå€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#25351;&#23450;&#24494;&#26381;&#21153;&#30340;&#21517;&#31216;&#21518;&#32493;&#22312;&#35843;&#29992;&#30340;&#26102;&#20505;&#21482;&#38656;&#35201;&#20351;&#29992;&#35813;&#21517;&#31216;&#23601;&#21487;&#20197;&#36827;&#34892;&#26381;&#21153;&#30340;&#35775;&#38382;&#10;spring.application.name=compute-service&#10;#&#24212;&#29992;&#31471;&#21475;&#10;server.port=2222&#10;#&#25351;&#23450;&#26381;&#21153;&#27880;&#20876;&#20013;&#24515;&#30340;&#20301;&#32622;&#10;#eureka.client.serviceUrl.defaultZone=http://localhost:1111/eureka/&#10;eureka.client.serviceUrl.defaultZone=http://eureka-primary:1111/eureka/,http://eureka-secondary:1112/eureka/,http://eureka-tertiary:1113/eureka/</span><br></pre></td></tr></table></figure>
<h4 id="u542F_u52A8_u5BA2_u6237_u7AEF"><a href="#u542F_u52A8_u5BA2_u6237_u7AEF" class="headerlink" title="å¯åŠ¨å®¢æˆ·ç«¯"></a>å¯åŠ¨å®¢æˆ·ç«¯</h4><p>å®¢æˆ·ç«¯é»˜è®¤ç«¯å£æ˜¯2222ï¼Œæˆ‘ä»¬å¯åŠ¨2ä¸ªå®¢æˆ·ç«¯ï¼Œå¦ä¸€ä¸ªç«¯å£ç”¨2223å¥½äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  compute-service git:(master) âœ— mvn clean &amp;&amp; mvn insatll</span><br><span class="line">âœ  compute-service git:(master) âœ— <span class="built_in">cd</span> target</span><br><span class="line">âœ  target git:(master) âœ— java -jar compute-service-<span class="number">0.0</span>.<span class="number">1</span>-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">âœ  target git:(master) âœ— java -DServer.port=<span class="number">2223</span> -jar compute-service-<span class="number">0.0</span>.<span class="number">1</span>-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<p>é‡æ–°æŸ¥çœ‹ä¸‹<a href="http://localhost:1111/" target="_blank" rel="external">http://localhost:1111/</a></p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/eureka-server-2.png" alt="client starting"></p>
<p>2ä¸ªå®¢æˆ·ç«¯å¯åŠ¨æˆåŠŸäº†ã€‚</p>
<h4 id="u6D4B_u8BD5"><a href="#u6D4B_u8BD5" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>å¯åŠ¨æ¶ˆè´¹è€…eureka-ribbonæˆåŠŸåï¼Œç®€å•æµ‹è¯•ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ curl localhost:<span class="number">3333</span>/add</span><br><span class="line"><span class="number">30</span>%</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå®¢æˆ·ç«¯ä¹Ÿæ‰“å‡ºäº†æ—¥å¿—</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2016</span>-<span class="number">08</span>-<span class="number">05</span> <span class="number">11</span>:<span class="number">18</span>:<span class="number">23.554</span>  INFO <span class="number">5127</span> --- [nio-<span class="number">2223</span>-exec-<span class="number">1</span>] com.ow.wises.web.ComputeController       : /add, host:<span class="number">192.168</span>.<span class="number">1.145</span>, service_id:compute-service, result:<span class="number">30</span></span><br></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œå°±å…ˆè¿™æ ·äº†ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰é›†ç¾¤/" data-id="cj03kfo1s001ouruqlyaapk8r" class="article-share-link" data-share="baidu" data-title="Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰é›†ç¾¤">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆå››ï¼‰é›†ç¾¤/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Eureka/">Eureka</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Netflix/">Netflix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ribbon/">Ribbon</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨/" class="article-date">
  <time datetime="2016-08-05T02:02:21.000Z" itemprop="datePublished">2016-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨/">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ : <a href="http://blog.didispace.com/springcloud3/" target="_blank" rel="external">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨/" data-id="cj03kfo1z0025uruq1sgcqt0t" class="article-share-link" data-share="baidu" data-title="Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸‰ï¼‰æ–­è·¯å™¨/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Eureka/">Eureka</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hystrix/">Hystrix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Netflix/">Netflix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…/" class="article-date">
  <time datetime="2016-08-05T02:00:33.000Z" itemprop="datePublished">2016-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…/">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ : <a href="http://blog.didispace.com/springcloud2/" target="_blank" rel="external">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…/" data-id="cj03kfo1w001xuruq7w60buk4" class="article-share-link" data-share="baidu" data-title="Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆäºŒï¼‰æœåŠ¡æ¶ˆè´¹è€…/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Eureka/">Eureka</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Feign/">Feign</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Netflix/">Netflix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ribbon/">Ribbon</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°/" class="article-date">
  <time datetime="2016-08-05T01:55:21.000Z" itemprop="datePublished">2016-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°/">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ : <a href="http://blog.didispace.com/springcloud1/" target="_blank" rel="external">Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°/" data-id="cj03kfo22002curuqfhfp2mjh" class="article-share-link" data-share="baidu" data-title="Spring Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/08/05/Spring-Cloudæ„å»ºå¾®æœåŠ¡æ¶æ„ï¼ˆä¸€ï¼‰æœåŠ¡æ³¨å†Œä¸å‘ç°/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Eureka/">Eureka</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Netflix/">Netflix</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-Buffer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/28/Java-NIO-Buffer/" class="article-date">
  <time datetime="2016-06-28T14:10:31.000Z" itemprop="datePublished">2016-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/28/Java-NIO-Buffer/">Java NIO Buffer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡ï¼š<a href="http://tutorials.jenkov.com/java-nio/buffers.html" target="_blank" rel="external">http://tutorials.jenkov.com/java-nio/buffers.html</a></p>
<p>Java NIO Buffersæ˜¯å’ŒNIOçš„Channelsäº¤äº’ä½¿ç”¨çš„ã€‚ä½ çŸ¥é“çš„ï¼Œæ•°æ®æ˜¯ä»Channelä¸­è¯»åˆ°Bufferé‡Œï¼Œæ•°æ®ä»Bufferé‡Œå†™å…¥åˆ°Channelä¸­ã€‚ </p>
<p>Bufferæœ¬è´¨ä¸Šæ˜¯å¯ä»¥è¯»å†™æ•°æ®çš„å†…å­˜å—ã€‚è¿™ä¸ªå†…å­˜å—è¢«NIOçš„Bufferå¯¹è±¡åŒ…è£¹ï¼Œç„¶åæä¾›å¾ˆå¤šæ–¹æ³•ä»¥ä¾¿èƒ½å¤Ÿç®€å•çš„æ“ä½œè¿™ä¸ªå†…å­˜å—ã€‚</p>
<h4 id="Buffer_u57FA_u7840_u7528_u6CD5"><a href="#Buffer_u57FA_u7840_u7528_u6CD5" class="headerlink" title="BufferåŸºç¡€ç”¨æ³•"></a>BufferåŸºç¡€ç”¨æ³•</h4><p>ä½¿ç”¨Bufferè¯»å†™æ•°æ®åŸºæœ¬ä¸Šå°±4æ­¥ï¼š</p>
<ol>
<li>æ•°æ®å†™å…¥Buffer</li>
<li>è°ƒç”¨ <code>buffer.flip()</code></li>
<li>ä»Bufferä¸­è¯»å‡ºæ•°æ®</li>
<li>è°ƒç”¨<code>buffer.clear()</code>æˆ–è€…<code>buffer.compact()</code>æ–¹æ³•</li>
</ol>
<p>å½“ä½ å°†æ•°æ®å†™å…¥bufferï¼Œbufferä¼šä¸€ç›´ç•™æ„ä½ å·²ç»å†™äº†å¤šå°‘æ•°æ®ã€‚ä¸€æ—¦ä½ éœ€è¦è¯»æ•°æ®ï¼Œä½ å¿…é¡»è°ƒç”¨<code>flip()</code>æ–¹æ³•å°†bufferä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼ä¸­ã€‚è¿›å…¥è¯»æ¨¡å¼åï¼Œbufferå…è®¸ä½ è¯»å–å…¶ä¸­è¢«å†™å…¥çš„æ•°æ®ã€‚</p>
<p>ä¸€æ—¦ä½ è¯»å®Œäº†æ‰€æœ‰çš„æ•°æ®ï¼Œä½ éœ€è¦æ¸…ç©ºbufferï¼Œä»¥å¤‡bufferå¯ä»¥ç»§ç»­è¢«å†™å…¥ã€‚è¿™ä¹ˆåšæœ‰ä¸¤ç§æ–¹å¼ï¼šè°ƒç”¨<code>clear()</code>æ–¹æ³•æˆ–è€…è°ƒç”¨<code>compact()</code>æ–¹æ³•ã€‚<code>clear()</code>æ–¹æ³•ä¼šæ¸…ç©ºbufferä¸­çš„æ‰€æœ‰æ•°æ®ã€‚<code>compact()</code>æ–¹æ³•åªä¼šæ¸…æ¥šæ‰ä½ å·²ç»è¯»è¿‡çš„æ•°æ®ã€‚é‚£äº›æ²¡è¯»çš„æ•°æ®ä¼šç§»åˆ°bufferçš„èµ·å§‹å¤„ï¼Œç„¶åæ•°æ®ä¼šæ¥ç€è¿™äº›æœªè¯»æ•°æ®åé¢ç»§ç»­å†™å…¥ã€‚</p>
<p><strong>æ —å­</strong></p>
<p>ä¸‹é¢æ˜¯Bufferç”¨æ³•çš„ğŸŒ°ï¼Œç”¨åˆ°çš„writeï¼Œflipï¼Œreadï¼Œclearç­‰æ“ä½œä¼šä½œæ³¨é‡Šè¯´æ˜ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaNIOBuffer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String path = Thread.currentThread().getContextClassLoader().getResource(<span class="string">""</span>).getPath();</span><br><span class="line">        RandomAccessFile aFile = <span class="keyword">new</span> RandomAccessFile(path+<span class="string">"/nio-data.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">        FileChannel inChannel = aFile.getChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//create buffer with capacity of 48 bytes</span></span><br><span class="line">        ByteBuffer buf = ByteBuffer.allocate(<span class="number">48</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> bytesRead = inChannel.read(buf); <span class="comment">//read into buffer.</span></span><br><span class="line">        <span class="keyword">while</span> (bytesRead != -<span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">            buf.flip();  <span class="comment">//make buffer ready for read</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(buf.hasRemaining())&#123;</span><br><span class="line">                System.out.print((<span class="keyword">char</span>) buf.get()); <span class="comment">// read 1 byte at a time</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            buf.clear(); <span class="comment">//make buffer ready for writing</span></span><br><span class="line">            bytesRead = inChannel.read(buf);</span><br><span class="line">        &#125;</span><br><span class="line">        aFile.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Buffer_Capacity_2C_Position_and_Limit"><a href="#Buffer_Capacity_2C_Position_and_Limit" class="headerlink" title="Buffer Capacity, Position and Limit"></a>Buffer Capacity, Position and Limit</h4><p>bufferæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªä½ å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å–æ•°æ®çš„å†…å­˜å—ã€‚è¿™ä¸ªå†…å­˜å—è¢«NIO Bufferå¯¹è±¡åŒ…è£¹åï¼Œæä¾›äº†ä¸€ç³»åˆ—ç®€å•æ“ä½œå†…å­˜å—çš„æ–¹æ³•ã€‚</p>
<p>Bufferæœ‰3ä¸ªä½ éœ€è¦äº†è§£çš„å±æ€§ï¼š</p>
<ul>
<li>capacity</li>
<li>position</li>
<li>imit</li>
</ul>
<p>positionå’Œlimitçš„å«ä¹‰å–å†³äºBufferå¤„åœ¨è¯»æ¨¡å¼è¿˜æ˜¯å†™æ¨¡å¼ã€‚capacityå«ä¹‰ä¸€ç›´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå’ŒBufferæ¨¡å¼æ— å…³ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå…³äºcapacityï¼Œpositionå’Œlimitçš„è¯´æ˜ï¼Œåé¢ä¼šå¯¹å…¶è¿›è¡Œè¯´æ˜ã€‚</p>
<p><img src="http://tutorials.jenkov.com/images/java-nio/buffers-modes.png" alt="buffers-modes"></p>
<h5 id="Capacity"><a href="#Capacity" class="headerlink" title="Capacity"></a>Capacity</h5><p>Bufferä½œä¸ºä¸€ä¸ªå†…å­˜å—æ˜¯æœ‰å›ºå®šçš„å¤§å°å€¼ï¼Œç§°ä¹‹ä¸ºã€capacityã€ã€‚ä½ åªèƒ½å‘Bufferä¸­å†™å…¥byteï¼Œlongï¼Œcharç­‰ç±»å‹æ•°æ®ã€‚ä¸€æ—¦Bufferæ»¡äº†ï¼Œåœ¨å‘å…¶å†™å…¥æ•°æ®ä¹‹å‰ä½ éœ€è¦æ¸…ç©ºå®ƒï¼ˆè¯»å–æ•°æ®æˆ–è€…æ¸…ç©ºæ•°æ®ï¼‰</p>
<h5 id="Position"><a href="#Position" class="headerlink" title="Position"></a>Position</h5><p>å‘Bufferä¸­å†™æ•°æ®æ˜¯ä»ä¸€ä¸ªç¡®å®šçš„positionå¼€å§‹ï¼Œåˆå§‹çš„positionæ˜¯0ã€‚å½“byteï¼Œlongç­‰æ•°æ®å†™å…¥Bufferï¼Œpositionä¼šå‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¯ä¾›æ’å…¥æ•°æ®çš„å•å…ƒã€‚positionæœ€å¤§å€¼ä¸ºcapacity-1ã€‚</p>
<p>ä»Bufferä¸­è¯»æ•°æ®ä¹Ÿæ˜¯ä»ä¸€ä¸ªç»™å®šçš„ä½ç½®å¼€å§‹ã€‚å½“ä½ å°†Bufferä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼åï¼Œpositionçš„å€¼é‡ç½®ä¸º0ã€‚ä»Bufferä¸­è¯»æ•°æ®å°±æ˜¯ä»positionè¯»ï¼Œè¯»å–åï¼Œpositionä¼šå‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¯ä¾›è¯»å–çš„å•å…ƒã€‚</p>
<h5 id="Limit"><a href="#Limit" class="headerlink" title="Limit"></a>Limit</h5><p>å†™æ¨¡å¼ä¸­ï¼Œlimitå°±æ˜¯å†™å…¥bufferçš„æ•°æ®é‡ã€‚Limitç­‰äºbufferçš„capacityã€‚</p>
<p>å½“åˆ‡æ¢åˆ°è¯»æ¨¡å¼åï¼Œlimitå°±æ˜¯bufferä¸­å¯ä»¥è¯»å–çš„æ•°æ®é‡ã€‚å°±æ˜¯è¯´ï¼Œåˆ‡æ¢åˆ°è¯»æ¨¡å¼æ—¶ï¼Œlimitå°±æ˜¯è®¾ç½®ä¸ºå†™æ¨¡å¼ä¸­positionçš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œbufferä¸­å†™å…¥çš„æ•°æ®éƒ½å¯ä»¥è¯»å–åˆ°ã€‚</p>
<h4 id="Buffer_u7684_u7C7B_u578B"><a href="#Buffer_u7684_u7C7B_u578B" class="headerlink" title="Bufferçš„ç±»å‹"></a>Bufferçš„ç±»å‹</h4><p>ä¼´éšJava NIOçš„Bufferç±»å‹æœ‰:</p>
<ul>
<li>ByteBuffer</li>
<li>MappedByteBuffer</li>
<li>CharBuffer</li>
<li>DoubleBuffer</li>
<li>FloatBuffer</li>
<li>IntBuffer</li>
<li>LongBuffer</li>
<li>ShortBuffer</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›Bufferç±»å‹è¡¨ç¤ºäº†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯ä»¥é€šè¿‡charï¼Œshortï¼Œintï¼Œlongï¼Œfloat æˆ– doubleç±»å‹æ¥æ“ä½œç¼“å†²åŒºä¸­çš„å­—èŠ‚ã€‚</p>
<p>MappedByteBufferæœ‰ç‚¹ç‰¹æ®Šï¼Œåœ¨å®ƒçš„ä¸“é—¨ç« èŠ‚ä¸­å†æè¿°ã€‚</p>
<h4 id="Buffer_u7684_u5206_u914D"><a href="#Buffer_u7684_u5206_u914D" class="headerlink" title="Bufferçš„åˆ†é…"></a>Bufferçš„åˆ†é…</h4><p>åœ¨è·å–åˆ°Bufferå¯¹è±¡åé¦–å…ˆè¦å»åˆ†é…ã€‚æ¯ä¸ªBufferç±»éƒ½æœ‰ä¸ª<code>allocate()</code>æ–¹æ³•ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯ByteBufferåˆ†é…capacityä¸º48å­—èŠ‚çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ByteBuffer buf = ByteBuffer.allocate(<span class="number">48</span>);</span><br></pre></td></tr></table></figure>
<p>Here is an example allocating a CharBuffer with space for 1024 characters:<br>ä¸‹é¢æ˜¯CharBufferåˆ†é…1024ä¸ªå­—ç¬¦çš„ä¾‹å­:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CharBuffer buf = CharBuffer.allocate(<span class="number">1024</span>);</span><br></pre></td></tr></table></figure></p>
<h4 id="u5411Buffer_u4E2D_u5199_u5165_u6570_u636E"><a href="#u5411Buffer_u4E2D_u5199_u5165_u6570_u636E" class="headerlink" title="å‘Bufferä¸­å†™å…¥æ•°æ®"></a>å‘Bufferä¸­å†™å…¥æ•°æ®</h4><p>å‘Bufferä¸­å†™å…¥æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ä»Channelä¸­è·å–æ•°æ®å†™å…¥Buffer</li>
<li>é€šè¿‡bufferçš„<code>put()</code>æ–¹æ³•å†™å…¥æ•°æ®</li>
</ul>
<p>ä»Channelä¸­è·å–æ•°æ®å†™å…¥bufferçš„ä¾‹å­ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> bytesRead = inChannel.read(buf);<span class="comment">//read into buffer.</span></span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨<code>put()</code>æ–¹æ³•å†™å…¥æ•°æ®çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.put(<span class="number">127</span>);</span><br></pre></td></tr></table></figure>
<p>æœ‰ä¸åŒçš„ç‰ˆæœ¬çš„<code>put()</code>æ–¹æ³•ï¼Œå…è®¸ä½ ä½¿ç”¨ä¸åŒçš„æ–¹å¼å†™å…¥æ•°æ®ã€‚æ¯”å¦‚ï¼Œåœ¨ç‰¹å®šçš„ä½ç½®å†™å…¥ï¼Œå†™å…¥å­—èŠ‚æˆ–æ•°ç»„ã€‚æŸ¥çœ‹JavaDocè·å–bufferå…·ä½“çš„å®ç°ã€‚</p>
<h4 id="flip_28_29"><a href="#flip_28_29" class="headerlink" title="flip()"></a>flip()</h4><p><code>flip()</code>æ–¹æ³•ç”¨æ¥åˆ‡æ¢Bufferçš„è¯»å’Œå†™æ¨¡å¼ã€‚è°ƒç”¨<code>flip()</code>ï¼Œè®¾ç½®positionä¸º0ï¼Œè®¾ç½®limitä¸ºåŸæ¥çš„positionå€¼ã€‚å°±æ˜¯è¯´ï¼Œpositionç°åœ¨ç”¨æ¥æ ‡è®°è¯»çš„ä½ç½®ï¼ŒLimitç”¨æ¥æ ‡è®°å¯ä»¥è¯»å¤šå°‘ã€‚</p>
<h4 id="u4ECEBuffer_u4E2D_u8BFB_u6570_u636E"><a href="#u4ECEBuffer_u4E2D_u8BFB_u6570_u636E" class="headerlink" title="ä»Bufferä¸­è¯»æ•°æ®"></a>ä»Bufferä¸­è¯»æ•°æ®</h4><p>ä»Bufferä¸­è¯»å–æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>å°†bufferä¸­çš„æ•°æ®è¯»å…¥åˆ°channelä¸­</li>
<li>è°ƒç”¨bufferè‡ªå¸¦çš„<code>get()</code>æ–¹æ³•ç›´æ¥è¯»</li>
</ul>
<p>ä¸¾ä¸ªğŸŒ°ï¼šå°†Bufferä¸­çš„æ•°æ®è¯»åˆ°channelä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//read from buffer into channel.</span></span><br><span class="line"><span class="keyword">int</span> bytesWritten = inChannel.write(buf);</span><br></pre></td></tr></table></figure>
<p>ä¸¾ä¸ªğŸŒ°ï¼šä½¿ç”¨<code>get()</code>æ–¹æ³•è¯»å–Buffer<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">byte</span> aByte = buf.get();</span><br></pre></td></tr></table></figure></p>
<p>æœ‰ä¸åŒçš„ç‰ˆæœ¬çš„<code>get()</code>æ–¹æ³•ï¼Œå…è®¸ä½ ä½¿ç”¨ä¸åŒçš„æ–¹å¼å†™å…¥æ•°æ®ã€‚æ¯”å¦‚ï¼Œåœ¨ç‰¹å®šçš„ä½ç½®å†™å…¥ï¼Œå†™å…¥å­—èŠ‚æˆ–æ•°ç»„ã€‚æŸ¥çœ‹JavaDocè·å–bufferå…·ä½“çš„å®ç°ã€‚</p>
<h4 id="rewind_28_29"><a href="#rewind_28_29" class="headerlink" title="rewind()"></a>rewind()</h4><p><code>Buffer.rewind()</code>é‡ç½®positionä¸º0ï¼Œè¿™æ ·å°±å¯ä»¥é‡æ–°è¯»bufferçš„æ•°æ®ã€‚limitä¸å—å½±å“ï¼Œå§‹ç»ˆå¯ä»¥æ ‡è®°bufferä¸­å¯è¯»çš„æ•°æ®é‡ã€‚</p>
<h4 id="clear_28_29_and_compact_28_29"><a href="#clear_28_29_and_compact_28_29" class="headerlink" title="clear() and compact()"></a>clear() and compact()</h4><p>ä»Bufferä¸­è¯»å®Œæ•°æ®ä»¥åè¦åšå¥½Bufferå†™çš„å‡†å¤‡ã€‚å¯ä»¥è°ƒç”¨<code>clear()</code>æ–¹æ³•æˆ–è€…<code>compact()</code>æ–¹æ³•ã€‚</p>
<p>è°ƒç”¨<code>clear()</code>æ–¹æ³•ä¼šé‡ç½®positionçš„å€¼ä¸º0ï¼ŒLimitçš„å€¼ä¸ºcapacityã€‚æ„æ€æ˜¯ï¼ŒBufferå·²ç»æ¸…ç©ºã€‚Bufferä¸­çš„æ•°æ®å¹¶æ²¡æœ‰æ¸…æ¥šæ‰ã€‚åªæ˜¯å‘Šè¯‰ä½ ä»Bufferçš„å“ªä¸ªä½ç½®å¯ä»¥å†™å…¥æ•°æ®ã€‚</p>
<p>å¦‚æœå­˜åœ¨æ²¡æœ‰è¯»å–çš„æ•°æ®ï¼Œè°ƒç”¨<code>clear()</code>æ–¹æ³•åï¼Œè¯¥æ•°æ®ä¼šè¢«æ ‡è®°ä¸ºâ€™é—å¿˜çš„â€™ï¼Œå› ä¸ºè¿™äº›æ•°æ®å†ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ ‡è®°å…¶å®è¢«è¯»è¿‡çš„è¿˜æ˜¯æ²¡è¢«è¯»è¿‡çš„ã€‚</p>
<p>å¦‚æœä½ å¿…é¡»å…ˆå‘Bufferä¸­å†™å…¥æ•°æ®ï¼Œç„¶åè¿˜æƒ³è¯»é‚£äº›æ²¡æœ‰è¢«è¯»è¿‡çš„æ•°æ®ã€‚éœ€è¦è°ƒç”¨<code>compact()</code>æ–¹æ³•ä»£æ›¿<code>clear()</code>æ–¹æ³•ã€‚</p>
<p><code>compact()</code>æ–¹æ³•æŠŠæ‰€æœ‰æ²¡æœ‰è¯»è¿‡çš„æ•°æ®å¤åˆ¶åˆ°Bufferçš„èµ·å§‹å¤„ã€‚ç„¶åè®¾ç½®positionçš„å€¼ä¸ºå‘³é“æ•°æ®åé¢çš„å€¼ã€‚Limitä»ç„¶è®¾ç½®ä¸ºcapacityã€‚è¿™æ ·ï¼ŒBufferå°±åšå¥½å†™çš„å‡†å¤‡ï¼Œè€Œä¸å¿…è¦†ç›–æ‰æœªè¯»çš„æ•°æ®ã€‚</p>
<h4 id="mark_28_29_and_reset_28_29"><a href="#mark_28_29_and_reset_28_29" class="headerlink" title="mark() and reset()"></a>mark() and reset()</h4><p>ä½¿ç”¨<code>Buffer.mark()</code>æ–¹æ³•å¯ä»¥æ ‡è®°ä¸€ä¸ªæŒ‡å®šçš„positionã€‚è¿™æ ·å†ä¹‹åè°ƒç”¨<code>Buffer.reset()</code>æ–¹æ³•é‡ç½®positionåˆ°æ ‡è®°çš„åœ°æ–¹ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">buffer.mark();</span><br><span class="line"><span class="comment">//call buffer.get() a couple of times, e.g. during parsing.</span></span><br><span class="line">buffer.reset();  <span class="comment">//set position back to mark.</span></span><br></pre></td></tr></table></figure></p>
<h4 id="equals_28_29_and_compareTo_28_29"><a href="#equals_28_29_and_compareTo_28_29" class="headerlink" title="equals() and compareTo()"></a>equals() and compareTo()</h4><p>æ¯”è¾ƒä¸¤ä¸ªbuffersä»ç„¶å¯ä»¥ä½¿ç”¨<code>equals()</code>å’Œ<code>compareTo()</code>æ–¹æ³•ã€‚</p>
<h5 id="equals_28_29"><a href="#equals_28_29" class="headerlink" title="equals()"></a>equals()</h5><p>ä¸¤ä¸ªbuffersç›¸ç­‰ï¼Œé‚£ä¹ˆï¼š </p>
<ul>
<li>æœ‰ç›¸åŒçš„ç±»å‹ï¼ˆbyteã€charã€intç­‰ï¼‰ã€‚</li>
<li>Bufferä¸­å‰©ä½™çš„byteã€charç­‰çš„ä¸ªæ•°ç›¸ç­‰ã€‚</li>
<li>Bufferä¸­æ‰€æœ‰å‰©ä½™çš„byteã€charç­‰éƒ½ç›¸åŒã€‚</li>
</ul>
<p>å°±æ˜¯è¯´ï¼šequalsåªæ˜¯æ¯”è¾ƒBufferçš„ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯æ¯ä¸€ä¸ªåœ¨å®ƒé‡Œé¢çš„å…ƒç´ éƒ½æ¯”è¾ƒã€‚å®é™…ä¸Šï¼Œå®ƒåªæ¯”è¾ƒBufferä¸­çš„å‰©ä½™å…ƒç´ ã€‚</p>
<h5 id="compareTo_28_29"><a href="#compareTo_28_29" class="headerlink" title="compareTo()"></a>compareTo()</h5><p>compareTo()æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªBufferçš„å‰©ä½™å…ƒç´ (byteã€charç­‰)ï¼Œ å¦‚æœæ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼Œåˆ™è®¤ä¸ºä¸€ä¸ªBufferâ€œå°äºâ€å¦ä¸€ä¸ªBufferï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªä¸ç›¸ç­‰çš„å…ƒç´ å°äºå¦ä¸€ä¸ªBufferä¸­å¯¹åº”çš„å…ƒç´  ã€‚</li>
<li>æ‰€æœ‰å…ƒç´ éƒ½ç›¸ç­‰ï¼Œä½†ç¬¬ä¸€ä¸ªBufferæ¯”å¦ä¸€ä¸ªå…ˆè€—å°½(ç¬¬ä¸€ä¸ªBufferçš„å…ƒç´ ä¸ªæ•°æ¯”å¦ä¸€ä¸ªå°‘)ã€‚</li>
</ul>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/06/28/Java-NIO-Buffer/" data-id="cj03kfo3a003quruq4l61spym" class="article-share-link" data-share="baidu" data-title="Java NIO Buffer">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/06/28/Java-NIO-Buffer/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-Channel" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/26/Java-NIO-Channel/" class="article-date">
  <time datetime="2016-06-26T13:04:43.000Z" itemprop="datePublished">2016-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/26/Java-NIO-Channel/">Java NIO Channel</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>Java NIO çš„Channelsæœ‰äº›åƒæµï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ï¼š</p>
<ul>
<li>å¯ä»¥å‘ä¸€ä¸ªChannelå³è¯»åˆå†™ã€‚æµæ˜¯å…¸å‹çš„å•å‘çš„ï¼ˆå†™æˆ–è€…è¯»ï¼‰</li>
<li>Channelsçš„è¯»å†™æ˜¯å¼‚æ­¥çš„</li>
<li>Channelsæ€»æ˜¯è¯»æ•°æ®åˆ°Bufferä¸­ï¼Œæˆ–è€…å°†Bufferä¸­çš„æ•°æ®å†™å…¥Channel</li>
</ul>
<p>ä¸Šé¢æåˆ°çš„ï¼Œä»channelä¸­è¯»å–æ•°æ®è‡³bufferä¸­ï¼Œå°†bufferä¸­çš„æ•°æ®å†™å…¥channelä¸­ï¼š</p>
<p><img src="http://tutorials.jenkov.com/images/java-nio/overview-channels-buffers.png" alt="Java NIO: Channels read data into Buffers, and Buffers write data into Channels"><br><strong>Java NIO: Channels read data into Buffers, and Buffers write data into Channels</strong></p>
<h4 id="Channel_Implementations"><a href="#Channel_Implementations" class="headerlink" title="Channel Implementations"></a>Channel Implementations</h4><p>åœ¨Java NIOä¸­æœ‰ä¸€äº›æ¯”è¾ƒé‡è¦çš„channelå®ç°ç±»ï¼š</p>
<ul>
<li>FileChannel</li>
<li>DatagramChannel</li>
<li>SocketChannel</li>
<li>ServerSocketChannel</li>
</ul>
<p><code>FileChannel</code>ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚<br><code>DatagramChannel</code>é€šè¿‡UDPè¯»å†™ç½‘ç»œä¸­çš„æ•°æ®ã€‚<br><code>SocketChannel</code>é€šè¿‡TCPè¯»å†™ç½‘ç»œä¸­çš„æ•°æ®ã€‚<br><code>ServerSocketChannel</code>å¯ä»¥ç›‘å¬æ–°è¿›æ¥çš„TCPè¿æ¥ï¼ŒåƒWebæœåŠ¡å™¨é‚£æ ·ï¼Œå¯¹æ¯ä¸€ä¸ªæ–°è¿›æ¥çš„è¿æ¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ªSocketChannelã€‚</p>
<h4 id="Basic_Channel_Example"><a href="#Basic_Channel_Example" class="headerlink" title="Basic Channel Example"></a>Basic Channel Example</h4><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨<code>FileChannel</code>è¯»æ•°æ®åˆ°Bufferä¸­çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChannelExample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        RandomAccessFile accessFile = <span class="keyword">new</span> RandomAccessFile(<span class="string">"nio-data.txt"</span>,<span class="string">"rw"</span>);</span><br><span class="line">        FileChannel fileChannel = accessFile.getChannel();</span><br><span class="line"></span><br><span class="line">        ByteBuffer buffer = ByteBuffer.allocate(<span class="number">48</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> bytesRead = fileChannel.read(buffer);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (bytesRead != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">"Read "</span> + bytesRead);</span><br><span class="line">            buffer.flip();<span class="comment">//åˆ‡æ¢è¯»å†™æ¨¡å¼ï¼Œæ­¤å¤„æ˜¯ç”±å†™åˆ‡æ¢åˆ°ä¸‹é¢çš„è¯»</span></span><br><span class="line">            <span class="keyword">if</span> (buffer.hasRemaining()) &#123;</span><br><span class="line">                System.out.print((<span class="keyword">char</span>) buffer.get());</span><br><span class="line">            &#125;</span><br><span class="line">            buffer.clear();</span><br><span class="line">            bytesRead = fileChannel.read(buffer);</span><br><span class="line">        &#125;</span><br><span class="line">        accessFile.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ buf.flip() çš„è°ƒç”¨ï¼Œé¦–å…ˆè¯»å–æ•°æ®åˆ°Bufferï¼Œç„¶ååè½¬Bufferï¼Œæ¥ç€å†ä»Bufferä¸­è¯»å–æ•°æ®ã€‚ä¸‹ä¸€èŠ‚ä¼šæ·±å…¥è®²è§£Bufferçš„æ›´å¤šç»†èŠ‚ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/06/26/Java-NIO-Channel/" data-id="cj03kfo36003muruqp8ptwmq7" class="article-share-link" data-share="baidu" data-title="Java NIO Channel">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/06/26/Java-NIO-Channel/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-Overview" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/25/Java-NIO-Overview/" class="article-date">
  <time datetime="2016-06-25T05:27:34.000Z" itemprop="datePublished">2016-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/25/Java-NIO-Overview/">Java NIO æ¦‚è¿°</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>Java NIO åŒ…å«ä¸‹é¢ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶:</p>
<ul>
<li>Channels</li>
<li>Buffers</li>
<li>Selectors</li>
</ul>
<p>Java NIO è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ç±»å’Œç»„ä»¶,Channel,Buffer,Selectoræ˜¯æ ¸å¿ƒçš„APIã€‚å…¶ä»–çš„ç»„ä»¶,è¯¸å¦‚Pipeã€FileLockä»…ä»…åªæ˜¯è¿™3ä¸ªæ ¸å¿ƒç»„ç»„ä»¶çš„å®é™…åº”ç”¨ã€‚</p>
<h4 id="Channels_and_Buffers"><a href="#Channels_and_Buffers" class="headerlink" title="Channels  and Buffers"></a>Channels  and Buffers</h4><p>å…¸å‹çš„,NIOä¸­çš„æ‰€æœ‰IOéƒ½æ˜¯èµ·å§‹äºChannelã€‚Channelæœ‰ç‚¹åƒæµã€‚å¯ä»¥å°†Channelä¸­æ•°æ®è¯»åˆ°Bufferé‡Œ,ä¹Ÿå¯ä»¥å°†Bufferé‡Œçš„æ•°æ®å†™å…¥Channelä¸­ã€‚è¯´æ˜å¦‚ä¸‹:</p>
<p><img src="http://tutorials.jenkov.com/images/java-nio/overview-channels-buffers.png" alt="Java NIO: Channels read data into Buffers, and Buffers write data into Channels"><br><strong>Java NIO: Channels read data into Buffers, and Buffers write data into Channels</strong></p>
<p>Java NIOä¸­ä¸»è¦çš„Channelå®ç°ç±»æœ‰ï¼š</p>
<ul>
<li>FileChannel</li>
<li>DatagramChannel</li>
<li>SocketChannel</li>
<li>ServerSocketChannel</li>
</ul>
<p>å¯ä»¥çœ‹å‡º,è¿™äº›channelsè¦†ç›–äº†UDP+TCPçš„ç½‘ç»œIO,ä»¥åŠæ–‡ä»¶IOã€‚</p>
<p>Java NIOä¸­ä¸»è¦çš„Bufferå®ç°ç±»æœ‰:</p>
<ul>
<li>ByteBuffer</li>
<li>CharBuffer</li>
<li>DoubleBuffer</li>
<li>FloatBuffer</li>
<li>IntBuffer</li>
<li>LongBuffer</li>
<li>ShortBuffer</li>
</ul>
<p>è¿™äº›å®ç°ç±»ä¹ŸåŒ…å«äº†é€šè¿‡IOå‘é€æ•°æ®æ‰€éœ€è¦çš„åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼šbyteã€shortã€intã€longã€floatã€doubleã€Charå‹ã€‚</p>
<p>Java NIOä¹Ÿæœ‰ MappedByteBufferç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå†…å­˜æ˜ å°„æ–‡ä»¶ã€‚</p>
<h4 id="Selectors"><a href="#Selectors" class="headerlink" title="Selectors"></a>Selectors</h4><p>ä¸€ä¸ªSelectorså…è®¸ä¸€ä¸ªå•çº¿ç¨‹åŒæ—¶å¤„ç†å¤šä¸ªChannelã€‚å¦‚æœåº”ç”¨ä¸­æœ‰å¾ˆå¤šæ‰“å¼€çš„è¿æ¥ï¼ˆChannelsï¼‰è¿™ä¹ˆåšæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä½†æ˜¯æ¯ä¸ªè¿æ¥çš„æµé‡éƒ½å¾ˆä½ã€‚æ¯”å¦‚ï¼ŒèŠå¤©æœåŠ¡å™¨ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªSelectorå¤„ç†3ä¸ªChannelçš„è¯´æ˜ï¼š</p>
<p><img src="http://tutorials.jenkov.com/images/java-nio/overview-selectors.png" alt="Java NIO: A Thread uses a Selector to handle 3 Channel&#39;s"><br><strong>Java NIO: A Thread uses a Selector to handle 3 Channelâ€™s</strong></p>
<p>å…ˆå°†Channelsæ³¨å†Œåˆ°Selectorä¸­ï¼Œç„¶åè°ƒç”¨ä»–çš„select()æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šé˜»å¡ç›´åˆ°æœ‰æ³¨å†Œçš„channelç›¸åº”çš„äº‹ä»¶è§¦å‘ã€‚ä¸€æ—¦è¿™ä¸ªæ–¹æ³•è¿”å›ï¼Œçº¿ç¨‹å°±å¯ä»¥å¤„ç†è¿™ä¸ªäº‹ä»¶ã€‚æ¯”å¦‚æ­£åœ¨æ‰“å¼€çš„è¿æ¥ï¼Œè·å–åˆ°æ•°æ®çš„äº‹ä»¶ç­‰ç­‰ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/06/25/Java-NIO-Overview/" data-id="cj03kfo33003iuruqfm3h1dda" class="article-share-link" data-share="baidu" data-title="Java NIO æ¦‚è¿°">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/06/25/Java-NIO-Overview/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java-NIO-Tutorial" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/25/Java-NIO-Tutorial/" class="article-date">
  <time datetime="2016-06-25T05:24:25.000Z" itemprop="datePublished">2016-06-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/25/Java-NIO-Tutorial/">Java NIO æ•™ç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/classes.html" target="_blank" rel="external">Java Reflection</a></p>
<p>Java NIO(New IO) æ˜¯java(ä»java1.4å¼€å§‹) IO APIçš„ä¸€ä¸ªé€‰æ‹©,å¯ä»¥ä»£æ›¿Javaæ ‡å‡†IOå’ŒJavaç½‘ç»œç¼–ç¨‹APIã€‚å¯¹äºæ ‡å‡†çš„IOæ¥è¯´,Java NIOæä¾›äº†ä¸åŒçš„å¤„ç†IOçš„æ–¹å¼ã€‚</p>
<h4 id="Channels_and_Buffers"><a href="#Channels_and_Buffers" class="headerlink" title="Channels and Buffers"></a>Channels and Buffers</h4><p>åœ¨æ ‡å‡†çš„IO APIä¸­,ä½¿ç”¨å­—èŠ‚æµå’Œå­—ç¬¦æµã€‚åœ¨NIOä¸­éœ€è¦ç”¨åˆ°channelså’Œbuffersã€‚æ•°æ®æ€»æ˜¯ä»channelè·å–è¯»åˆ°bufferä¸­,ä»bufferä¸­è·å–å†™å…¥channelã€‚</p>
<h4 id="Non-blocking_IO"><a href="#Non-blocking_IO" class="headerlink" title="Non-blocking IO"></a>Non-blocking IO</h4><p>Java NIO å¯ä»¥éé˜»å¡å¼çš„å¤„ç†IOã€‚æ¯”å¦‚,ä¸€ä¸ªçº¿ç¨‹å°†channelçš„æ•°æ®è¯»åˆ°bufferã€‚åœ¨è¯»çš„è¿‡ç¨‹ä¸­,çº¿ç¨‹å¯ä»¥åšå…¶ä»–äº‹æƒ…ã€‚ä¸€æ—¦æ•°æ®è¯»å–å®Œæ¯•æ”¾åˆ°bufferä¸­,çº¿ç¨‹åœ¨ç»§ç»­å¤„ç†ã€‚å†™æ•°æ®ä¹Ÿæ˜¯ä¸€æ ·çš„æ“ä½œã€‚</p>
<h4 id="Selectors"><a href="#Selectors" class="headerlink" title="Selectors"></a>Selectors</h4><p>Java NIO æœ‰ä¸ª ã€selectorsã€çš„æ¦‚å¿µ,ä¸€ä¸ªselectorå°±æ˜¯ä¸€ä¸ªå¯¹è±¡,é€šè¿‡äº‹ä»¶(æ¯”å¦‚:è¿æ¥æ‰“å¼€,æ•°æ®åˆ°è¾¾ç­‰ç­‰)ç›‘æ§å¤šä¸ªchannelsã€‚è¿™æ ·,ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹å°±å¯ä»¥ç›‘æ§å¤šä¸ªchannelçš„æ•°æ®ã€‚</p>
<p>è¿™äº›éƒ½æ˜¯å¦‚ä½•å·¥ä½œçš„,æœ¬ç³»åˆ—çš„ä¸‹ä¸€ç«  <a href="/">the Java NIO overview</a>ä¼šè¯¦ç»†æè¿°ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/06/25/Java-NIO-Tutorial/" data-id="cj03kfo2x0039uruq97dfwej5" class="article-share-link" data-share="baidu" data-title="Java NIO æ•™ç¨‹">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/06/25/Java-NIO-Tutorial/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-NIO/">Java NIO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionArray" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/24/JavaReflectionArray/" class="article-date">
  <time datetime="2016-06-24T12:52:55.000Z" itemprop="datePublished">2016-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/24/JavaReflectionArray/">Javaåå°„ä¹‹æ•°ç»„</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/arrays.html" target="_blank" rel="external">Java Reflection Arrays</a></p>
<p>åœ¨Javaåå°„é‡Œé¢å¤„ç†æ•°ç»„æœ‰æ—¶æ˜¯æ¯”è¾ƒæ£˜æ‰‹çš„.ç‰¹åˆ«æ˜¯ä½ éœ€è¦è·å¾—æ•°ç»„å¯¹è±¡çš„å®é™…ç±»å‹.ä¾‹å¦‚ int[]ç­‰å¾….è¿™ç¯‡æ–‡å­—å°±æ¥è®¨è®ºé€šè¿‡åå°„å¦‚ä½•åˆ›å»ºæ•°ç»„å¦‚ä½•è·å–æ•°ç»„ä¸­çš„å¯¹è±¡.</p>
<h4 id="java-lang-reflect-Array"><a href="#java-lang-reflect-Array" class="headerlink" title="java.lang.reflect.Array"></a>java.lang.reflect.Array</h4><p>é€šè¿‡Javaåå°„ä½¿ç”¨æ•°ç»„ç”¨åˆ°çš„æ˜¯ç±»java.lang.reflect.Array,ä¸è¦å’ŒJavaé›†åˆä¸­çš„java.util.Arraysæ··æ·†.</p>
<h4 id="Creating_Arrays"><a href="#Creating_Arrays" class="headerlink" title="Creating Arrays"></a>Creating Arrays</h4><p>é€šè¿‡Javaåå°„åˆ›å»ºæ•°ç»„ä½¿ç”¨ç±»java.lang.reflect.Array,ä¸‹é¢ç»™å‡ºäº†åˆ›å»ºæ•°ç»„çš„ä¾‹å­:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = (<span class="keyword">int</span>[]) Array.newInstance(<span class="keyword">int</span>.class,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯åˆ›å»ºintç±»å‹æ•°ç»„çš„ä¾‹å­. Array.newInstance()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>int.class</code>ç»™å‡ºäº†æ•°ç»„å…ƒç´ ç±»å‹,ç¬¬äºŒä¸ªå‚æ•°<code>3</code>æ˜¯æ•°ç»„éœ€è¦åˆ†é…çš„ç©ºé—´</p>
<h4 id="Accessing_Arrays"><a href="#Accessing_Arrays" class="headerlink" title="Accessing Arrays"></a>Accessing Arrays</h4><p>é€šè¿‡åå°„è®¿é—®æ•°ç»„å…ƒç´ å¯ä»¥ä½¿ç”¨<code>Array.get()</code>å’Œ<code>Array.set()</code>æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] intArray = (<span class="keyword">int</span>[]) Array.newInstance(<span class="keyword">int</span>.class,<span class="number">3</span>);</span><br><span class="line">Array.set(intArray,<span class="number">0</span>,<span class="number">123</span>)</span><br><span class="line">Array.set(intArray,<span class="number">1</span>,<span class="number">456</span>)</span><br><span class="line">Array.set(intArray,<span class="number">1</span>,<span class="number">789</span>)</span><br><span class="line">   </span><br><span class="line">System.out.println(<span class="string">"intArray[0] = "</span> + Array.get(intArray, <span class="number">0</span>));</span><br><span class="line">System.out.println(<span class="string">"intArray[1] = "</span> + Array.get(intArray, <span class="number">1</span>));</span><br><span class="line">System.out.println(<span class="string">"intArray[2] = "</span> + Array.get(intArray, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>
<p>æ‰“å°å‡ºæ¥çš„ç»“æœä¸º:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">intArray[<span class="number">0</span>] = <span class="number">123</span></span><br><span class="line">intArray[<span class="number">1</span>] = <span class="number">456</span></span><br><span class="line">intArray[<span class="number">2</span>] = <span class="number">789</span></span><br></pre></td></tr></table></figure>
<h4 id="u83B7_u53D6_u6570_u7EC4_u7684Class_u5BF9_u8C61"><a href="#u83B7_u53D6_u6570_u7EC4_u7684Class_u5BF9_u8C61" class="headerlink" title="è·å–æ•°ç»„çš„Classå¯¹è±¡"></a>è·å–æ•°ç»„çš„Classå¯¹è±¡</h4><p>åœ¨æˆ‘ç¼–å†™<a href="http://butterfly.jenkov.com/" target="_blank" rel="external">Butterfly DI Container</a>çš„è„šæœ¬è¯­è¨€æ—¶ï¼Œå½“æˆ‘æƒ³é€šè¿‡åå°„è·å–æ•°ç»„çš„Classå¯¹è±¡æ—¶é‡åˆ°äº†ä¸€ç‚¹éº»çƒ¦ã€‚å¦‚æœä¸é€šè¿‡åå°„çš„è¯ä½ å¯ä»¥è¿™æ ·æ¥è·å–æ•°ç»„çš„Classå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class stringArrayClass = String[].class;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨Class.forName()æ–¹æ³•æ¥è·å–Classå¯¹è±¡åˆ™ä¸æ˜¯é‚£ä¹ˆç®€å•ã€‚æ¯”å¦‚ä½ å¯ä»¥åƒè¿™æ ·æ¥è·å¾—ä¸€ä¸ªåŸç”Ÿæ•°æ®ç±»å‹ï¼ˆprimitiveï¼‰intæ•°ç»„çš„Classå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class intArray = Class.forName(<span class="string">"[I"</span>);</span><br></pre></td></tr></table></figure>
<p>åœ¨JVMä¸­å­—æ¯Iä»£è¡¨intç±»å‹ï¼Œå·¦è¾¹çš„â€˜[â€™ä»£è¡¨æˆ‘æƒ³è¦çš„æ˜¯ä¸€ä¸ªintç±»å‹çš„æ•°ç»„ï¼Œè¿™ä¸ªè§„åˆ™åŒæ ·é€‚ç”¨äºå…¶ä»–çš„åŸç”Ÿæ•°æ®ç±»å‹ã€‚å¯¹äºæ™®é€šå¯¹è±¡ç±»å‹çš„æ•°ç»„æœ‰ä¸€ç‚¹ç»†å¾®çš„ä¸åŒï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class stringArrayClass = Class.forName(<span class="string">"[Ljava.lang.String;"</span>);</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„â€˜[Lâ€™çš„å³è¾¹æ˜¯ç±»åï¼Œç±»åçš„å³è¾¹æ˜¯ä¸€ä¸ªâ€˜;â€™ç¬¦å·ã€‚è¿™ä¸ªçš„å«ä¹‰æ˜¯ä¸€ä¸ªæŒ‡å®šç±»å‹çš„æ•°ç»„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ ä¸èƒ½é€šè¿‡Class.forName()æ–¹æ³•è·å–ä¸€ä¸ªåŸç”Ÿæ•°æ®ç±»å‹çš„Classå¯¹è±¡ã€‚ä¸‹é¢è¿™ä¸¤ä¸ªä¾‹å­éƒ½ä¼šæŠ¥ClassNotFoundExceptionï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class intClass1 = Class.forName(<span class="string">"I"</span>);</span><br><span class="line">Class intClass2 = Class.forName(<span class="string">"int"</span>);</span><br></pre></td></tr></table></figure>
<p>æˆ‘é€šå¸¸ä¼šç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•æ¥è·å–æ™®é€šå¯¹è±¡ä»¥åŠåŸç”Ÿå¯¹è±¡çš„Classå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Class <span class="title">getClass</span><span class="params">(String className)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="string">"int"</span> .equals(className)) <span class="keyword">return</span> <span class="keyword">int</span> .class;</span><br><span class="line">  <span class="keyword">if</span>(<span class="string">"long"</span>.equals(className)) <span class="keyword">return</span> <span class="keyword">long</span>.class;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">return</span> Class.forName(className);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€æ—¦ä½ è·å–äº†ç±»å‹çš„Classå¯¹è±¡ï¼Œä½ å°±æœ‰åŠæ³•è½»æ¾çš„è·å–åˆ°å®ƒçš„æ•°ç»„çš„Classå¯¹è±¡ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šçš„ç±»å‹åˆ›å»ºä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œç„¶åé€šè¿‡è¿™ä¸ªç©ºçš„æ•°ç»„æ¥è·å–æ•°ç»„çš„Classå¯¹è±¡ã€‚è¿™æ ·åšæœ‰ç‚¹è®¨å·§ï¼Œä¸è¿‡å¾ˆæœ‰æ•ˆã€‚å¦‚ä¸‹ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class theClass = getClass(theClassName);</span><br><span class="line">Class stringArrayClass = Array.newInstance(theClass, <span class="number">0</span>).getClass();</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„æ–¹å¼æ¥è·å–æŒ‡å®šç±»å‹çš„æŒ‡å®šæ•°ç»„çš„Classå¯¹è±¡ã€‚æ— éœ€ä½¿ç”¨ç±»åæˆ–å…¶ä»–æ–¹å¼æ¥è·å–è¿™ä¸ªClasså¯¹è±¡ã€‚<br>ä¸ºäº†ç¡®ä¿Classå¯¹è±¡æ˜¯ä¸æ˜¯ä»£è¡¨ä¸€ä¸ªæ•°ç»„ï¼Œä½ å¯ä»¥ä½¿ç”¨Class.isArray()æ–¹æ³•æ¥è¿›è¡Œæ ¡éªŒï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class stringArrayClass = Array.newInstance(String.class, <span class="number">0</span>).getClass();</span><br><span class="line">System.out.println(<span class="string">"is array: "</span> + stringArrayClass.isArray());</span><br></pre></td></tr></table></figure>
<h4 id="u83B7_u53D6_u6570_u7EC4_u7684_u6210_u5458_u7C7B_u578B"><a href="#u83B7_u53D6_u6570_u7EC4_u7684_u6210_u5458_u7C7B_u578B" class="headerlink" title="è·å–æ•°ç»„çš„æˆå‘˜ç±»å‹"></a>è·å–æ•°ç»„çš„æˆå‘˜ç±»å‹</h4><p>ä¸€æ—¦ä½ è·å–äº†ä¸€ä¸ªæ•°ç»„çš„Classå¯¹è±¡ï¼Œä½ å°±å¯ä»¥é€šè¿‡Class.getComponentType()æ–¹æ³•è·å–è¿™ä¸ªæ•°ç»„çš„æˆå‘˜ç±»å‹ã€‚æˆå‘˜ç±»å‹å°±æ˜¯æ•°ç»„å­˜å‚¨çš„æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„int[]çš„æˆå‘˜ç±»å‹å°±æ˜¯ä¸€ä¸ªClasså¯¹è±¡int.classã€‚String[]çš„æˆå‘˜ç±»å‹å°±æ˜¯java.lang.Stringç±»çš„Classå¯¹è±¡ã€‚<br>ä¸‹é¢æ˜¯ä¸€ä¸ªè®¿é—®æ•°ç»„æˆå‘˜ç±»å‹çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String[] strings = <span class="keyword">new</span> String[<span class="number">3</span>];</span><br><span class="line">Class stringArrayClass = strings.getClass();</span><br><span class="line">Class stringArrayComponentType = stringArrayClass.getComponentType();</span><br><span class="line">System.out.println(stringArrayComponentType);</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­ä¼šæ‰“å°<code>java.lang.String</code>ä»£è¡¨è¿™ä¸ªæ•°ç»„çš„æˆå‘˜ç±»å‹æ˜¯å­—ç¬¦ä¸²ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/06/24/JavaReflectionArray/" data-id="cj03kfo2t0035uruqawo7ranz" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹æ•°ç»„">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/06/24/JavaReflectionArray/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionGenerics" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/21/JavaReflectionGenerics/" class="article-date">
  <time datetime="2016-05-20T16:52:55.000Z" itemprop="datePublished">2016-05-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/21/JavaReflectionGenerics/">Javaåå°„ä¹‹æ³›å‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/generics.html" target="_blank" rel="external">Java Reflection Generics</a></p>
<h4 id="Generic_Method_Return_Types"><a href="#Generic_Method_Return_Types" class="headerlink" title="Generic Method Return Types"></a>Generic Method Return Types</h4><p>å¦‚æœä½ å·²ç»è·å–ä¸€ä¸ª<code>java.lang.reflect.Method</code>çš„å¯¹è±¡ï¼Œå°±å¯ä»¥è·å–åˆ°è¯¥å¯¹è±¡ä¸Šçš„æ³›å‹è¿”å›ç±»å‹ä¿¡æ¯ã€‚å¦‚æœæ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªè¢«å‚æ•°åŒ–ç±»å‹ä¹‹ä¸­ï¼ˆå¦‚T fun()ï¼‰é‚£ä¹ˆä½ æ— æ³•è·å–ä»–çš„å…·ä½“ç±»å‹ï¼Œä½†æ˜¯å¦‚æœæ–¹æ³•è¿”å›ä¸€ä¸ªæ³›å‹ç±»ï¼ˆå¦‚List fun()ï¼‰é‚£ä¹ˆä½ å°±å¯ä»¥è·å¾—è¿™ä¸ªæ³›å‹ç±»çš„å…·ä½“å‚æ•°åŒ–ç±»å‹ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­å®šä¹‰äº†ä¸€ä¸ªç±»è¿™ä¸ªç±»ä¸­çš„æ–¹æ³•è¿”å›ç±»å‹æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> List&lt;String&gt; stringList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getStringList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stringList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­æ˜¯å¯ä»¥è·å–åˆ°<code>getStringList()</code>æ–¹æ³•çš„æ³›å‹è¿”å›ç±»å‹ã€‚å¯ä»¥æ£€æµ‹åˆ°<code>getStringList()</code>æ–¹æ³•è¿”å›çš„Listå¹¶ä¸ä»…ä»…æ˜¯ä¸€ä¸ªListã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">       Method method = MyClass.class.getMethod(<span class="string">"getStringList"</span>);</span><br><span class="line">       Type returnType = method.getGenericReturnType();</span><br><span class="line">       <span class="keyword">if</span> (returnType <span class="keyword">instanceof</span> ParameterizedType) &#123;</span><br><span class="line">           ParameterizedType type = (ParameterizedType) returnType;</span><br><span class="line">           Type[] typeArguments = type.getActualTypeArguments();</span><br><span class="line">           <span class="keyword">for</span> (Type typeArgument : typeArguments) &#123;</span><br><span class="line">               Class typeArgClass = (Class) typeArgument;</span><br><span class="line">               System.out.println(<span class="string">"typeArgClass:"</span> + typeArgClass);<span class="comment">//typeArgClass:class java.lang.String</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">       e.printStackTrace();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>Type[]æ•°ç»„typeArgumentsåªæœ‰ä¸€ä¸ªç»“æœ â€“ ä¸€ä¸ªä»£è¡¨java.lang.Stringçš„Classç±»çš„å®ä¾‹ã€‚Classç±»å®ç°äº†Typeæ¥å£ã€‚</p>
<h4 id="Generic_Method_Parameter_Types"><a href="#Generic_Method_Parameter_Types" class="headerlink" title="Generic Method Parameter Types"></a>Generic Method Parameter Types</h4><p>ä½¿ç”¨Javaåå°„è¿˜å¯ä»¥è·å–å‚æ•°ä¸Šçš„æ³›å‹ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> List&lt;String&gt; stringList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStringList</span><span class="params">(List&lt;String&gt; stringList)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stringList = stringList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åƒä¸‹é¢è¿™æ ·è·å–å‚æ•°ä¸Šçš„æ³›å‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Method method2 = MyClass.class.getMethod(<span class="string">"setStringList"</span>, List.class);</span><br><span class="line">Type[] genericParameterTypes = method2.getGenericParameterTypes();</span><br><span class="line"><span class="keyword">for</span> (Type genericParameterType : genericParameterTypes) &#123;</span><br><span class="line">    <span class="keyword">if</span>(genericParameterType <span class="keyword">instanceof</span> ParameterizedType)&#123;</span><br><span class="line">        ParameterizedType aType = (ParameterizedType) genericParameterType;</span><br><span class="line">        Type[] parameterArgTypes = aType.getActualTypeArguments();</span><br><span class="line">        <span class="keyword">for</span>(Type parameterArgType : parameterArgTypes)&#123;</span><br><span class="line">            Class parameterArgClass = (Class) parameterArgType;</span><br><span class="line">            System.out.println(<span class="string">"parameterArgClass = "</span> + parameterArgClass);<span class="comment">//parameterArgClass = class java.lang.String</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ‰“å°å‡ºâ€parameterArgType = java.lang.Stringâ€ã€‚parameterArgTypesè¿™ä¸ªæ•°ç»„åŒ…å«çš„æ˜¯ä»£è¡¨java.lang.Stringçš„Classç±»çš„å®ä¾‹ã€‚Classç±»å®ç°äº†Typeæ¥å£ã€‚</p>
<h4 id="Generic_Field_Types"><a href="#Generic_Field_Types" class="headerlink" title="Generic Field Types"></a>Generic Field Types</h4><p>è®¿é—®publicçš„æ³›å‹å˜é‡ï¼Œæ— è®ºè¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªç±»çš„é™æ€æˆå‘˜å˜é‡æˆ–æ˜¯å®ä¾‹æˆå‘˜å˜é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> List&lt;String&gt; stringList = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Field field = MyClass.class.getField(<span class="string">"stringList"</span>);</span><br><span class="line"></span><br><span class="line">Type genericFieldType = field.getGenericType();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(genericFieldType <span class="keyword">instanceof</span> ParameterizedType)&#123;</span><br><span class="line">    ParameterizedType aType = (ParameterizedType) genericFieldType;</span><br><span class="line">    Type[] fieldArgTypes = aType.getActualTypeArguments();</span><br><span class="line">    <span class="keyword">for</span>(Type fieldArgType : fieldArgTypes)&#123;</span><br><span class="line">        Class fieldArgClass = (Class) fieldArgType;</span><br><span class="line">        System.out.println(<span class="string">"fieldArgClass = "</span> + fieldArgClass);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ‰“å°å‡ºâ€fieldArgClass = java.lang.Stringâ€ã€‚fieldArgTypesè¿™ä¸ªæ•°ç»„åŒ…å«çš„æ˜¯ä»£è¡¨java.lang.Stringçš„Classç±»çš„å®ä¾‹ã€‚Classç±»å®ç°äº†Typeæ¥å£ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/05/21/JavaReflectionGenerics/" data-id="cj03kfo2i002xuruqy7sjsgt4" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹æ³›å‹">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/05/21/JavaReflectionGenerics/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionAnnotations" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/18/JavaReflectionAnnotations/" class="article-date">
  <time datetime="2016-05-17T16:52:55.000Z" itemprop="datePublished">2016-05-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/18/JavaReflectionAnnotations/">Javaåå°„ä¹‹æ³¨è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/annotations.html" target="_blank" rel="external">Java Reflection Annotations</a></p>
<p>åœ¨è¿è¡Œæ—¶çŠ¶æ€ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡åå°„è·å–javaå¯¹è±¡ä¸Šçš„æ³¨è§£ã€‚</p>
<h4 id="What_are_Java_Annotations_3F"><a href="#What_are_Java_Annotations_3F" class="headerlink" title="What are Java Annotations?"></a>What are Java Annotations?</h4><p>æ³¨è§£æ˜¯Java5å¢åŠ çš„åŠŸèƒ½ã€‚æ³¨è§£æ˜¯ä¸€ç§æ³¨é‡Šæˆ–è€…æ˜¯å…ƒæ•°æ®å¯ä»¥ç›´æ¥æ’å…¥åˆ°Javaä»£ç ä¸­ã€‚åœ¨ç¼–è¯‘æ—¶ï¼Œé€šè¿‡é¢„ç¼–è¯‘å·¥å…·å¤„ç†ï¼›æˆ–è€…åœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡javaåå°„å¤„ç†ã€‚ä¸‹é¢æ˜¯ä¸ªæ³¨è§£çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@MyAnnotation</span>(name=<span class="string">"someName"</span>,  value = <span class="string">"Hello World"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TheClass</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç±»TheClassçš„ä¸Šé¢æœ‰ä¸ª<code>@MyAnnotation</code>çš„æ³¨è§£ã€‚æ³¨è§£çš„å®šä¹‰ç±»ä¼¼æ¥å£å®šä¹‰ï¼Œä¸‹é¢æ˜¯æ³¨è§£å®šä¹‰çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="annotation">@Target</span>(ElementType.TYPE)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="annotation">@interface</span> MyAnnotation &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºæ³¨è§£æ˜¯ï¼Œåœ¨interfaceå‰é¢ä½¿ç”¨<code>@</code>å³å¯ã€‚åˆ›å»ºä¹‹åå°±å¯ä»¥åœ¨ä»£ç é‡Œä½¿ç”¨äº†ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ã€‚</p>
<p><code>@Retention(RetentionPolicy.RUNTIME)</code> å’Œ <code>@Target(ElementType.TYPE)</code>è¿™ä¸¤ä¸ªæŒ‡ä»¤ï¼ŒæŒ‡æ˜äº†è¿™ä¸ªæ³¨è§£å¦‚ä½•è¢«ä½¿ç”¨ã€‚</p>
<p><code>@Retention(RetentionPolicy.RUNTIME)</code> æ„å‘³ç€åœ¨è¿è¡Œæ—¶çŠ¶æ€å¯ä»¥ä½¿ç”¨javaåå°„è·å–æ³¨è§£ï¼Œå¦‚æœä¸è®¾ç½®è¿™ä¸ªæŒ‡ä»¤ï¼Œåœ¨è¿è¡Œæ—¶çŠ¶æ€ï¼Œæ³¨è§£ä¸ä¼šè¢«ä¿å­˜ï¼ŒåŒæ ·çš„ä¹Ÿå°±ä¸èƒ½é€šè¿‡åå°„è·å–ã€‚ </p>
<p><code>@Target(ElementType.TYPE)</code>æ„å‘³ç€æ³¨è§£åªèƒ½ç”¨åœ¨Typesä¸Šï¼ˆæ¯”å¦‚ç±»å’Œæ¥å£ï¼‰ã€‚ä½ ä¹Ÿå¯ä»¥æŒ‡å®šä¸º<code>METHOD</code>æˆ–è€…æ˜¯<code>FIELD</code>ï¼Œæˆ–è€…æ˜¯ä¸ä½¿ç”¨Targetè¿™ä¸ªæŒ‡ä»¤ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ç±»ï¼Œæ–¹æ³•ï¼Œå˜é‡ä¸Šä½¿ç”¨äº†ã€‚</p>
<h4 id="Class_Annotations"><a href="#Class_Annotations" class="headerlink" title="Class Annotations"></a>Class Annotations</h4><p>ä½ å¯ä»¥åœ¨è¿è¡ŒæœŸè®¿é—®ç±»ï¼Œæ–¹æ³•ï¼Œå˜é‡çš„æ³¨è§£ã€‚ä¸‹é¢æ˜¯ç±»æ³¨è§£çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Class aClass = TheClass.class;</span><br><span class="line">Annotation[] annotations = aClass.getAnnotations();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(Annotation annotation : annotations)&#123;</span><br><span class="line">    <span class="keyword">if</span>(annotation <span class="keyword">instanceof</span> MyAnnotation)&#123;</span><br><span class="line">        MyAnnotation myAnnotation = (MyAnnotation) annotation;</span><br><span class="line">        System.out.println(<span class="string">"name: "</span> + myAnnotation.name());</span><br><span class="line">        System.out.println(<span class="string">"value: "</span> + myAnnotation.value());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥æŒ‡å®šç±»è¿›è¡Œè®¿é—®ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Class aClass = TheClass.class;</span><br><span class="line">Annotation annotation = aClass.getAnnotation(MyAnnotation.class);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(annotation <span class="keyword">instanceof</span> MyAnnotation)&#123;</span><br><span class="line">    MyAnnotation myAnnotation = (MyAnnotation) annotation;</span><br><span class="line">    System.out.println(<span class="string">"name: "</span> + myAnnotation.name());</span><br><span class="line">    System.out.println(<span class="string">"value: "</span> + myAnnotation.value());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Method_Annotations"><a href="#Method_Annotations" class="headerlink" title="Method Annotations"></a>Method Annotations</h4><p>ä¸‹é¢æ˜¯æ³¨è§£åœ¨æ–¹æ³•ä¸Šçš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TheClass2</span> </span>&#123;</span><br><span class="line">  <span class="annotation">@MyAnnotation</span>(name=<span class="string">"someName"</span>,  value = <span class="string">"Hello World"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥åƒä¸‹é¢è¿™æ ·è®¿é—®æ–¹æ³•æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Method method = TheClass2.class.getMethod(<span class="string">"doSomething"</span>);</span><br><span class="line">Annotation[] annotations = method.getDeclaredAnnotations();</span><br><span class="line"><span class="keyword">for</span>(Annotation annotation : annotations)&#123;</span><br><span class="line">    <span class="keyword">if</span>(annotation <span class="keyword">instanceof</span> MyAnnotation)&#123;</span><br><span class="line">        MyAnnotation myAnnotation = (MyAnnotation) annotation;</span><br><span class="line">        System.out.println(<span class="string">"name: "</span> + myAnnotation.name());</span><br><span class="line">        System.out.println(<span class="string">"value: "</span> + myAnnotation.value());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…æ˜¯æŒ‡å®šæ–¹æ³•æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Method method = TheClass2.class.getMethod(<span class="string">"doSomething"</span>);</span><br><span class="line">Annotation annotation = method.getAnnotation(MyAnnotation.class);</span><br><span class="line"><span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> MyAnnotation) &#123;</span><br><span class="line">    MyAnnotation myAnnotation = (MyAnnotation) annotation;</span><br><span class="line">    System.out.println(<span class="string">"name:"</span>+myAnnotation.name());</span><br><span class="line">    System.out.println(<span class="string">"value:"</span>+myAnnotation.value());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Parameter_Annotations"><a href="#Parameter_Annotations" class="headerlink" title="Parameter Annotations"></a>Parameter Annotations</h4><p>åœ¨æ–¹æ³•çš„å‚æ•°ä¸Šä½¿ç”¨æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TheClass3</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomethingElse</span><span class="params">(</span><br><span class="line">        @MyAnnotation(name=<span class="string">"aName"</span>, value=<span class="string">"aValue"</span>)</span> String parameter)</span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¿é—®æ–¹æ³•å‚æ•°ä¸Šçš„æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Method method = TheClass3.class.getMethod(<span class="string">"doSomethingElse"</span>);</span><br><span class="line">Annotation[][] parameterAnnotations = method.getParameterAnnotations();</span><br><span class="line">Class[] parameterTypes = method.getParameterTypes();</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(Annotation[] annotations : parameterAnnotations)&#123;</span><br><span class="line">  Class parameterType = parameterTypes[i++];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(Annotation annotation : annotations)&#123;</span><br><span class="line">    <span class="keyword">if</span>(annotation <span class="keyword">instanceof</span> MyAnnotation)&#123;</span><br><span class="line">        MyAnnotation myAnnotation = (MyAnnotation) annotation;</span><br><span class="line">        System.out.println(<span class="string">"param: "</span> + parameterType.getName());</span><br><span class="line">        System.out.println(<span class="string">"name : "</span> + myAnnotation.name());</span><br><span class="line">        System.out.println(<span class="string">"value: "</span> + myAnnotation.value());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„Method.getParameterAnnotations()è¿”å›çš„æ˜¯äºŒç»´æ•°ç»„ï¼ŒåŒ…å«æ¯ä¸ªå‚æ•°çš„æ³¨è§£æ•°ç»„ã€‚</p>
<h4 id="Field_Annotations"><a href="#Field_Annotations" class="headerlink" title="Field Annotations"></a>Field Annotations</h4><p>å˜é‡ä¸Šçš„æ³¨è§£ä½¿ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TheClass4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="annotation">@MyAnnotation</span>(name=<span class="string">"someName"</span>,  value = <span class="string">"Hello World"</span>)</span><br><span class="line">  <span class="keyword">public</span> String myField = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¿é—®å˜é‡ä¸Šçš„æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Field field = TheClass4.class.getField(<span class="string">"myField"</span>);</span><br><span class="line">Annotation[] annotations = field.getDeclaredAnnotations();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(Annotation annotation : annotations)&#123;</span><br><span class="line">    <span class="keyword">if</span>(annotation <span class="keyword">instanceof</span> MyAnnotation)&#123;</span><br><span class="line">        MyAnnotation myAnnotation = (MyAnnotation) annotation;</span><br><span class="line">        System.out.println(<span class="string">"name: "</span> + myAnnotation.name());</span><br><span class="line">        System.out.println(<span class="string">"value: "</span> + myAnnotation.value());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Field field = TheClass4.class.getField(<span class="string">"myField"</span>);</span><br><span class="line">Annotation annotation = field.getAnnotation(MyAnnotation.class);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(annotation <span class="keyword">instanceof</span> MyAnnotation)&#123;</span><br><span class="line">    MyAnnotation myAnnotation = (MyAnnotation) annotation;</span><br><span class="line">    System.out.println(<span class="string">"name: "</span> + myAnnotation.name());</span><br><span class="line">    System.out.println(<span class="string">"value: "</span> + myAnnotation.value());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/05/18/JavaReflectionAnnotations/" data-id="cj03kfo2w0037uruqus93y2j4" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹æ³¨è§£">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/05/18/JavaReflectionAnnotations/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionPrivateFieldsAndMethods" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/14/JavaReflectionPrivateFieldsAndMethods/" class="article-date">
  <time datetime="2016-05-13T16:52:55.000Z" itemprop="datePublished">2016-05-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/14/JavaReflectionPrivateFieldsAndMethods/">Javaåå°„ä¹‹ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html" target="_blank" rel="external">Java Reflection Methods</a></p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä»å¯¹è±¡å¤–éƒ¨è®¿é—®ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•æ˜¯ä¸è¢«å…è®¸çš„ï¼Œä½†æ˜¯é€šè¿‡åå°„å¯ä»¥å¾ˆå®¹æ˜“è·å–ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•ï¼Œåœ¨å•å…ƒæµ‹è¯•çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚</p>
<h6 id="Accessing_Private_Fields"><a href="#Accessing_Private_Fields" class="headerlink" title="Accessing Private Fields"></a>Accessing Private Fields</h6><p>è·å–ç§æœ‰å˜é‡ä½ éœ€è¦ç”¨åˆ°<code>Class.getDeclaredField(String name)</code>æˆ–è€…<code>Class.getDeclaredFields(String name)</code>æ–¹æ³•ã€‚<code>Class.getField(String name)</code>å’Œ<code>Class.getFields(String name)</code>æ–¹æ³•åªèƒ½è¿”å›å…¬æœ‰å˜é‡ã€‚ä¸‹é¢æ˜¯é€šè¿‡javaçš„åå°„è·å–ç§æœ‰å˜é‡ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Order privateObject = <span class="keyword">new</span> Order(<span class="string">"2016051901"</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Field privateField = Order.class.getDeclaredField(<span class="string">"orderId"</span>);</span><br><span class="line">    privateField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    String orderId = (String) privateField.get(privateObject);</span><br><span class="line">    System.out.println(<span class="string">"orderId:"</span> + orderId);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¼šæ‰“å°å‡ºã€orderId:2016051901ã€ï¼Œå€¼ä¸ºOrderå®ä¾‹ç§æœ‰å˜é‡orderIdçš„å€¼ã€‚</p>
<p><code>Order.class.getDeclaredField(&quot;orderId&quot;)</code>è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªç§æœ‰å˜é‡ï¼Œè¿™ä¸ªç§æœ‰å˜é‡æ˜¯Orderç±»ä¸­è‡ªå·±å®šä¹‰çš„å˜é‡ï¼Œè€Œä¸æ˜¯ç»§æ‰¿è‡ªå…¶çˆ¶ç±»çš„å˜é‡ã€‚</p>
<p><code>privateField.setAccessible(true);</code>è¿™ä¸ªæ–¹æ³•ä¼šå…³é—­å®ä¾‹ç±»çš„åå°„è®¿é—®æ£€æŸ¥ã€‚ç°åœ¨ä½ å¯ä»¥è®¿é—®ç§æœ‰çš„ï¼Œå—ä¿æŠ¤çš„å’ŒåŒ…çº§è®¿é—®çš„å˜é‡ã€‚</p>
<h6 id="Accessing_Private_Methods"><a href="#Accessing_Private_Methods" class="headerlink" title="Accessing Private Methods"></a>Accessing Private Methods</h6><p>è¦è·å–ç§æœ‰æ–¹æ³•ä½ éœ€è¦ä½¿ç”¨æ–¹æ³•<code>Class.getDeclaredMethod(String name, Class[] parameterTypes)</code>æˆ–è€…<code>Class.getDeclaredMethods()</code>ã€‚<code>Class.getMethod()</code>å’Œ<code>Class.getMethods()</code>æ–¹æ³•åªæ˜¯è¿”å›çš„å…¬æœ‰æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨javaåå°„è®¿é—®ç§æœ‰æ–¹æ³•çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Order privateObject = <span class="keyword">new</span> Order(<span class="string">"2016051901"</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Method privateMethod = Order.class.getDeclaredMethod(<span class="string">"getOrderId"</span>);</span><br><span class="line">    privateMethod.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">    String returnValue = (String) privateMethod.invoke(privateObject);</span><br><span class="line">    System.out.println(<span class="string">"returnValue = "</span> + returnValue);</span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¼šæ‰“å°å‡ºã€returnValue=2016051901ã€ï¼Œå…¶å€¼æ˜¯é€šè¿‡åå°„è°ƒç”¨Orderå®ä¾‹çš„ç§æœ‰æ–¹æ³•ã€getOrderId()ã€è·å–åˆ°çš„ã€‚</p>
<p><code>Order.class.getDeclaredMethod(&quot;getOrderId&quot;)</code>,è¿™ä¸ªæ–¹æ³•ä¹Ÿä¹‹åè¿”å›Orderç±»è‡ªå·±çš„ç§æœ‰æ–¹æ³•ï¼Œè€Œéå…¶ç»§æ‰¿è‡ªçˆ¶ç±»çš„ç§æœ‰æ–¹æ³•ã€‚</p>
<p><code>privateMethod.setAcessible(true)</code>ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šå…³é—­å®ä¾‹ç±»çš„ç§æœ‰æ–¹æ³•åå°„è®¿é—®æ£€æŸ¥ï¼Œç°åœ¨ä½ å¯ä»¥é€šè¿‡åå°„è·å–çš„å®ä¾‹çš„ç§æœ‰ï¼Œå—ä¿æŠ¤å’ŒåŒ…çº§è®¿é—®æƒé™çš„æ–¹æ³•ã€‚ </p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/05/14/JavaReflectionPrivateFieldsAndMethods/" data-id="cj03kfo2e002suruqh1rtyvrw" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/05/14/JavaReflectionPrivateFieldsAndMethods/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionMethods" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/13/JavaReflectionMethods/" class="article-date">
  <time datetime="2016-05-12T16:52:55.000Z" itemprop="datePublished">2016-05-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/13/JavaReflectionMethods/">Javaåå°„ä¹‹æ–¹æ³•</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/methods.html" target="_blank" rel="external">Java Reflection Methods</a></p>
<h5 id="Obtaining_Method_Objects"><a href="#Obtaining_Method_Objects" class="headerlink" title="Obtaining Method Objects"></a>Obtaining Method Objects</h5><p>è·å–ç±»çš„æ–¹æ³•ï¼ŒMethod[]æ•°ç»„é‡Œé¢åªåŒ…å«ç±»ä¸­publicä¿®é¥°çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Method[] methods = orderClass.getMethods();</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨å…·ä½“çš„æ–¹æ³•ååŠå‚æ•°ç±»å‹ç›´æ¥è·å–,ä»¥Orderç±»ä¸­çš„getState()ï¼ŒsetState()æ–¹æ³•ä¸ºä¾‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Method methodHaveNoParameter = orderClass.getMethod(<span class="string">"getState"</span>,<span class="keyword">null</span>);<span class="comment">//è¯¥æ–¹æ³•æ²¡æœ‰å‚æ•°,nullçœç•¥ä¹Ÿå¯ä»¥</span></span><br><span class="line">    System.out.println(methodHaveNoParameter.getName());<span class="comment">//getState</span></span><br><span class="line">    </span><br><span class="line">    Method methodHaveParameter = orderClass.getMethod(<span class="string">"setState"</span>,<span class="keyword">new</span> Class[]&#123;String.class&#125;);<span class="comment">//è¯¥æ–¹æœ‰Stringç±»å‹å‚æ•°</span></span><br><span class="line">    System.out.println(methodHaveParameter.getName());<span class="comment">//setState</span></span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Method_Parameters_and_Return_Types"><a href="#Method_Parameters_and_Return_Types" class="headerlink" title="Method Parameters and Return Types"></a>Method Parameters and Return Types</h4><p>è·å–æ–¹æ³•çš„å‚æ•°ç±»å‹åŠè¿”å›ç±»å‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Class[] parameters = methodHaveParameter.getParameterTypes();</span><br><span class="line">System.out.println(parameters[<span class="number">0</span>].getName());<span class="comment">//class java.lang.String</span></span><br><span class="line"></span><br><span class="line">Class returnType = methodHaveParameter.getReturnType();</span><br><span class="line">System.out.println(returnType);<span class="comment">//void</span></span><br></pre></td></tr></table></figure>
<h4 id="Invoking_Methods_using_Method_Object"><a href="#Invoking_Methods_using_Method_Object" class="headerlink" title="Invoking Methods using Method Object"></a>Invoking Methods using Method Object</h4><p>ä½¿ç”¨<code>invoke</code>è°ƒç”¨æ–¹æ³•,ä»¥Orderç±»ä¸­çš„pay()æ–¹æ³•ä¸ºä¾‹ï¼Œè¯¥æ–¹æ³•ç›´æ¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Method methodPay = orderClass.getMethod(<span class="string">"pay"</span>,<span class="keyword">new</span> Class[]&#123;String.class&#125;);</span><br><span class="line">    Order order = <span class="keyword">new</span> Order();</span><br><span class="line">    Object returnValue = methodPay.invoke(order,<span class="string">"2016050902"</span>);</span><br><span class="line">    System.out.println(returnValue);<span class="comment">//2016050902 pay success</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ–¹æ³•æ˜¯staticçš„ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨invokeæ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆç±»çš„å®ä¾‹ï¼‰å¯ä»¥ä¼ null(ä¼ å…¥ç±»çš„å®ä¾‹ä¹Ÿæ˜¯å¯ä»¥çš„)ã€‚</p>
<h5 id="u83B7_u53D6getter/setter_u65B9_u6CD5"><a href="#u83B7_u53D6getter/setter_u65B9_u6CD5" class="headerlink" title="è·å–getter/setteræ–¹æ³•"></a>è·å–getter/setteræ–¹æ³•</h5><p>ä½¿ç”¨åå°„æ—¶ï¼Œå¦‚æœéœ€è¦è·å–ç±»çš„getterå’Œsetteræ–¹æ³•ï¼Œéœ€è¦è·å–æ‰€æœ‰methodsï¼Œå¹¶æ ¹æ®getter/setterçš„ç‰¹ç‚¹æ‰¾åˆ°ä»–ä»¬ã€‚</p>
<ul>
<li>Getter<br>  getteræ–¹æ³•ä»¥ã€Œgetã€å¼€å¤´ï¼Œæ²¡æœ‰å‚æ•°ï¼Œæœ‰è¿”å›å€¼</li>
<li>Setter<br>  setteræ–¹æ³•ä»¥ã€Œsetã€å¼€å¤´ï¼Œæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å€¼å¯èƒ½æœ‰å¯èƒ½æ²¡æœ‰</li>
</ul>
<p>ä¸‹é¢æ˜¯ä»ç±»ä¸­æ‰¾åˆ°get/setæ–¹æ³•çš„ä¾‹å­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printGettersSetters</span><span class="params">(Class aClass)</span></span>&#123;</span><br><span class="line">  Method[] methods = aClass.getMethods();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span>(Method method : methods)&#123;</span><br><span class="line">    <span class="keyword">if</span>(isGetter(method)) System.out.println(<span class="string">"getter: "</span> + method);</span><br><span class="line">    <span class="keyword">if</span>(isSetter(method)) System.out.println(<span class="string">"setter: "</span> + method);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isGetter</span><span class="params">(Method method)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!method.getName().startsWith(<span class="string">"get"</span>))      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">if</span>(method.getParameterTypes().length != <span class="number">0</span>)   <span class="keyword">return</span> <span class="keyword">false</span>;  </span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">void</span>.class.equals(method.getReturnType()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isSetter</span><span class="params">(Method method)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!method.getName().startsWith(<span class="string">"set"</span>)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">if</span>(method.getParameterTypes().length != <span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/05/13/JavaReflectionMethods/" data-id="cj03kfo2g002vuruqlfmvxmdx" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹æ–¹æ³•">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/05/13/JavaReflectionMethods/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionFields" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/12/JavaReflectionFields/" class="article-date">
  <time datetime="2016-05-11T16:52:55.000Z" itemprop="datePublished">2016-05-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/12/JavaReflectionFields/">Javaåå°„ä¹‹å˜é‡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <h3 id="Java_Reflection_Fields"><a href="#Java_Reflection_Fields" class="headerlink" title="Java Reflection Fields"></a>Java Reflection Fields</h3><p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/fields.html" target="_blank" rel="external">Java Reflection Fields</a></p>
<h4 id="Obtaining_Field_Objects"><a href="#Obtaining_Field_Objects" class="headerlink" title="Obtaining Field Objects"></a>Obtaining Field Objects</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Field[] fields = orderClass.getFields();</span><br></pre></td></tr></table></figure>
<p>Field[]æ•°ç»„é‡Œé¢åªåŒ…å«ç±»ä¸­publicä¿®é¥°çš„æˆå‘˜å˜é‡</p>
<p>å¦‚æœçŸ¥é“ç±»çš„æˆå‘˜å˜é‡åç§°ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡getField()æ–¹æ³•è·å–åˆ°ï¼Œæˆå‘˜å˜é‡çš„è®¿é—®æƒé™åŒæ ·éœ€è¦æ˜¯publicçš„</p>
<h4 id="Field_Name_and_Type"><a href="#Field_Name_and_Type" class="headerlink" title="Field Name and Type"></a>Field Name and Type</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Field field = orderClass.getField(<span class="string">"description"</span>);</span><br><span class="line">    System.out.println(field.getName());<span class="comment">//æˆå‘˜å˜é‡åç§°description</span></span><br><span class="line">    System.out.println(field.getType());<span class="comment">//æˆå‘˜å˜é‡ç±»å‹class java.lang.String</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;<span class="comment">//å¦‚æœä¸å­˜åœ¨descriptionçš„å˜é‡ï¼Œä¼šæŠ›å‡ºNoSuchFieldException</span></span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Getting_and_Setting_Field_Values"><a href="#Getting_and_Setting_Field_Values" class="headerlink" title="Getting and Setting Field Values"></a>Getting and Setting Field Values</h4><p>è·å¾—äº†fieldçš„å¼•ç”¨ï¼Œå°±å¯ä»¥é€šè¿‡get()ï¼Œset()æ–¹æ³•ï¼Œè·å–å’Œè®¾ç½®æˆå‘˜å˜é‡çš„å€¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Field field = orderClass.getField(<span class="string">"description"</span>);</span><br><span class="line">    Order order = <span class="keyword">new</span> Order();</span><br><span class="line">    Object value = field.get(order);</span><br><span class="line">    field.set(order, value);</span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¼ å…¥Field.get()/Field.set()æ–¹æ³•çš„å‚æ•°orderæ˜¯Orderç±»çš„å®ä¾‹ã€‚<br>å¦‚æœå˜é‡æ˜¯é™æ€å˜é‡çš„è¯(public static)é‚£ä¹ˆåœ¨è°ƒç”¨Field.get()/Field.set()æ–¹æ³•çš„æ—¶å€™ä¼ å…¥nullåšä¸ºå‚æ•°è€Œä¸ç”¨ä¼ é€’æ‹¥æœ‰è¯¥å˜é‡çš„ç±»çš„å®ä¾‹(ä¼ å…¥ç±»çš„å®ä¾‹ä¹Ÿæ˜¯å¯ä»¥çš„)ã€‚</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/05/12/JavaReflectionFields/" data-id="cj03kfo2m002zuruqx96qgcf6" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹å˜é‡">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/05/12/JavaReflectionFields/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionConstructors" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/11/JavaReflectionConstructors/" class="article-date">
  <time datetime="2016-05-10T16:52:55.000Z" itemprop="datePublished">2016-05-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/11/JavaReflectionConstructors/">Javaåå°„ä¹‹æ„é€ å‡½æ•°</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/constructors.html" target="_blank" rel="external">Java Reflection Constructors</a></p>
<h4 id="u83B7_u53D6_u6784_u9020_u51FD_u6570_u7684_u5BF9_u8C61"><a href="#u83B7_u53D6_u6784_u9020_u51FD_u6570_u7684_u5BF9_u8C61" class="headerlink" title="è·å–æ„é€ å‡½æ•°çš„å¯¹è±¡"></a>è·å–æ„é€ å‡½æ•°çš„å¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Constructor[] constructors = orderClass.getConstructors();</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°çš„å…·ä½“å‚æ•°ç±»å‹ç›´æ¥è·å–å•ç‹¬çš„æ„é€ å‡½æ•°ï¼Œè€Œä¸ç”¨è·å–å…¨éƒ¨çš„Constructors</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Constructor constructor = orderClass.getConstructor(<span class="keyword">new</span> Class[]&#123;String.class&#125;);</span><br><span class="line">    System.out.println(constructor.getName());<span class="comment">//com.larry.bean.Order</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;<span class="comment">//æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ„é€ å‡½æ•°ä¼šæŠ›å‡ºNoSuchMethodException</span></span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="u6784_u9020_u51FD_u6570_u7684_u53C2_u6570_u7C7B_u578B"><a href="#u6784_u9020_u51FD_u6570_u7684_u53C2_u6570_u7C7B_u578B" class="headerlink" title="æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹"></a>æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹</h4><p>å¯ä»¥åƒä¸‹é¢è¿™æ ·è·å–æ„é€ å‡½æ•°çš„å‚æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class[] parameterTypes = constructor.getParameterTypes();</span><br><span class="line">parameterTypes[<span class="number">0</span>].getName();<span class="comment">//java.lang.String</span></span><br></pre></td></tr></table></figure>
<h4 id="u7528_u6784_u9020_u51FD_u6570_u5BF9_u8C61_u5B9E_u4F8B_u5316_u4E00_u4E2A_u7C7B"><a href="#u7528_u6784_u9020_u51FD_u6570_u5BF9_u8C61_u5B9E_u4F8B_u5316_u4E00_u4E2A_u7C7B" class="headerlink" title="ç”¨æ„é€ å‡½æ•°å¯¹è±¡å®ä¾‹åŒ–ä¸€ä¸ªç±»"></a>ç”¨æ„é€ å‡½æ•°å¯¹è±¡å®ä¾‹åŒ–ä¸€ä¸ªç±»</h4><p>constructor.newInstance()æ–¹æ³•çš„æ–¹æ³•å‚æ•°æ˜¯ä¸€ä¸ªå¯å˜å‚æ•°åˆ—è¡¨ï¼Œä½†æ˜¯å½“ä½ è°ƒç”¨æ„é€ æ–¹æ³•çš„æ—¶å€™ä½ å¿…é¡»æä¾›ç²¾ç¡®çš„å‚æ•°ï¼Œå³å½¢å‚ä¸å®å‚å¿…é¡»ä¸€ä¸€å¯¹åº”ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æ„é€ æ–¹æ³•éœ€è¦ä¸€ä¸ªStringç±»å‹çš„å‚æ•°ï¼Œé‚£æˆ‘ä»¬åœ¨è°ƒç”¨newInstanceæ–¹æ³•çš„æ—¶å€™å°±å¿…é¡»ä¼ å…¥ä¸€ä¸ªStringç±»å‹çš„å‚æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Constructor constructor = Order.class.getConstructor(String.class);</span><br><span class="line">    Order order = (Order) constructor.newInstance(<span class="string">"2016050901"</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/05/11/JavaReflectionConstructors/" data-id="cj03kfo2p0031uruqamefy2rj" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹æ„é€ å‡½æ•°">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/05/11/JavaReflectionConstructors/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaReflectionClasses" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/09/JavaReflectionClasses/" class="article-date">
  <time datetime="2016-05-08T16:52:55.000Z" itemprop="datePublished">2016-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/09/JavaReflectionClasses/">Javaåå°„ä¹‹å¯¹è±¡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>åŸæ–‡åœ°å€<a href="http://tutorials.jenkov.com/java-reflection/classes.html" target="_blank" rel="external">Java Reflection Classes</a></p>
<h5 id="u83B7_u53D6class_u5BF9_u8C61"><a href="#u83B7_u53D6class_u5BF9_u8C61" class="headerlink" title="è·å–classå¯¹è±¡"></a>è·å–classå¯¹è±¡</h5><p>Javaä¸­çš„æ‰€æœ‰ç±»å‹åŒ…æ‹¬åŸºæœ¬ç±»å‹(int, long, floatç­‰ç­‰)ï¼Œå³ä½¿æ˜¯æ•°ç»„éƒ½æœ‰ä¸ä¹‹å…³è”çš„Classç±»çš„å¯¹è±¡ã€‚<br>å¦‚æœä½ åœ¨ç¼–è¯‘æœŸçŸ¥é“ä¸€ä¸ªç±»çš„åå­—çš„è¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼è·å–ä¸€ä¸ªç±»çš„Classå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class orderClass = Order.class;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ åœ¨ç¼–è¯‘æœŸä¸çŸ¥é“ç±»çš„åå­—ï¼Œä½†æ˜¯ä½ å¯ä»¥åœ¨è¿è¡ŒæœŸè·å¾—åˆ°ç±»åçš„å­—ç¬¦ä¸²,é‚£ä¹ˆä½ åˆ™å¯ä»¥è¿™ä¹ˆåšæ¥è·å–Classå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String className = ... ;<span class="comment">//åœ¨è¿è¡ŒæœŸè·å–çš„ç±»åå­—ç¬¦ä¸²</span></span><br><span class="line">Class <span class="class"><span class="keyword">class</span> </span>= Class.forName(className);</span><br></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨Class.forName()æ–¹æ³•æ—¶ï¼Œä½ å¿…é¡»æä¾›ä¸€ä¸ªç±»çš„å…¨åï¼Œè¿™ä¸ªå…¨ååŒ…æ‹¬ç±»æ‰€åœ¨çš„åŒ…çš„åå­—</p>
<h5 id="Class_Name__u7C7B_u540D"><a href="#Class_Name__u7C7B_u540D" class="headerlink" title="Class Name ç±»å"></a>Class Name ç±»å</h5><p>é€šè¿‡<code>getName()</code> æ–¹æ³•è¿”å›ç±»çš„å…¨é™å®šç±»å,ä¸åŒ…å«åŒ…åä½¿ç”¨<code>getSimpleName()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">orderClass.getName();<span class="comment">//com.larry.bean.Order</span></span><br><span class="line">orderClass.getSimpleName();</span><br></pre></td></tr></table></figure>
<h5 id="Modifiers__u4FEE_u9970_u7B26"><a href="#Modifiers__u4FEE_u9970_u7B26" class="headerlink" title="Modifiers ä¿®é¥°ç¬¦"></a>Modifiers ä¿®é¥°ç¬¦</h5><p>é€šè¿‡Classå¯¹è±¡æ¥è®¿é—®ä¸€ä¸ªç±»çš„ä¿®é¥°ç¬¦ï¼Œå³public,private,staticç­‰çš„å…³é”®å­—;</p>
<p>ä¿®é¥°ç¬¦éƒ½è¢«åŒ…è£…æˆä¸€ä¸ªintç±»å‹çš„æ•°å­—ï¼Œè¿™æ ·æ¯ä¸ªä¿®é¥°ç¬¦éƒ½æ˜¯ä¸€ä¸ªä½æ ‡è¯†(flag bit)ï¼Œè¿™ä¸ªä½æ ‡è¯†å¯ä»¥è®¾ç½®å’Œæ¸…é™¤ä¿®é¥°ç¬¦çš„ç±»å‹;</p>
<p>ä½¿ç”¨java.lang.reflect.Modifierç±»ä¸­çš„æ–¹æ³•æ¥æ£€æŸ¥ä¿®é¥°ç¬¦çš„ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> modifiers = orderClass.getModifiers();</span><br><span class="line"></span><br><span class="line">Modifier.isAbstract(modifiers);</span><br><span class="line">Modifier.isFinal(modifiers);</span><br><span class="line">Modifier.isInterface(modifiers);</span><br><span class="line">Modifier.isNative(modifiers);</span><br><span class="line">Modifier.isPrivate(modifiers);</span><br><span class="line">Modifier.isProtected(modifiers);</span><br><span class="line">Modifier.isPublic(modifiers);<span class="comment">//true</span></span><br><span class="line">Modifier.isStatic(modifiers);</span><br><span class="line">Modifier.isStrict(modifiers);</span><br><span class="line">Modifier.isSynchronized(modifiers);</span><br><span class="line">Modifier.isTransient(modifiers);</span><br><span class="line">Modifier.isVolatile(modifiers);</span><br></pre></td></tr></table></figure>
<h5 id="Package_Info__u5305"><a href="#Package_Info__u5305" class="headerlink" title="Package Info åŒ…"></a>Package Info åŒ…</h5><p>Packageå¯¹è±¡ä½ å¯ä»¥è·å–åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚åŒ…å</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Package packages = orderClass.getPackage();</span><br><span class="line">packages.getName();<span class="comment">//com.larry.bean</span></span><br></pre></td></tr></table></figure>
<h5 id="Superclass__u7236_u7C7B"><a href="#Superclass__u7236_u7C7B" class="headerlink" title="Superclass çˆ¶ç±»"></a>Superclass çˆ¶ç±»</h5><p>superclasså¯¹è±¡å…¶å®å°±æ˜¯ä¸€ä¸ªClassç±»çš„å®ä¾‹ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç»§ç»­åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè¿›è¡Œåå°„æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class superClass = orderClass.getSuperclass();</span><br><span class="line">superClass.getName();<span class="comment">//java.lang.Object</span></span><br></pre></td></tr></table></figure>
<h5 id="Implemented_Interfaces__u5B9E_u73B0_u7684_u63A5_u53E3"><a href="#Implemented_Interfaces__u5B9E_u73B0_u7684_u63A5_u53E3" class="headerlink" title="Implemented Interfaces å®ç°çš„æ¥å£"></a>Implemented Interfaces å®ç°çš„æ¥å£</h5><p>è·å–æŒ‡å®šç±»æ‰€å®ç°çš„æ¥å£é›†åˆ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class[] interfaces = orderClass.getInterfaces();</span><br></pre></td></tr></table></figure>
<p>getInterfaces()æ–¹æ³•ä»…ä»…åªè¿”å›å½“å‰ç±»æ‰€å®ç°çš„æ¥å£ã€‚å½“å‰ç±»çš„çˆ¶ç±»å¦‚æœå®ç°äº†æ¥å£ï¼Œè¿™äº›æ¥å£æ˜¯ä¸ä¼šåœ¨è¿”å›çš„Classé›†åˆä¸­çš„ï¼Œå°½ç®¡å®é™…ä¸Šå½“å‰ç±»å…¶å®å·²ç»å®ç°äº†çˆ¶ç±»æ¥å£</p>
<h5 id="Constructors__u6784_u9020_u51FD_u6570"><a href="#Constructors__u6784_u9020_u51FD_u6570" class="headerlink" title="Constructors æ„é€ å‡½æ•°"></a>Constructors æ„é€ å‡½æ•°</h5><h6 id="u83B7_u53D6_u6784_u9020_u51FD_u6570_u7684_u5BF9_u8C61"><a href="#u83B7_u53D6_u6784_u9020_u51FD_u6570_u7684_u5BF9_u8C61" class="headerlink" title="è·å–æ„é€ å‡½æ•°çš„å¯¹è±¡"></a>è·å–æ„é€ å‡½æ•°çš„å¯¹è±¡</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Constructor[] constructors = orderClass.getConstructors();</span><br></pre></td></tr></table></figure>
<h5 id="Method__u65B9_u6CD5"><a href="#Method__u65B9_u6CD5" class="headerlink" title="Method æ–¹æ³•"></a>Method æ–¹æ³•</h5><p>è·å–ç±»çš„æ–¹æ³•ï¼ŒMethod[]æ•°ç»„é‡Œé¢åªåŒ…å«ç±»ä¸­publicä¿®é¥°çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Method[] methods = orderClass.getMethods();</span><br></pre></td></tr></table></figure>
<h5 id="Field__u53D8_u91CF"><a href="#Field__u53D8_u91CF" class="headerlink" title="Field å˜é‡"></a>Field å˜é‡</h5><p>è·å–æˆå‘˜å˜é‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Field[] fields = orderClass.getFields();</span><br></pre></td></tr></table></figure>
<h5 id="Annotations__u6CE8_u89E3"><a href="#Annotations__u6CE8_u89E3" class="headerlink" title="Annotations æ³¨è§£"></a>Annotations æ³¨è§£</h5><p>è·å–ç±»çš„æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Annotation[] annotations = orderClass.getAnnotations();</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/05/09/JavaReflectionClasses/" data-id="cj03kfo2r0033uruqtnid9jcg" class="article-share-link" data-share="baidu" data-title="Javaåå°„ä¹‹å¯¹è±¡">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/05/09/JavaReflectionClasses/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-SE/">Java SE</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ä½¿ç”¨Spring-Boot-Jquery-Datatableså®ç°ç®¡ç†å¹³å°çš„è¡¨æ ¼" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/03/ä½¿ç”¨Spring-Boot-Jquery-Datatableså®ç°ç®¡ç†å¹³å°çš„è¡¨æ ¼/" class="article-date">
  <time datetime="2016-04-03T06:21:46.000Z" itemprop="datePublished">2016-04-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/03/ä½¿ç”¨Spring-Boot-Jquery-Datatableså®ç°ç®¡ç†å¹³å°çš„è¡¨æ ¼/">ä½¿ç”¨Spring Boot Jquery Datatableså®ç°ç®¡ç†å¹³å°çš„è¡¨æ ¼</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>æœ€è¿‘åœ¨å…¬å¸åšä¸€ä¸ªè¿è¥å¹³å°,å¢åˆ æ”¹æŸ¥çš„é‚£ç§,éœ€è¦ä¸€ä¸ªå¤šåŠŸèƒ½çš„è¡¨æ ¼,ç½‘ä¸Šçœ‹åˆ°Jqueryçš„DataTablesåŠŸèƒ½å¾ˆä¸°å¯Œ,æŸ¥è¯¢,æ’åº,ç¿»é¡µç­‰ç­‰åŠŸèƒ½å®Œå–„,<br>ä½†æ˜¯<a href="http://www.datatables.net/" target="_blank" rel="external">DataTableså®˜ç½‘</a>ä¸Šçš„ä¾‹å­,è¡¨æ ¼æ•°æ®éƒ½æ²¡æœ‰ä»æœåŠ¡ç«¯è·å–,ç”Ÿäº§ä¸Šä½¿ç”¨è¿˜å¾—è‡ªå·±æ‘¸ç´¢ä¸‹.å¦å¤–,å…¬å¸ä½¿ç”¨<br>Spring bootè¿™ä¸ªæ¡†æ¶,é…ç½®ç®€å•,ä¸‹é¢æˆ‘ä»¬ä¸€èµ·åšä¸€ä¸ªæ•´åˆçš„ä¾‹å­</p>
<h3 id="u65B0_u5EFASpring_boot_u7684_u5E94_u7528"><a href="#u65B0_u5EFASpring_boot_u7684_u5E94_u7528" class="headerlink" title="æ–°å»ºSpring bootçš„åº”ç”¨"></a>æ–°å»ºSpring bootçš„åº”ç”¨</h3><p>æ–°å»ºä¸ªé¡¹ç›®springboot-datatables-demo,æˆ‘ä½¿ç”¨çš„æ˜¯intellij idea,åˆ›å»ºä¸ªmavené¡¹ç›®,åœ¨pomé‡Œé¢å¼•ç”¨åŒ…å,åˆ›å»ºmainæ–¹æ³•å³å¯ä¸»è¦ä»£ç å¦‚ä¸‹:<br>(è¯¦ç»†è®²è§£å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ—¥å¿—<a href="http://suqun.github.io/2016/02/17/%E7%AC%AC%E4%B8%80%E4%B8%AASpring-Boot%E5%BA%94%E7%94%A8/">ç¬¬ä¸€ä¸ªSpring Bootåº”ç”¨</a>)</p>
<p>####pom.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">xmlns</span>=<span class="value">"http://maven.apache.org/POM/4.0.0"</span></span><br><span class="line">         <span class="attribute">xmlns:xsi</span>=<span class="value">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">         <span class="attribute">xsi:schemaLocation</span>=<span class="value">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="title">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.larry<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>springboot-datatables-demo<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.2.5.RELEASE<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="title">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="title">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>0.9.1.2<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>net.sourceforge.nekohtml<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>nekohtml<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.9.21<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.16.4<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.mockito<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>mockito-core<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.10.19<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="title">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>net.coobird<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>thumbnailator<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>0.4.8<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">version</span>&gt;</span>1.2.8<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="title">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">id</span>&gt;</span>spring-releases<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">name</span>&gt;</span>Spring Releases<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">url</span>&gt;</span>https://repo.spring.io/libs-release<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">pluginRepositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">pluginRepository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">id</span>&gt;</span>spring-releases<span class="tag">&lt;/<span class="title">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">name</span>&gt;</span>Spring Releases<span class="tag">&lt;/<span class="title">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">url</span>&gt;</span>https://repo.spring.io/libs-release<span class="tag">&lt;/<span class="title">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">pluginRepository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">pluginRepositories</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="SddApplication-java"><a href="#SddApplication-java" class="headerlink" title="SddApplication.java"></a>SddApplication.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.larry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SddApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SddApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ok,æ·»åŠ å®Œä¸Šé¢ä¸¤ä¸ªä¸»è¦çš„å†…å®¹mavenå¼•å…¥ç›¸å…³åŒ…ä»¥å,å°±å¯ä»¥è¿è¡Œå•¦,åœ¨SDDApplicationä¸Šå³å‡»runä¸€ä¸‹â€¦..é¢,æ˜¯ä¸æ˜¯æŠ¥é”™äº†,è²Œä¼¼æŠŠæ•°æ®åº“ç»™å¿˜å•¦.<br>æˆ‘ä»¬ä½¿ç”¨mysqlæ•°æ®åº“,éœ€è¦æ·»åŠ æ•°æ®åº“é…ç½®ç±»config.java,æ·»åŠ é…ç½®æ–‡ä»¶application.properties</p>
<h4 id="u5EFA_u8868"><a href="#u5EFA_u8868" class="headerlink" title="å»ºè¡¨"></a>å»ºè¡¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">SET NAMES utf8;</span><br><span class="line">SET FOREIGN_KEY_CHECKS = <span class="number">0</span>;</span><br><span class="line">DROP TABLE IF EXISTS `app`;</span><br><span class="line">CREATE TABLE `app` (</span><br><span class="line">  `id` bigint(<span class="number">20</span>) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `create_time` datetime DEFAULT NULL,</span><br><span class="line">  `description` text,</span><br><span class="line">  `hot` int(<span class="number">8</span>) DEFAULT <span class="string">'0'</span>,</span><br><span class="line">  `keywords` text,</span><br><span class="line">  `url` varchar(<span class="number">255</span>) NOT NULL,</span><br><span class="line">  `disabled` int(<span class="number">2</span>) NOT NULL DEFAULT <span class="string">'0'</span>,</span><br><span class="line">  `name` varchar(<span class="number">50</span>) DEFAULT NULL,</span><br><span class="line">  `update_time` datetime DEFAULT NULL,</span><br><span class="line">  `is_delete` bit(<span class="number">1</span>) DEFAULT NULL COMMENT <span class="string">'æ˜¯å¦åˆ é™¤ï¼Œ0ï¼šåˆ é™¤'</span>,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">1</span> DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure>
<p>####application.propertiesæ·»åŠ æ•°æ®åº“é…ç½®ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">spring.thymeleaf.mode=LEGACYHTML5</span><br><span class="line">spring.thymeleaf.encoding=UTF-<span class="number">8</span></span><br><span class="line">spring.thymeleaf.cache=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line">spring.datasource.c3p0.driver-class-name=com.mchange.v2.c3p0.ComboPooledDataSource</span><br><span class="line">spring.datasource.c3p0.jdbc-url=jdbc:mysql://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">3306</span>/<span class="built_in">test</span>?useUnicode=yes&amp;characterEncoding=UTF-<span class="number">8</span></span><br><span class="line">spring.datasource.c3p0.username=root</span><br><span class="line">spring.datasource.c3p0.password=</span><br><span class="line">spring.datasource.c3p0.min-evictable-idle-time-millis=<span class="number">30000</span></span><br><span class="line">spring.jpa.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect</span><br><span class="line">spring.jpa.hibernate.ddl-auto=update</span><br><span class="line">spring.jpa.show-sql=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯thymeleafæ¨¡æ¿å¼•æ“,éœ€è¦åœ¨resourceä¸‹é¢æ·»åŠ æ–‡ä»¶å¤¹templates,å†æ·»åŠ ä¸ªhtml, éšä¾¿å»ºä¸ªhtmlå«index.html,åœ¨bodyé‡Œé¢å†™ä¸ª hello worldï¼ å¥½äº†ã€‚</p>
<p>ç„¶å,æˆ‘ä»¬runä¸€ä¸‹è¯•è¯•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2016</span>-<span class="number">04</span>-<span class="number">03</span> <span class="number">15</span>:<span class="number">29</span>:<span class="number">27.850</span>  INFO <span class="number">1847</span> --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): <span class="number">8080</span> (http)</span><br><span class="line"><span class="number">2016</span>-<span class="number">04</span>-<span class="number">03</span> <span class="number">15</span>:<span class="number">29</span>:<span class="number">27.852</span>  INFO <span class="number">1847</span> --- [           main] com.larry.SddApplication                 : Started SddApplication <span class="keyword">in</span> <span class="number">4.522</span> seconds ...</span><br></pre></td></tr></table></figure></p>
<p>å½“æˆ‘ä»¬å‘ç°è¿™ä¸¤å¥è¯æ—¶,è¯´æ˜æˆ‘ä»¬é¡¹ç›®å·²ç»å¯åŠ¨æˆåŠŸäº†.ä¸è¿‡è¾“å…¥<a href="http://localhost:8080/æµè§ˆå™¨ä»ç„¶ä¼šæŠ¥é”™,æˆ‘ä»¬é…ç½®ä¸‹è·¯ç”±è®©/è·¯å¾„é»˜è®¤è·³è½¬åˆ°indexæ¨¡æ¿ä¸Š" target="_blank" rel="external">http://localhost:8080/æµè§ˆå™¨ä»ç„¶ä¼šæŠ¥é”™,æˆ‘ä»¬é…ç½®ä¸‹è·¯ç”±è®©/è·¯å¾„é»˜è®¤è·³è½¬åˆ°indexæ¨¡æ¿ä¸Š</a>.</p>
<p>###MvcConfig</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.larry.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="annotation">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">""</span>).setViewName(<span class="string">"index"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯å,æµè§ˆå™¨ä¸­è¾“å…¥<a href="http://localhost:8080" target="_blank" rel="external">http://localhost:8080</a> å“ˆå“ˆï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°ç†Ÿæ‚‰çš„ hello worldï¼ å•¦ã€‚</p>
<h3 id="datatables"><a href="#datatables" class="headerlink" title="datatables"></a>datatables</h3><p>å•°å—¦äº†åŠå¤©ç»ˆäºè¿›å…¥ä¸»é¢˜äº†ã€‚ã€‚ã€‚ã€‚æˆ‘åœ¨githubä¸Šå‘ç°æœ‰ä¸ªå“¥ä»¬å·²ç»å°è£…äº†ä¸€å¥—<a href="https://github.com/darrachequesne/spring-data-jpa-datatables" target="_blank" rel="external">spring data jpa + jquery datatables</a>çš„é¡¹ç›®ï¼Œç›´æ¥pomé‡Œé¢å¼•ç”¨ä¸‹ï¼Œå°±okæ‹‰ï¼Œä¸‹é¢çœ‹çœ‹å…·ä½“æ€ä¹ˆæ˜¯ç”¨</p>
<h4 id="Maven__u4F9D_u8D56"><a href="#Maven__u4F9D_u8D56" class="headerlink" title="Maven ä¾èµ–"></a>Maven ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>com.github.darrachequesne<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>spring-data-jpa-datatables<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™å“¥ä»¬ä½¿ç”¨çš„hibernateåŒ…æ˜¯4.3.10.Finalï¼Œè¿™ä¸ªå’Œspring-bootç”¨çš„hibernateè¦ä¸€è‡´ï¼Œå¦åˆ™å¯åŠ¨çš„æ—¶å€™å°±ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†1.2.5.RELEASEçš„ç‰ˆæœ¬çš„spring bootã€‚</p>
<h4 id="u542F_u7528DataTablesRepository_u5DE5_u5382"><a href="#u542F_u7528DataTablesRepository_u5DE5_u5382" class="headerlink" title="å¯ç”¨DataTablesRepositoryå·¥å‚"></a>å¯ç”¨DataTablesRepositoryå·¥å‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@SpringBootApplication</span></span><br><span class="line"><span class="annotation">@EnableJpaRepositories</span>(repositoryFactoryBeanClass = DataTablesRepositoryFactoryBean.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SddApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SddApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="u6269_u5C55DataTablesRepository_u63A5_u53E3"><a href="#u6269_u5C55DataTablesRepository_u63A5_u53E3" class="headerlink" title="æ‰©å±•DataTablesRepositoryæ¥å£"></a>æ‰©å±•DataTablesRepositoryæ¥å£</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AppRepository</span> <span class="keyword">extends</span> <span class="title">DataTablesRepository</span>&lt;<span class="title">App</span>, <span class="title">Long</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="u8BBE_u7F6Emodel_u5C5E_u6027"><a href="#u8BBE_u7F6Emodel_u5C5E_u6027" class="headerlink" title="è®¾ç½®modelå±æ€§"></a>è®¾ç½®modelå±æ€§</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="annotation">@Id</span></span><br><span class="line">    <span class="annotation">@GeneratedValue</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="annotation">@Column</span>(nullable = <span class="keyword">false</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="annotation">@Column</span>(nullable = <span class="keyword">false</span>)</span><br><span class="line">    <span class="annotation">@URL</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> String keywords;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> disabled;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hot;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@CreationTimestamp</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="annotation">@UpdateTimestamp</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> isDelete;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="u5305_u542Bjquery-spring-friendly-js"><a href="#u5305_u542Bjquery-spring-friendly-js" class="headerlink" title="åŒ…å«jquery.spring-friendly.js"></a>åŒ…å«jquery.spring-friendly.js</h4><p>It overrides jQuery data serialization to allow Spring MVC to correctly map input parameters (by changing column[0][data] to column[0].data in request payload)</p>
<h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h4><p>index.html<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;link rel="stylesheet" href="//cdn.datatables.net/1.10.11/css/jquery.dataTables.min.css"&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"/dataTables.bootstrap.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"box-header with-border"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">button</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">class</span>=<span class="value">"btn btn-info"</span> &gt;</span>å¢åŠ 12æ¡æ•°æ®<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span><span class="comment">&lt;!-- /.box-header --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"box-body"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">table</span> <span class="attribute">id</span>=<span class="value">"appTable"</span> <span class="attribute">class</span>=<span class="value">"table table-bordered table-striped"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span><span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>åç§°<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>åœ°å€<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>å…³é”®å­—<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>æè¿°<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>çƒ­åº¦<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>æ·»åŠ æ—¥æœŸ<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>æ›´æ–°æ—¶é—´<span class="tag">&lt;/<span class="title">th</span>&gt;</span> <span class="comment">&lt;!--æ—¥æœŸæ ¼å¼åœ¨application.propertiesæ·»åŠ ï¼šspring.jackson.date-format=yyyy-MM-dd HH:mm:ss--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">th</span>&gt;</span>çŠ¶æ€<span class="tag">&lt;/<span class="title">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span><span class="comment">&lt;!-- /.box-body --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/jQuery-2.1.4.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/jquery.dataTables.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/dataTables.bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/jquery.spring-friendly.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    $().ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="string">'#appTable'</span>).DataTable(&#123;</span><br><span class="line">            ajax: <span class="string">'/all'</span>,</span><br><span class="line">            serverSide: <span class="literal">true</span>,</span><br><span class="line">            order: [</span><br><span class="line">                [<span class="number">8</span>, <span class="string">'desc'</span>]<span class="comment">//æ›´æ–°æ—¶é—´å€’åº</span></span><br><span class="line">            ],</span><br><span class="line">            columns: [&#123;</span><br><span class="line">                data: <span class="literal">null</span>,</span><br><span class="line">                orderable: <span class="literal">false</span>,</span><br><span class="line">                searchable: <span class="literal">false</span>,</span><br><span class="line">                render: <span class="function"><span class="keyword">function</span> (<span class="params">data, type, row</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">"&lt;td&gt;&lt;input type='checkbox' name='allocated' value='"</span> + row.id + <span class="string">"'&gt;&lt;/td&gt;"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">''</span>,</span><br><span class="line">                orderable: <span class="literal">false</span>,</span><br><span class="line">                searchable: <span class="literal">false</span>,</span><br><span class="line">                render: <span class="function"><span class="keyword">function</span> (<span class="params">data, type, row</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">"&lt;td&gt;&lt;button type='button' class='btn btn-primary btn-sm' onclick='editApp("</span> + row.id + <span class="string">")'&gt;ç¼–è¾‘&lt;/button&gt; &amp;nbsp;"</span> +</span><br><span class="line"><span class="comment">//                            "&lt;button type='button' class='btn btn-info btn-sm' onclick='detail("+row.id+")'&gt;è¯¦æƒ…&lt;/button&gt;" +</span></span><br><span class="line">                            <span class="string">"&amp;nbsp;&lt;button type='button' class='btn btn-warning btn-sm' onclick='deleteSingle("</span>+row.id+<span class="string">")'&gt;åˆ é™¤&lt;/button&gt;"</span> +</span><br><span class="line">                            <span class="string">"&lt;/td&gt;"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'name'</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'url'</span>,</span><br><span class="line">                render: <span class="function"><span class="keyword">function</span> (<span class="params">data, type, row</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">var</span> shortUrl;</span><br><span class="line">                    <span class="keyword">if</span>(data.length&lt;<span class="number">30</span>)&#123;</span><br><span class="line">                        shortUrl = data ;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        shortUrl = data.substring(<span class="number">0</span>,<span class="number">30</span>)+<span class="string">"..."</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">"&lt;a href='"</span> + data + <span class="string">"' target='_blank'&gt;"</span>+shortUrl+<span class="string">"&lt;/a&gt;"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'keywords'</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'description'</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'hot'</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'createTime'</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'updateTime'</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                data: <span class="string">'disabled'</span>,</span><br><span class="line">                render: <span class="function"><span class="keyword">function</span> (<span class="params">data, type, row</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (row.disabled) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">"&lt;input type='checkbox' name='state-checkbox' value='"</span> + row.id + <span class="string">"'&gt;"</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">"&lt;input type='checkbox' name='state-checkbox' value='"</span> + row.id + <span class="string">"' checked&gt;"</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;]</span><br><span class="line"><span class="comment">//            initComplete: function () &#123;</span></span><br><span class="line"><span class="comment">//                $("input[name='state-checkbox']").bootstrapSwitch();</span></span><br><span class="line"><span class="comment">//            &#125;,</span></span><br><span class="line"><span class="comment">//            drawCallback: function() &#123;//Function that is called every time DataTables performs a draw.</span></span><br><span class="line"><span class="comment">//                $("input[name='state-checkbox']").bootstrapSwitch();</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    $(<span class="string">"button"</span>).on(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $.get(<span class="string">"init"</span>)</span><br><span class="line">                .success(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                    <span class="built_in">window</span>.location=<span class="string">"/"</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="AppController"><a href="#AppController" class="headerlink" title="AppController"></a>AppController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@ResponseBody</span></span><br><span class="line"><span class="annotation">@RequestMapping</span>(value = <span class="string">"all"</span>, method = RequestMethod.GET)</span><br><span class="line"><span class="function"><span class="keyword">public</span> DataTablesOutput&lt;App&gt; <span class="title">messages</span><span class="params">(@Valid DataTablesInput input)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> appRepository.findAll(input);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨åï¼Œæ·»åŠ æ•°æ®åï¼Œæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼Œå·²ç»å¯ä»¥åˆ†é¡µæœç´¢æ’åºäº†ã€‚<br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/datatables.png" alt="è¡¨æ ¼"><br>åˆ°è¿™é‡Œå°±å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„åŸºæœ¬ç›®æ ‡å·²ç»å®Œæˆäº†ã€‚ä¸è¿‡ä»ç„¶æœ‰ä¸ªé—®é¢˜ï¼Œç°åœ¨çš„è¿™ä¸ªæŸ¥è¯¢ç”¨çš„æ˜¯<code>findAll(input)</code>,å¦‚æœæˆ‘ä»¬è¦æ·»åŠ è¿‡æ»¤æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢å‘¢ã€‚å…¶å®<a href="https://github.com/darrachequesne" target="_blank" rel="external">darrachequesne</a>è¿™ä¸ªå“¥ä»¬å·²ç»å°è£…äº†ã€‚â€™DataTablesOutput<t> findAll(DataTablesInput var1, Specification<t> var2);â€™è°ƒç”¨è¿™ä¸ªå°±å¯ä»¥ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“æ€ä¹ˆç”¨</t></t></p>
<h3 id="u4F7F_u7528_u8FC7_u6EE4_u6761_u4EF6_u67E5_u8BE2"><a href="#u4F7F_u7528_u8FC7_u6EE4_u6761_u4EF6_u67E5_u8BE2" class="headerlink" title="ä½¿ç”¨è¿‡æ»¤æ¡ä»¶æŸ¥è¯¢"></a>ä½¿ç”¨è¿‡æ»¤æ¡ä»¶æŸ¥è¯¢</h3><p>è¿‡æ»¤æŸ¥è¯¢ä½¿ç”¨åˆ°äº†<a href="https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl/" target="_blank" rel="external">Spring Data JPA - Specifications</a>,è‡ªå·±è¦å»ç†Ÿæ‚‰äº†è§£ä¸‹è¿™ä¸ªã€‚</p>
<p>æˆ‘ä»¬åˆ›å»ºä¸ªSpecificationæ¡ä»¶ï¼Œç„¶åè°ƒç”¨â€™DataTablesOutput<t> findAll(DataTablesInput var1, Specification<t> var2);â€™<br>å‡è®¾æˆ‘ä»¬è¦æŸ¥è¯¢æ‰€æœ‰åˆ é™¤çŠ¶æ€ä¸ºfalseçš„è®°å½•</t></t></p>
<h4 id="AppSpec"><a href="#AppSpec" class="headerlink" title="AppSpec"></a>AppSpec</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppSpec</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Specification&lt;App&gt; <span class="title">isNotDelete</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (root, criteriaQuery, criteriaBuilder) -&gt; criteriaBuilder.isFalse(root.get(<span class="string">"isDelete"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šä½¿ç”¨äº†lambdaè¡¨è¾¾å¼ï¼Œå…¶å®å°±æ˜¯åˆ›å»ºäº†å†…éƒ¨ç±»</p>
<h4 id="u4FEE_u6539AppController"><a href="#u4FEE_u6539AppController" class="headerlink" title="ä¿®æ”¹AppController"></a>ä¿®æ”¹AppController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@RequestMapping</span>(value = <span class="string">"all"</span>, method = RequestMethod.GET)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataTablesOutput&lt;App&gt; <span class="title">messages</span><span class="params">(@Valid DataTablesInput input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> appRepository.findAll(input, AppSpec.isNotDelete());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯ï¼Œæ·»åŠ 12æ¡æ•°æ®ï¼Œè®¾ç½®6æ¡è®°å½•åˆ é™¤çŠ¶æ€ä¸ºtrueï¼Œçœ‹çœ‹æ•ˆæœ<br><img src="http://7xpk5e.com1.z0.glb.clouddn.com/datatables-delete.png" alt="è¿‡æ»¤åˆ é™¤è®°å½•"><br>è¡¨æ ¼ä¸‹é¢æ˜¾ç¤ºï¼š<br>Showing 1 to 6 of 6 entries (filtered from 12 total entries)<br>è¯´æ˜æˆ‘ä»¬è¿‡æ»¤æˆåŠŸäº†ï¼</p>
<p>æ‰“å®Œæ”¶å·¥ï¼<br>è¯¦ç»†ä»£ç ï¼Œæ¬¢è¿ä»æˆ‘çš„githubä¸Šè·å–ï¼š<a href="/">spring-data-jpa-jquery-datatables</a></p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/04/03/ä½¿ç”¨Spring-Boot-Jquery-Datatableså®ç°ç®¡ç†å¹³å°çš„è¡¨æ ¼/" data-id="cj03kfo0t0006uruqnoekmzjn" class="article-share-link" data-share="baidu" data-title="ä½¿ç”¨Spring Boot Jquery Datatableså®ç°ç®¡ç†å¹³å°çš„è¡¨æ ¼">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/04/03/ä½¿ç”¨Spring-Boot-Jquery-Datatableså®ç°ç®¡ç†å¹³å°çš„è¡¨æ ¼/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ç¬¬ä¸€ä¸ªSpring-Bootåº”ç”¨" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/17/ç¬¬ä¸€ä¸ªSpring-Bootåº”ç”¨/" class="article-date">
  <time datetime="2016-02-17T14:32:06.000Z" itemprop="datePublished">2016-02-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/17/ç¬¬ä¸€ä¸ªSpring-Bootåº”ç”¨/">ç¬¬ä¸€ä¸ªSpring Bootåº”ç”¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>åŸæ–‡åœ°å€ï¼š<a href="http://course.tianmaying.com/spring-boot-reference/lesson/lesson-11#0">å¤©ç è¥-SpringBootå‚è€ƒæŒ‡å—</a> æœ¬æ–‡åªæ˜¯å­¦ä¹ ç¬”è®°</p>
<h3 id="u51C6_u5907"><a href="#u51C6_u5907" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>è®©æˆ‘ä»¬ä½¿ç”¨Javaå¼€å‘ä¸€ä¸ªç®€å•çš„â€Hello World!â€ webåº”ç”¨ï¼Œæ¥å¼ºè°ƒä¸‹Spring Bootçš„ä¸€äº›å…³é”®ç‰¹æ€§ã€‚æˆ‘ä»¬å°†ä½¿ç”¨Mavenæ„å»ºè¯¥é¡¹ç›®ï¼Œå› ä¸ºå¤§å¤šæ•°IDEséƒ½æ”¯æŒå®ƒã€‚</p>
<p>æ³¨ï¼š<a href="/spring.io">spring.io</a>ç½‘ç«™åŒ…å«å¾ˆå¤šä½¿ç”¨Spring Bootçš„â€å…¥é—¨â€æŒ‡å—ã€‚å¦‚æœä½ æ­£åœ¨æ‰¾ç‰¹å®šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å…ˆå»é‚£ç…ç…ã€‚</p>
<p>åœ¨å¼€å§‹å‰ï¼Œä½ éœ€è¦æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œæ£€æŸ¥æ˜¯å¦å®‰è£…å¯ç”¨çš„Javaç‰ˆæœ¬å’ŒMavenï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ java -version</span><br><span class="line">java version <span class="string">"1.8.0_65"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build <span class="number">1.8</span>.<span class="number">0</span>_65-b17)</span><br><span class="line">Java HotSpot(TM) <span class="number">64</span>-Bit Server VM (build <span class="number">25.65</span>-b01, mixed mode)</span><br><span class="line">âœ  ~ mvn -v</span><br><span class="line">Apache Maven <span class="number">3.3</span>.<span class="number">9</span> (bb52d8502b132ec0a5a3f4c09453c07478323dc5; <span class="number">2015</span>-<span class="number">11</span>-<span class="number">11</span>T00:<span class="number">41</span>:<span class="number">47</span>+<span class="number">08</span>:<span class="number">00</span>)</span><br><span class="line">Maven home: /usr/<span class="built_in">local</span>/Cellar/maven/<span class="number">3.3</span>.<span class="number">9</span>/libexec</span><br><span class="line">Java version: <span class="number">1.8</span>.<span class="number">0</span>_65, vendor: Oracle Corporation</span><br><span class="line">Java home: /Library/Java/JavaVirtualMachines/jdk1.<span class="number">8.0</span>_65.jdk/Contents/Home/jre</span><br><span class="line">Default locale: zh_CN, platform encoding: UTF-<span class="number">8</span></span><br><span class="line">OS name: <span class="string">"mac os x"</span>, version: <span class="string">"10.11"</span>, arch: <span class="string">"x86_64"</span>, family: <span class="string">"mac"</span></span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2016/02/17/ç¬¬ä¸€ä¸ªSpring-Bootåº”ç”¨/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/02/17/ç¬¬ä¸€ä¸ªSpring-Bootåº”ç”¨/" data-id="cj03kfo0n0003uruq1r4u8tlr" class="article-share-link" data-share="baidu" data-title="ç¬¬ä¸€ä¸ªSpring Bootåº”ç”¨">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/02/17/ç¬¬ä¸€ä¸ªSpring-Bootåº”ç”¨/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring-Bootå®‰è£…" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/16/Spring-Bootå®‰è£…/" class="article-date">
  <time datetime="2016-02-16T14:54:54.000Z" itemprop="datePublished">2016-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/16/Spring-Bootå®‰è£…/">Spring Bootå®‰è£…</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h3><p>Spring Bootå¯ä»¥è·Ÿå…¸å‹çš„Javaå¼€å‘å·¥å…·ä¸€å—ä½¿ç”¨æˆ–å®‰è£…ä¸ºä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ã€‚ä¸ç®¡æ€æ ·ï¼Œä½ å°†éœ€è¦å®‰è£…Java SDK v1.6 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ éœ€è¦æ£€æŸ¥ä¸‹å½“å‰å®‰è£…çš„Javaç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>
<p>æ³¨ï¼šå°½ç®¡Spring Bootå…¼å®¹Java 1.6ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨Javaæœ€æ–°ç‰ˆæœ¬ã€‚</p>
<h3 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h3><p>Spring Bootå…¼å®¹Apache Maven 3.2æˆ–æ›´é«˜ç‰ˆæœ¬,OSXç³»ç»Ÿä¸‹ä½¿ç”¨brewå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install maven</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2016/02/16/Spring-Bootå®‰è£…/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/02/16/Spring-Bootå®‰è£…/" data-id="cj03kfo26002huruq40i0cgng" class="article-share-link" data-share="baidu" data-title="Spring Bootå®‰è£…">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/02/16/Spring-Bootå®‰è£…/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dockerå®¹å™¨çš„æ“ä½œ" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/30/dockerå®¹å™¨çš„æ“ä½œ/" class="article-date">
  <time datetime="2016-01-29T16:06:23.000Z" itemprop="datePublished">2016-01-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/30/dockerå®¹å™¨çš„æ“ä½œ/">dockerå®¹å™¨çš„æ“ä½œ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="u8FD0_u884C_u5BB9_u5668"><a href="#u8FD0_u884C_u5BB9_u5668" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run è¿è¡Œå®¹å™¨</span><br><span class="line">-i -t  åˆ›å»ºäº¤äº’å¼å®¹å™¨</span><br><span class="line"><span class="operator">-d</span> åˆ›å»ºå®ˆæŠ¤å¼å®¹å™¨</span><br><span class="line">--name ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -it ubuntu /bin/bash</span><br><span class="line">root@<span class="number">8</span>abb3326b08f:/<span class="comment"># cat /etc/issue.net</span></span><br><span class="line">Ubuntu <span class="number">14.04</span>.<span class="number">3</span> LTS</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2016/01/30/dockerå®¹å™¨çš„æ“ä½œ/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/01/30/dockerå®¹å™¨çš„æ“ä½œ/" data-id="cj03kfo19000suruqixsk219x" class="article-share-link" data-share="baidu" data-title="dockerå®¹å™¨çš„æ“ä½œ">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/01/30/dockerå®¹å™¨çš„æ“ä½œ/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/13/Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼/" class="article-date">
  <time datetime="2016-01-13T13:38:39.000Z" itemprop="datePublished">2016-01-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/13/Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼/">Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="u6B63_u5219_u8868_u8FBE_u5F0F_u4E0E_u901A_u914D_u7B26"><a href="#u6B63_u5219_u8868_u8FBE_u5F0F_u4E0E_u901A_u914D_u7B26" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ä¸é€šé…ç¬¦"></a>æ­£åˆ™è¡¨è¾¾å¼ä¸é€šé…ç¬¦</h3><p>Linuxä¸­çš„æ­£åˆ™è¡¨è¾¾å¼å’Œé€šé…ç¬¦æœ‰äº›åŒºåˆ«ï¼Œæ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åœ¨æ–‡ä»¶ä¸­åŒ¹é…ç¬¦åˆæ¡ä»¶çš„<code>å­—ç¬¦ä¸²</code>ï¼Œæ­£åˆ™æ˜¯<code>åŒ…å«åŒ¹é…</code>ã€‚grepï¼Œawkï¼Œsedç­‰å‘½ä»¤å¯ä»¥æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚é€šé…ç¬¦ç”¨æ¥åŒ¹é…ç¬¦åˆæ¡ä»¶çš„<code>æ–‡ä»¶å</code>ï¼Œé€šé…ç¬¦æ˜¯<code>å®Œå…¨åŒ¹é…</code>ã€‚lsï¼Œfindï¼Œcpè¿™äº›å‘½ä»¤ä¸æ”¯æŒæ­£åˆ™æ‰€æœ‰åªèƒ½ç”¨shellè‡ªå·±çš„é€šé…ç¬¦è¿›è¡ŒåŒ¹é…ã€‚</p>
        
          <p class="article-more-link">
            <a href="/2016/01/13/Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/01/13/Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼/" data-id="cj03kfo28002juruq03g31srf" class="article-share-link" data-share="baidu" data-title="Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/01/13/Shellç¼–ç¨‹ä¹‹æ­£åˆ™è¡¨è¾¾å¼/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/09/shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦/" class="article-date">
  <time datetime="2016-01-09T04:14:05.000Z" itemprop="datePublished">2016-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/09/shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦/">shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="u58F0_u660E_u53D8_u91CF_u7C7B_u578Bdeclare"><a href="#u58F0_u660E_u53D8_u91CF_u7C7B_u578Bdeclare" class="headerlink" title="å£°æ˜å˜é‡ç±»å‹declare"></a>å£°æ˜å˜é‡ç±»å‹declare</h3><p>declareè¯­æ³•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">declare</span> [-afiprx] å˜é‡å</span><br><span class="line">å‚æ•°è¯´æ˜ï¼š </span><br><span class="line">-   ï¼šè®¾ç½®å±æ€§</span><br><span class="line">+   ï¼šå–æ¶ˆå±æ€§</span><br><span class="line"><span class="operator">-a</span>  ï¼šå®šä¹‰ä¸ºæ•°ç»„ array </span><br><span class="line"><span class="operator">-f</span>  ï¼šå®šä¹‰ä¸ºå‡½æ•° <span class="keyword">function</span>  </span><br><span class="line">-i  ï¼šå®šä¹‰ä¸ºæ•´æ•° <span class="built_in">integer</span> </span><br><span class="line">-p  ï¼šæ˜¾ç¤ºå˜é‡è¢«å£°æ˜çš„ç±»å‹</span><br><span class="line">-r  ï¼šå®šä¹‰ä¸ºã€åªè¯»ã€ </span><br><span class="line">-x  ï¼šå®šä¹‰ä¸ºç¯å¢ƒå˜é‡ </span><br><span class="line"></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> -i a=<span class="number">47</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> -i b=<span class="number">53</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> -i c=<span class="variable">$a</span>+<span class="variable">$b</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">echo</span> <span class="variable">$c</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> -p c</span><br><span class="line"><span class="built_in">declare</span> -i c=<span class="string">"100"</span></span><br><span class="line"></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> <span class="operator">-a</span> arr[<span class="number">0</span>]=<span class="number">11</span>  &lt;==å®šä¹‰æ•°ç»„</span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> -p arr</span><br><span class="line"><span class="built_in">declare</span> <span class="operator">-a</span> arr=<span class="string">'([0]="11")'</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> <span class="operator">-a</span> arr[<span class="number">1</span>]=<span class="number">22</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">declare</span> -p arr</span><br><span class="line"><span class="built_in">declare</span> <span class="operator">-a</span> arr=<span class="string">'([0]="11" [1]="22")'</span></span><br><span class="line">bash-<span class="number">3.2</span>$</span><br><span class="line"></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">echo</span> <span class="variable">$&#123;arr&#125;</span>       &lt;==æŸ¥çœ‹æ•°ç»„æ–¹æ³•</span><br><span class="line"><span class="number">11</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">echo</span> <span class="variable">$&#123;arr[1]&#125;</span></span><br><span class="line"><span class="number">22</span></span><br><span class="line">bash-<span class="number">3.2</span>$ <span class="built_in">echo</span> <span class="variable">$&#123;arr[*]&#125;</span></span><br><span class="line"><span class="number">11</span> <span class="number">22</span></span><br><span class="line">bash-<span class="number">3.2</span>$</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2016/01/09/shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/01/09/shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦/" data-id="cj03kfo14000kuruqssld7j3v" class="article-share-link" data-share="baidu" data-title="shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/01/09/shellç¼–ç¨‹ä¹‹è¿ç®—ç¬¦/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Shellç¼–ç¨‹ä¹‹å˜é‡" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/04/Shellç¼–ç¨‹ä¹‹å˜é‡/" class="article-date">
  <time datetime="2016-01-04T14:34:27.000Z" itemprop="datePublished">2016-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/04/Shellç¼–ç¨‹ä¹‹å˜é‡/">Shellç¼–ç¨‹ä¹‹å˜é‡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="u53D8_u91CF"><a href="#u53D8_u91CF" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>å˜é‡çš„é…ç½®å®ˆåˆ™</p>
<ol>
<li><code>å˜é‡ä¸å˜é‡å†…å®¹ä»¥ä¸€ä¸ªç­‰å·ã€=ã€æ¥è¿ç»“</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br> ã€myname=VBirdã€</li>
<li><code>ç­‰å·ä¸¤è¾¹ä¸èƒ½ç›´æ¥æ¥ç©ºæ ¼ç¬¦</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºä¸ºé”™è¯¯ï¼š<br> ã€myname = VBirdã€æˆ–ã€myname=VBird Tsaiã€</li>
<li>å˜é‡åç§°åªèƒ½æ˜¯è‹±æ–‡å­—æ¯ä¸æ•°å­—ï¼Œä½†æ˜¯<code>å¼€å¤´å­—ç¬¦ä¸èƒ½æ˜¯æ•°å­—</code>ï¼Œå¦‚ä¸‹ä¸ºé”™è¯¯ï¼š<br> ã€2myname=VBirdã€</li>
<li>å˜é‡å†…å®¹è‹¥æœ‰ç©ºæ ¼ç¬¦å¯ä½¿ç”¨åŒå¼•å·ã€\â€ã€æˆ–å•å¼•å·ã€\â€™ã€å°†å˜é‡å†…å®¹ç»“åˆèµ·æ¥ï¼Œä½†<ul>
<li><code>åŒå¼•å·å†…çš„ç‰¹æ®Šå­—ç¬¦å¦‚ $ ç­‰ï¼Œå¯ä»¥ä¿æœ‰åŸæœ¬çš„ç‰¹æ€§</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>  ã€var=â€lang is $LANGâ€ã€åˆ™ã€echo $varã€å¯å¾—ã€lang is en_USã€</li>
<li><code>å•å¼•å·å†…çš„ç‰¹æ®Šå­—ç¬¦åˆ™ä»…ä¸ºä¸€èˆ¬å­—ç¬¦ (çº¯æ–‡æœ¬)</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br>  ã€var=â€™lang is $LANGâ€™ã€åˆ™ã€echo $varã€å¯å¾—ã€lang is $LANGã€</li>
</ul>
</li>
<li>å¯ç”¨<code>è½¬ä¹‰å­—ç¬¦ã€ \ ã€</code>å°†ç‰¹æ®Šç¬¦å·(å¦‚ [Enter], $, \, ç©ºæ ¼ç¬¦, `ç­‰)å˜æˆä¸€èˆ¬å­—ç¬¦ï¼›</li>
<li>åœ¨ä¸€ä¸²å‘½ä»¤ä¸­ï¼Œè¿˜éœ€è¦è—‰ç”±å…¶ä»–çš„å‘½ä»¤æä¾›çš„ä¿¡æ¯ï¼Œå¯ä»¥<code>ä½¿ç”¨åå•å¼•å·ã€</code>å‘½ä»¤<code>ã€æˆ– ã€$(å‘½ä»¤)ã€</code>ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œé‚£ä¸ª ` æ˜¯é”®ç›˜ä¸Šæ–¹çš„æ•°å­—é”® 1 å·¦è¾¹é‚£ä¸ªæŒ‰é”®ï¼Œè€Œä¸æ˜¯å•å¼•å·ï¼ ä¾‹å¦‚æƒ³è¦å–å¾—æ ¸å¿ƒç‰ˆæœ¬çš„é…ç½®ï¼š<br> ã€version=$(uname -r)ã€å†ã€echo $versionã€å¯å¾—ã€2.6.18-128.el5ã€</li>
<li>è‹¥è¯¥å˜é‡ä¸ºæ‰©å¢å˜é‡å†…å®¹æ—¶ï¼Œåˆ™å¯ç”¨ â€œ$å˜é‡åç§°â€ æˆ– ${å˜é‡} ç´¯åŠ å†…å®¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<br> ã€PATH=â€$PATHâ€:/home/binã€</li>
<li>è‹¥è¯¥å˜é‡éœ€è¦åœ¨å…¶ä»–å­ç¨‹åºè¿è¡Œï¼Œåˆ™<code>éœ€è¦ä»¥ export æ¥ä½¿å˜é‡å˜æˆç¯å¢ƒå˜é‡</code>ï¼š<br> ã€export PATHã€</li>
<li>é€šå¸¸å¤§å†™å­—ç¬¦ä¸ºç³»ç»Ÿé»˜è®¤å˜é‡ï¼Œè‡ªè¡Œé…ç½®å˜é‡å¯ä»¥ä½¿ç”¨å°å†™å­—ç¬¦ï¼Œæ–¹ä¾¿åˆ¤æ–­ (çº¯ç²¹ä¾ç…§ä½¿ç”¨è€…å…´è¶£ä¸å—œå¥½) ï¼›</li>
<li><code>å–æ¶ˆå˜é‡çš„æ–¹æ³•ä¸ºä½¿ç”¨ unset</code> ï¼šã€unset å˜é‡åç§°ã€ä¾‹å¦‚å–æ¶ˆ myname çš„é…ç½®ï¼š<br>ã€unset mynameã€</li>
<li><code>åœ¨Bashä¸­ï¼Œå˜é‡çš„é»˜è®¤ç±»å‹æ˜¯å­—ç¬¦ä¸²å‹</code></li>
</ol>
        
          <p class="article-more-link">
            <a href="/2016/01/04/Shellç¼–ç¨‹ä¹‹å˜é‡/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/01/04/Shellç¼–ç¨‹ä¹‹å˜é‡/" data-id="cj03kfo29002muruqxnzh58l3" class="article-share-link" data-share="baidu" data-title="Shellç¼–ç¨‹ä¹‹å˜é‡">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/01/04/Shellç¼–ç¨‹ä¹‹å˜é‡/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ShellåŸºç¡€" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/02/ShellåŸºç¡€/" class="article-date">
  <time datetime="2016-01-02T12:40:52.000Z" itemprop="datePublished">2016-01-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/02/ShellåŸºç¡€/">ShellåŸºç¡€</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Shell__u6982_u8FF0"><a href="#Shell__u6982_u8FF0" class="headerlink" title="Shell æ¦‚è¿°"></a>Shell æ¦‚è¿°</h2><p><a href="http://www.imooc.com/learn/175">imooc shellè¯¾ç¨‹</a></p>
<p>Shellæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå‘Linuxå†…æ ¸å‘é€è¯·æ±‚ä»¥ä¾¿è¿è¡Œç¨‹åºçš„ç•Œé¢ç³»ç»Ÿçº§ç¨‹åºï¼Œç”¨å¯ä»¥ç”¨Shellæ¥å¯åŠ¨ï¼ŒæŒ‚èµ·ï¼Œåœæ­¢ç”šè‡³æ˜¯ç¼–å†™ä¸€äº›ç¨‹åºã€‚</p>
<p>Shellè¿˜æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ˜“ç¼–å†™æ˜“è°ƒè¯•ï¼Œçµæ´»æ€§è¾ƒå¼ºã€‚Shellæ˜¯è§£é‡Šæ‰§è¡Œçš„è„šæœ¬è¯­è¨€ï¼Œåœ¨Shellä¸­å¯ä»¥ç›´æ¥è°ƒç”¨Linuxç³»ç»Ÿå‘½ä»¤ã€‚</p>
        
          <p class="article-more-link">
            <a href="/2016/01/02/ShellåŸºç¡€/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/01/02/ShellåŸºç¡€/" data-id="cj03kfo2b002puruq53824oyx" class="article-share-link" data-share="baidu" data-title="ShellåŸºç¡€">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/01/02/ShellåŸºç¡€/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Shell/">Shell</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-What-is-Docker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/01/What-is-Docker/" class="article-date">
  <time datetime="2016-01-01T11:43:48.000Z" itemprop="datePublished">2016-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/01/What-is-Docker/">What is Docker?</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="What_is_Docker"><a href="#What_is_Docker" class="headerlink" title="What is Docker"></a>What is Docker</h2><p>Docker allows you to package an applications with all of its dependencies into a standardized unit for development.</p>
<p>å¯¹äºè½¯ä»¶å¼€å‘,Dockerå…è®¸ä½ ç”¨å…¶æ‰€æœ‰ç›¸å…³çš„ä¾èµ–æ‰“åŒ…åº”ç”¨ç¨‹åºåˆ°ä¸€ä¸ªæ ‡å‡†åŒ–å•å…ƒä¸­.</p>
<p><img src="http://7xpk5e.com1.z0.glb.clouddn.com/docker-what_is_layered_filesystems_sm.png" alt="layered_filesystems_sm"></p>
<p>Docker containers wrap up a piece of software in a complete filesystem that contains everything it needs to run : code,runtime,system tools,system libraries - anything you can install on a sever. This guarantees that it will always run the same,regardless of the environment it is running in.</p>
<p>Dockerå®¹å™¨åœ¨ä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿä¸­åŒ…è£¹ä¸€ä¸ªè½¯ä»¶,è¿™ä¸ªæ–‡ä»¶ç³»ç»ŸåŒ…å«è½¯ä»¶è¿è¡Œæ‰€éœ€è¦çš„code,runtime,ç³»ç»Ÿå·¥å…·,ç³»ç»Ÿåº“ç­‰ä»»ä½•ä½ æ‰€èƒ½åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…çš„.è¿™ä¿è¯äº†è½¯ä»¶æ€»æ˜¯è¿è¡Œåœ¨ç›¸åŒçš„ç¯å¢ƒ.(è¿™å¥ç¿»è¯‘çš„çƒ‚,æ¬¢è¿æŒ‡æ­£)</p>
        
          <p class="article-more-link">
            <a href="/2016/01/01/What-is-Docker/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2016/01/01/What-is-Docker/" data-id="cj03kfo1p001juruq16boty1o" class="article-share-link" data-share="baidu" data-title="What is Docker?">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2016/01/01/What-is-Docker/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2015" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/31/2015/" class="article-date">
  <time datetime="2015-12-31T14:19:57.000Z" itemprop="datePublished">2015-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/31/2015/">2015</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>2015è¿˜æœ‰ä¸€ä¼šå°±ç»“æŸäº†.è¿™ä¸€å¹´æˆ‘èº«ä¸Šå‘ç”Ÿäº†å¥½å¤šå¤§äº‹,ä¸€ç‚¹ç‚¹æƒ³èµ·æ¥,æœ‰äº›è‹¦æ¶©,ä¹Ÿæœ‰äº›ç”œèœœ.</p>
<p>2015å¹´å¹´åˆå°±å¼€å§‹ç­¹åˆ’ä¹°æˆ¿çš„äº‹æƒ…,2æœˆä»½å¼€å§‹ä»è‹å·åˆ°ä¸Šæµ·,æ–°æˆ¿,äºŒæ‰‹æˆ¿,çœ‹äº†ä¸ä¸‹100å¥—,è·‘äº†3ä¸ªæœˆ,çœ‹ç€æˆ¿ä»·ä¸€ç›´æ¶¨æ¶¨æ¶¨,æ€»æ„Ÿè§‰å†ä¸ä¹°å°±çœŸçš„ä¹°ä¸èµ·äº†.ä¸€å’¬ç‰™,5æœˆåº•åŒåŒæ–¹çˆ¶æ¯æœ‹å‹å€Ÿé’±åŠ ä¸Šè‡ªå·±å’Œå¥³å‹çš„ç§¯è“„å‹‰å¼ºå‡‘é½é¦–ä»˜,åœ¨æ¾æ±Ÿä¹°ä¸‹.ä¹°æˆ¿çš„åŒæ—¶ä¹Ÿå’Œå¥³å‹é¢†è¯,æ­£å¼ç»“ä¸ºå¤«å¦‡,ç»“æŸäº†7å¹´å¤šå¾—æ‹çˆ±ä¹‹è·¯.</p>
<p>æˆ¿å­æœ‰äº†,è¯é¢†äº†,å°±å¼€å§‹ç­¹åˆ’10æœˆä»½çš„å©šç¤¼.æ‹å©šçº±ç…§,ä¹°å©šæˆ’,ä¹°è¡£æœ,ä¸€ç‚¹ç‚¹çš„ç›´åˆ°æŠŠè€å©†å¨¶å›å®¶.</p>
        
          <p class="article-more-link">
            <a href="/2015/12/31/2015/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2015/12/31/2015/" data-id="cj03kfo3q004buruqe4pj5onz" class="article-share-link" data-share="baidu" data-title="2015">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2015/12/31/2015/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/éšç¬”/">éšç¬”</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Why-Docker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/30/Why-Docker/" class="article-date">
  <time datetime="2015-12-30T15:42:52.000Z" itemprop="datePublished">2015-12-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/30/Why-Docker/">Why Docker?</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      

      <p>ä¸€ç›´å¬è¯´Dockeræ€ä¹ˆæ€ä¹ˆå‰å®³,ä¸æ˜æ‰€ä»¥,ç½‘ä¸ŠæŸ¥äº†ä¸‹,ä¹Ÿåªæ˜¯ç®€å•äº†è§£.å­¦æŠ€æœ¯è¿˜å¾—å»å®˜ç½‘,å°½ç®¡<a href="http://www.docker.com/" target="_blank" rel="external">Dockerå®˜ç½‘</a>éƒ½æ˜¯è‹±æ–‡,çœ‹çš„æ¯”è¾ƒè¾›è‹¦,ä¸è¿‡ä¸€æ–¹é¢å­¦æŠ€æœ¯,ä¸€æ–¹é¢å­¦è‹±è¯­ä¹Ÿæ˜¯å¦™äº‹.è¿™ä¸€ç³»åˆ—çš„Dockerç¬”è®°,å°±è¾¹æŠ„è‹±æ–‡è¾¹ç¿»è¯‘,è¾¹å­¦æŠ€æœ¯å§.</p>
<h4 id="Why_Docker_3F"><a href="#Why_Docker_3F" class="headerlink" title="Why Docker?"></a>Why Docker?</h4><p>Docker provides an integrated technology suite that enables development and IT operations teams to build,ship,and run distributed applications anywhere.</p>
<p>Docker æä¾›äº†ä¸€ä¸ªé›†æˆçš„æŠ€æœ¯ç»„ä»¶,å®ƒä½¿å¾—å¼€å‘æˆ–ITè¿è¥å›¢é˜Ÿå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ„å»º,ship,ä»¥åŠè¿è¡Œåˆ†å¸ƒå¼åº”ç”¨.(shipåˆ°åº•è¯¥æ€ä¹ˆç¿»è¯‘å‘¢?)</p>
<h4 id="Docker_Containers_as_a_Service_28CaaS_29"><a href="#Docker_Containers_as_a_Service_28CaaS_29" class="headerlink" title="Docker Containers as a Service(CaaS)"></a>Docker Containers as a Service(CaaS)</h4><p>Achieve agility and control for Development and IT operations teams to build,ship,and run any app,anywhere </p>
<p>å¼€å‘æˆ–è€…ITè¿è¥éƒ¨é—¨åœ¨ä»»ä½•åœ°æ–¹å¯¹åº”ç”¨è¿›è¡Œæ„å»º,shipéƒ½å®ç°äº†çµæ´»æ€§å’Œæ§åˆ¶æ€§</p>
<h6 id="Agility__u7075_u6D3B_u6027"><a href="#Agility__u7075_u6D3B_u6027" class="headerlink" title="Agility çµæ´»æ€§"></a>Agility çµæ´»æ€§</h6><p>Docker gives developers the freedom to define environments, and create and deploy apps faster and easier,and flexibility for IT ops to quickly response to change.</p>
<p>Dockerä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿè‡ªç”±çš„å®šä¹‰ç¯å¢ƒ,ä»¥åŠç®€å•å¿«é€Ÿçš„åˆ›å»ºå’Œéƒ¨ç½²åº”ç”¨,åŒæ—¶æä¾›äº†çµæ´»æ€§,ITè¿ç»´ä¹Ÿå¯ä»¥å¿«é€Ÿåº”å¯¹å˜åŒ–.</p>
<h6 id="Control__u63A7_u5236_u6027"><a href="#Control__u63A7_u5236_u6027" class="headerlink" title="Control æ§åˆ¶æ€§"></a>Control æ§åˆ¶æ€§</h6><p>Docker enables developers to own all the code from infrastructure to app , and the manageability for IT ops to standardize ,secure and scale the operating environment.</p>
<p>Dockerèƒ½å¤Ÿè®©å¼€å‘äººå‘˜ä»åŸºç¡€è®¾æ–½åˆ°åº”ç”¨ç¨‹åºä¸Šè·å–æ‰€æœ‰çš„ä»£ç  , èƒ½è®©ITè¿ç»´å¯¹äºæ“ä½œç¯å¢ƒçš„è§„èŒƒ,å®‰å…¨,è§„æ¨¡éƒ½æ˜“äºç®¡ç†.</p>
<h6 id="Portability__u53EF_u79FB_u690D_u6027"><a href="#Portability__u53EF_u79FB_u690D_u6027" class="headerlink" title="Portability å¯ç§»æ¤æ€§"></a>Portability å¯ç§»æ¤æ€§</h6><p>Docker gives you choice without complexity , from a laptop to team , to private infrastructure and public cloud provides.</p>
<p>Dockerç»™ä½ ç®€å•çš„é€‰æ‹©,ä»ä¸ªäººç”µè„‘åˆ°å›¢é˜Ÿ,ä»ç§æœ‰åŸºç¡€è®¾æ–½åˆ°å…¬æœ‰äº‘æœåŠ¡æä¾›å•†.</p>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://suqun.github.io/2015/12/30/Why-Docker/" data-id="cj03kfo1n001huruqkof8fesk" class="article-share-link" data-share="baidu" data-title="Why Docker?">åˆ†äº«åˆ°</a>
      

      
        <a href="http://suqun.github.io/2015/12/30/Why-Docker/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
      
      <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CQRS/">CQRS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eureka/">Eureka</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event-Sourcing/">Event-Sourcing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Feign/">Feign</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hystrix/">Hystrix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IntelliJ/">IntelliJ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/">JVM</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-NIO/">Java NIO</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-SE/">Java SE</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/">Jenkins</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/K8s/">K8s</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Netflix/">Netflix</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ribbon/">Ribbon</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud/">Spring Cloud</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zookeeper/">Zookeeper</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/éšç¬”/">éšç¬”</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/CQRS/" style="font-size: 10px;">CQRS</a> <a href="/tags/Docker/" style="font-size: 17.5px;">Docker</a> <a href="/tags/Eureka/" style="font-size: 13.75px;">Eureka</a> <a href="/tags/Event-Sourcing/" style="font-size: 10px;">Event-Sourcing</a> <a href="/tags/Feign/" style="font-size: 10px;">Feign</a> <a href="/tags/Hystrix/" style="font-size: 10px;">Hystrix</a> <a href="/tags/IntelliJ/" style="font-size: 10px;">IntelliJ</a> <a href="/tags/JVM/" style="font-size: 16.25px;">JVM</a> <a href="/tags/Java-NIO/" style="font-size: 18.75px;">Java NIO</a> <a href="/tags/Java-SE/" style="font-size: 17.5px;">Java SE</a> <a href="/tags/Jenkins/" style="font-size: 10px;">Jenkins</a> <a href="/tags/K8s/" style="font-size: 13.75px;">K8s</a> <a href="/tags/Linux/" style="font-size: 13.75px;">Linux</a> <a href="/tags/Netflix/" style="font-size: 13.75px;">Netflix</a> <a href="/tags/Ribbon/" style="font-size: 11.25px;">Ribbon</a> <a href="/tags/Shell/" style="font-size: 13.75px;">Shell</a> <a href="/tags/Spring-Boot/" style="font-size: 20px;">Spring Boot</a> <a href="/tags/Spring-Cloud/" style="font-size: 15px;">Spring Cloud</a> <a href="/tags/Zookeeper/" style="font-size: 12.5px;">Zookeeper</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/éšç¬”/" style="font-size: 10px;">éšç¬”</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">ä¸‰æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">äºŒæœˆ 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">åäºŒæœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">åä¸€æœˆ 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">åæœˆ 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">ä¹æœˆ 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">å…«æœˆ 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">å…­æœˆ 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">äº”æœˆ 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">å››æœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">äºŒæœˆ 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">ä¸€æœˆ 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">åäºŒæœˆ 2015</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">è¿‘æœŸæ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/03/08/JVM-note-8/">è™šæ‹Ÿæœºæ€§èƒ½ç›‘æ§ä¸æ•…éšœå¤„ç†å·¥å…·</a>
          </li>
        
          <li>
            <a href="/2017/02/25/thinking-1/">ä¸€äº›æƒ³æ³•</a>
          </li>
        
          <li>
            <a href="/2017/02/21/JVM-note-7/">åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”å†…å­˜åˆ†é…ä¸å›æ”¶ç­–ç•¥</a>
          </li>
        
          <li>
            <a href="/2017/02/19/JVM-note-6/">åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”åƒåœ¾æ”¶é›†å™¨</a>
          </li>
        
          <li>
            <a href="/2017/02/18/JVM-note-5/">JVMç¬”è®°äº”ï¼šåƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥â€”â€”åƒåœ¾æ”¶é›†ç®—æ³•</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å‹æƒ…é“¾æ¥</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="" target="_blank">ç¨‹åºçŒ¿DD</a>
          </li>
        
          <li>
            <a href="" target="_blank">å¹¶å‘ç¼–ç¨‹ç½‘</a>
          </li>
        
          <li>
            <a href="" target="_blank">é¸Ÿçª</a>
          </li>
        
          <li>
            <a href="" target="_blank">æå®¢å­¦é™¢</a>
          </li>
        
          <li>
            <a href="" target="_blank">æ…•è¯¾ç½‘</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Larry<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">é¦–é¡µ</a>
  
    <a href="/archives" class="mobile-nav-link">æ‰€æœ‰æ–‡ç« </a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="è¿”å›é¡¶éƒ¨"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- å¤šè¯´å…¬å…±jsä»£ç  start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"suqun"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- å¤šè¯´å…¬å…±jsä»£ç  end -->


<!-- ç™¾åº¦åˆ†äº« start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a>
    <a class="article-share-qq" data-cmd="sqq" title="åˆ†äº«åˆ°QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘"></a>
    <a class="article-share-more" data-cmd="more" title="æ›´å¤š"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- ç™¾åº¦åˆ†äº« end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js" type="text/javascript"></script>

</div>
</body>
</html>
